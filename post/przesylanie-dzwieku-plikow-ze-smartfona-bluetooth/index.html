<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Przesyłanie dźwięku i plików ze smartfona przez bluetooth | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Przesyłanie dźwięku i plików ze smartfona przez bluetooth" />
<meta property="og:description" content="Praktycznie każdy telefon czy komputer/laptop jest wyposażony już w adapter bluetooth. Obecnie coraz
rzadziej ten protokół jest wykorzystywany do przesyłania plików jako takich, bo przecie mamy WiFi.
Niemniej jednak, w starszych modelach urządzeń bluetooth może być dla nas jedyną opcją, by przesłać
pliki bezprzewodowo. Nawet jeśli dysponujemy smartfonem z jednym z nowszych Androidów, to i tak są
pewne sytuacje, w których bluetooth może znaleźć ciekawe zastosowanie, np. streaming dźwięku.
Urządzenia bluetooth bardzo często sprawiają problemy pod linux i przydałoby się zebrać trochę
informacji na temat ich konfiguracji, by przesyłanie dźwięku i plików nie stanowiło dla nas
większego wyzwania w sytuacjach podbramkowych, gdzie wszelkie inne alternatywy komunikacji zawodzą." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/przesylanie-dzwieku-plikow-ze-smartfona-bluetooth/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-11-19T19:40:24+00:00" />
<meta property="article:modified_time" content="2016-11-19T19:40:24+00:00" />


		<meta itemprop="name" content="Przesyłanie dźwięku i plików ze smartfona przez bluetooth">
<meta itemprop="description" content="Praktycznie każdy telefon czy komputer/laptop jest wyposażony już w adapter bluetooth. Obecnie coraz
rzadziej ten protokół jest wykorzystywany do przesyłania plików jako takich, bo przecie mamy WiFi.
Niemniej jednak, w starszych modelach urządzeń bluetooth może być dla nas jedyną opcją, by przesłać
pliki bezprzewodowo. Nawet jeśli dysponujemy smartfonem z jednym z nowszych Androidów, to i tak są
pewne sytuacje, w których bluetooth może znaleźć ciekawe zastosowanie, np. streaming dźwięku.
Urządzenia bluetooth bardzo często sprawiają problemy pod linux i przydałoby się zebrać trochę
informacji na temat ich konfiguracji, by przesyłanie dźwięku i plików nie stanowiło dla nas
większego wyzwania w sytuacjach podbramkowych, gdzie wszelkie inne alternatywy komunikacji zawodzą."><meta itemprop="datePublished" content="2016-11-19T19:40:24+00:00" />
<meta itemprop="dateModified" content="2016-11-19T19:40:24+00:00" />
<meta itemprop="wordCount" content="4021">
<meta itemprop="keywords" content="pulseaudio,dźwięk,debian,bluetooth,smartfon," />
		<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Przesyłanie dźwięku i plików ze smartfona przez bluetooth"/>
<meta name="twitter:description" content="Praktycznie każdy telefon czy komputer/laptop jest wyposażony już w adapter bluetooth. Obecnie coraz
rzadziej ten protokół jest wykorzystywany do przesyłania plików jako takich, bo przecie mamy WiFi.
Niemniej jednak, w starszych modelach urządzeń bluetooth może być dla nas jedyną opcją, by przesłać
pliki bezprzewodowo. Nawet jeśli dysponujemy smartfonem z jednym z nowszych Androidów, to i tak są
pewne sytuacje, w których bluetooth może znaleźć ciekawe zastosowanie, np. streaming dźwięku.
Urządzenia bluetooth bardzo często sprawiają problemy pod linux i przydałoby się zebrać trochę
informacji na temat ich konfiguracji, by przesyłanie dźwięku i plików nie stanowiło dla nas
większego wyzwania w sytuacjach podbramkowych, gdzie wszelkie inne alternatywy komunikacji zawodzą."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Przesyłanie dźwięku i plików ze smartfona przez bluetooth</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2016-11-19T19:40:24Z">Opublikowano: 19/11/2016</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Przesyłanie dźwięku i plików ze smartfona przez bluetooth</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#oprogramowanie-bluetooth-w-debianie">Oprogramowanie bluetooth w Debianie</a></li>
    <li><a href="#adapter-bluetooth">Adapter bluetooth</a></li>
    <li><a href="#problemy-z-sdptool-w-bluez-5">Problemy z sdptool w Bluez 5</a></li>
    <li><a href="#parowanie-komputera-ze-smartfonem">Parowanie komputera ze smartfonem</a></li>
    <li><a href="#problemy-przy-połączeniu-ze-smartfonem-przez-bluetooth">Problemy przy połączeniu ze smartfonem przez bluetooth</a></li>
    <li><a href="#jak-strumieniować-dźwięk-ze-smartfona-przez-bluetooth">Jak strumieniować dźwięk ze smartfona przez bluetooth</a></li>
    <li><a href="#przesyłanie-plików-przez-bluetooth-obex">Przesyłanie plików przez bluetooth (OBEX)</a>
      <ol>
        <li><a href="#narzędzie-ussp-push">Narzędzie ussp-push</a></li>
        <li><a href="#narzędzie-obexpushd">Narzędzie obexpushd</a></li>
        <li><a href="#obex-ftp-i-bluetooth-file-transfer">OBEX FTP i Bluetooth File Transfer</a></li>
      </ol>
    </li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Praktycznie każdy telefon czy komputer/laptop jest wyposażony już w adapter bluetooth. Obecnie coraz
rzadziej ten protokół jest wykorzystywany do przesyłania plików jako takich, bo przecie mamy WiFi.
Niemniej jednak, w starszych modelach urządzeń bluetooth może być dla nas jedyną opcją, by przesłać
pliki bezprzewodowo. Nawet jeśli dysponujemy smartfonem z jednym z nowszych Androidów, to i tak są
pewne sytuacje, w których bluetooth może znaleźć ciekawe zastosowanie, np. streaming dźwięku.
Urządzenia bluetooth bardzo często sprawiają problemy pod linux i przydałoby się zebrać trochę
informacji na temat ich konfiguracji, by przesyłanie dźwięku i plików nie stanowiło dla nas
większego wyzwania w sytuacjach podbramkowych, gdzie wszelkie inne alternatywy komunikacji zawodzą.</p>
<h2 id="oprogramowanie-bluetooth-w-debianie">Oprogramowanie bluetooth w Debianie</h2>
<p>W zależności od wykorzystywanego środowiska graficznego, inne oprogramowanie jest wykorzystywane do
zarządzania urządzeniami bluetooth. To co się zdaje łączyć wszystkie te graficzne nakładki, to fakt
możliwości równoległego wykorzystywania niskopoziomowego narzędzia <code>bluetoothctl</code> . Ja nie korzystam
z żadnego środowiska graficznego, dlatego też nie będę tutaj opisywał jak z poziomu GUI
skonfigurować do pracy adapter bluetooth (czy to ten na USB, czy też ten wbudowany w nasz laptop),
a jedynie skupię się na tym konsolowym <code>bluetoothctl</code> .</p>
<p>Narzędzie <code>bluetoothctl</code> jest dostarczane z pakietem <code>bluez</code> . W tym pakiecie znajdują się również
narzędzia takie jak <code>hcitool</code> i <code>hciconfig</code> , które są w stanie skonfigurować sam interfejs <code>hci0</code> .
Jest tam również <code>sdptool</code> umożliwiający wysyłanie zapytań do serwera SDP, choć w przypadku
korzystania Bluez 5 mogą pojawić się pewne problemy z tymi zapytaniami (o tym później). Generalnie
to <code>sdptool</code> może nam zwrócić informacje na temat usług jakie jest w stanie świadczyć urządzenie, z
którym zamierzamy łączyć się po bluetooth.</p>
<p>Jeśli zamierzamy przesyłać dźwięk ze smartfona bezpośrednio na komputer (lub też i w drugą stronę),
np. chcemy skorzystać z głośników komputera w celu odtworzenia mp3, które mamy na smartfonie, to nie
obejdzie się bez zaprzęgnięcia do tego celu serwera dźwięku PulseAudio. O ile większość linux'ów
domyślnie wykorzystuje już PulseAudio, to nie wszystkie jego moduły są standardowo zainstalowane w
każdej dystrybucji. Dlatego też upewnijmy się, że mamy w swoim Debianie wgrany pakiet
<code>pulseaudio-module-bluetooth</code> .</p>
<p>W przypadku przesyłania plików, to sprawa jest trochę skomplikowana. Standardowo jest wykorzystywany
<a href="https://en.wikipedia.org/wiki/OBject_EXchange">protokół OBEX</a> (OBject EXchange), który wymaga
klienta i serwera. W przypadku mojego starego telefonu, byłem w stanie zamontować jego zasoby i
przeglądać je lokalnie na komputerze. W przypadku smartfona z Androidem 5.1 (Lollipop) mogę jedynie
przesłać pojedynczy plik ale tylko z komputera na telefon. Nie jest to wygodne rozwiązanie ale i
tak, by móc z niego skorzystać potrzebny nam jest pakiet <code>ussp-push</code> . By można było przesłać plik
również z telefonu na komputer, musimy zainstalować w Debianie także pakiet <code>obexpushd</code>. Jeśli
chcemy zaś przeglądać zasoby telefonu, to ten musi wspierać OBEX FTP oraz w systemie trzeba
doinstalować <code>obexfs</code> .</p>
<p>Podsumowując, potrzebne nam są te poniższe pakiety:</p>
<pre><code># aptitude install \
bluez \
bluez-firmware \
bluez-obexd \
obexfs \
ussp-push \
obexpushd \
pulseaudio-module-bluetooth
</code></pre>
<p>W pakiecie <code>bluez</code> jest także zawarta usługa <code>bluetooth.service</code> , którą możemy śmiało włączyć. Nie
zostanie ona jednak wystartowana do momentu wykrycia w systemie odpowiedniego adaptera bluetooth.</p>
<h2 id="adapter-bluetooth">Adapter bluetooth</h2>
<p>Ja dysponuję dwoma różnymi adapterami bluetooth (Pentagram i Quer) ale obydwa są rozpoznawane jako
<code>idVendor=0a12</code> i <code>idProduct=0001</code> . Tak czy inaczej, taki adapter pracuje pod linux bez większych
niespodzianek. To na wypadek, gdyby ktoś potrzebował sobie takie urządzenie zakupić i szukał czegoś
co działa bezproblemowo.</p>
<pre><code># lsusb -vvv -d 0a12:0001


Bus 002 Device 007: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass          224 Wireless
  bDeviceSubClass         1 Radio Frequency
  bDeviceProtocol         1 Bluetooth
  bMaxPacketSize0        16
  idVendor           0x0a12 Cambridge Silicon Radio, Ltd
  idProduct          0x0001 Bluetooth Dongle (HCI mode)
  bcdDevice            1.34
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          108
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
Device Status:     0x0000
  (Bus Powered)
</code></pre>
<p>Poniżej jest dokładny log z tego co się dzieje w systemie po podłączeniu tego adaptera do portu USB:</p>
<pre><code>kernel: usb 2-1.3: new full-speed USB device number 7 using ehci-pci
kernel: usb 2-1.3: New USB device found, idVendor=0a12, idProduct=0001
kernel: usb 2-1.3: New USB device strings: Mfr=0, Product=0, SerialNumber=0
kernel: Bluetooth: Core ver 2.21
kernel: NET: Registered protocol family 31
kernel: Bluetooth: HCI device and connection manager initialized
kernel: Bluetooth: HCI socket layer initialized
kernel: Bluetooth: L2CAP socket layer initialized
kernel: Bluetooth: SCO socket layer initialized
kernel: usbcore: registered new interface driver btusb
systemd[1]: Starting Load/Save RF Kill Switch Status...
systemd[1]: Started Load/Save RF Kill Switch Status.
systemd[1]: Starting Bluetooth service...
bluetoothd[3404]: Bluetooth daemon 5.43
systemd[1]: Started Bluetooth service.
systemd[1]: Reached target Bluetooth.
bluetoothd[3404]: Starting SDP server
kernel: Bluetooth: BNEP (Ethernet Emulation) ver 1.3
kernel: Bluetooth: BNEP filters: protocol multicast
kernel: Bluetooth: BNEP socket layer initialized
bluetoothd[3404]: Bluetooth management interface 1.13 initialized
bluetoothd[3404]: Failed to obtain handles for &quot;Service Changed&quot; characteristic
bluetoothd[3404]: Sap driver initialization failed.
bluetoothd[3404]: sap-server: Operation not permitted (1)
bluetoothd[3404]: Endpoint registered: sender=:1.29 path=/MediaEndpoint/A2DPSource
bluetoothd[3404]: Endpoint registered: sender=:1.29 path=/MediaEndpoint/A2DPSink
kernel: Bluetooth: RFCOMM TTY layer initialized
kernel: Bluetooth: RFCOMM socket layer initialized
kernel: Bluetooth: RFCOMM ver 1.11
</code></pre>
<p>Jak widać proces podnoszenia usług systemowych jest praktycznie automatyczny. Niemniej jednak, w
zależności od usług, z których zamierzamy korzystać przez bluetooth, musimy jeszcze nieco czasu
poświęcić przy konfiguracji adaptera.</p>
<h2 id="problemy-z-sdptool-w-bluez-5">Problemy z sdptool w Bluez 5</h2>
<p>Narzędzie <code>sdptool</code> w Bluez 5 nie działa jak należy, w efekcie czego nie mamy możliwości nawiązania
połączenia z serwerem SDP. Możemy sprawdzić czy ten problem nas dotyczy logując się na użytkownika
root i wydając w terminalu poniższe polecenia:</p>
<pre><code># sdptool browse FF:FF:FF:00:00:00
Failed to connect to SDP server on FF:FF:FF:00:00:00: Connection refused

# sdptool get Lan
Failed to connect to SDP server on FF:FF:FF:00:00:00: Connection refused
</code></pre>
<p>Można tej sytuacji zaradzić instalując pakiet <code>bluez</code> w wersji 4, co nie zawsze jest możliwe, lub
też edytując plik usługi systemd odpowiedzialny za odpalenie demona <code>bluetoothd</code> :</p>
<pre><code># systemctl edit --full bluetooth.service
</code></pre>
<p>Teraz wystarczy zmienić linijkę z <code>ExecStart</code> dopisując na jej końcu parametr <code>--compat</code> :</p>
<pre><code>ExecStart=/usr/lib/bluetooth/bluetoothd --compat
</code></pre>
<p>Zapisujemy plik i restartujemy usługę:</p>
<pre><code># systemctl reenable bluetooth
# systemctl daemon-reload
# systemctl restart bluetooth
</code></pre>
<p>W tej chwili powinniśmy już być wstanie podłączyć się do lokalnego serwera SDP:</p>
<pre><code># sdptool get Lan
Service RecHandle: 0x0
Service Class ID List:
  &quot;SDP Server&quot; (0x1000)

# sdptool browse FF:FF:FF:00:00:00

Browsing FF:FF:FF:00:00:00 ...
Service RecHandle: 0x10000
Service Class ID List:
  &quot;PnP Information&quot; (0x1200)
Profile Descriptor List:
  &quot;PnP Information&quot; (0x1200)
    Version: 0x0103

Browsing FF:FF:FF:00:00:00 ...
Service Search failed: Invalid argument
Service Name: Generic Access Profile
Service Provider: BlueZ
Service RecHandle: 0x10001
Service Class ID List:
  &quot;Generic Access&quot; (0x1800)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 31
  &quot;ATT&quot; (0x0007)
    uint16: 0x0001
    uint16: 0x0005

Service Name: Generic Attribute Profile
Service Provider: BlueZ
Service RecHandle: 0x10002
Service Class ID List:
  &quot;Generic Attribute&quot; (0x1801)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 31
  &quot;ATT&quot; (0x0007)
    uint16: 0x0006
    uint16: 0x0009

Service Name: AVRCP CT
Service RecHandle: 0x10003
Service Class ID List:
  &quot;AV Remote&quot; (0x110e)
  &quot;AV Remote Controller&quot; (0x110f)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0103
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0106

Service Name: AVRCP TG
Service RecHandle: 0x10004
Service Class ID List:
  &quot;AV Remote Target&quot; (0x110c)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0103
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0105

Service Name: Audio Source
Service RecHandle: 0x10005
Service Class ID List:
  &quot;Audio Source&quot; (0x110a)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 25
  &quot;AVDTP&quot; (0x0019)
    uint16: 0x0103
Profile Descriptor List:
  &quot;Advanced Audio&quot; (0x110d)
    Version: 0x0103

Service Name: Audio Sink
Service RecHandle: 0x10006
Service Class ID List:
  &quot;Audio Sink&quot; (0x110b)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 25
  &quot;AVDTP&quot; (0x0019)
    uint16: 0x0103
Profile Descriptor List:
  &quot;Advanced Audio&quot; (0x110d)
    Version: 0x0103

Service Name: Headset Voice gateway
Service RecHandle: 0x10007
Service Class ID List:
  &quot;Headset Audio Gateway&quot; (0x1112)
  &quot;Generic Audio&quot; (0x1203)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 12
Profile Descriptor List:
  &quot;Headset&quot; (0x1108)
    Version: 0x0102
</code></pre>
<p>Niemniej jednak, te powyższe polecenia w dalszym ciągu nie zadziałają nam na zwykłym użytkowniku. Ta
opcja <code>--compat</code> dodaje unix'owy socket w lokalizacji <code>/var/run/sdp</code> . Jeśli chcemy korzystać z
bluetooth jako normalny użytkownik, to musimy nadać odpowiednie uprawnienia na ten plik, bo
standardowo tylko root może z niego korzystać. Problem w tym, że po zrestartowaniu demona
<code>bluetoothd</code> , ten plik zostanie utworzony na nowo i znowu będzie trzeba mu te uprawnienia
dostosować. Tworzymy zatem dwa poniższe pliki.</p>
<p>Plik <code>/etc/systemd/system/var-run-sdp.path</code></p>
<pre><code>[Path]
PathExists=/var/run/sdp
Unit=var-run-sdp.service

[Install]
WantedBy=bluetooth.service
</code></pre>
<p>Plik <code>/etc/systemd/system/var-run-sdp.service</code></p>
<pre><code>[Unit]
Description=Setting /var/run/sdp permissions
ConditionPathExists=/var/run/sdp

[Service]
Type=simple
RemainAfterExit=true
ExecStart=/bin/chgrp bluetooth /var/run/sdp

[Install]
RequiredBy=var-run-sdp.path
</code></pre>
<p>Zadanie jakie ma realizować ta usługa polega na monitorowaniu pliku <code>/var/run/sdp</code> . Ilekroć tylko
zostanie on stworzony, systemd przepisze mu uprawnienia, a konkretnie zmieni mu grupę z <code>root</code> na
<code>bluetooth</code> . Włączmy jeszcze tę usługę:</p>
<pre><code># systemctl daemon-reload
# systemctl enable var-run-sdp.path
# systemctl start var-run-sdp.path
</code></pre>
<p>Na koniec dodajemy pożądanych użytkowników do grupy <code>bluetooth</code> :</p>
<pre><code># adduser morfik bluetooth
</code></pre>
<p>Restartujemy jeszcze demona <code>bluetoothd</code> i sprawdzamy, czy plik <code>/var/run/sdp</code> ma odpowiednie
uprawnienia:</p>
<pre><code># systemctl restart bluetooth

# ls -al /var/run/sdp
srw-rw---- 1 root bluetooth 0 2016-11-17 14:54:30 /var/run/sdp=
</code></pre>
<p>Teraz już wystarczy zrestartować sesję (zalogować się ponownie w systemie) i zwykły użytkownik
powinien bez większego problemu podłączyć się do serwera SDP.</p>
<h2 id="parowanie-komputera-ze-smartfonem">Parowanie komputera ze smartfonem</h2>
<p>Cały proces parowania urządzeń w protokole bluetooth można przeprowadzić posługując się narzędziem
<code>bluetoothctl</code> . Zakładając, że odpowiednie usługi już działają nam w tle, to możemy przejść do
konfiguracji bluetooth na smartfonie i na Debianie. Na smartfonie nie powinno być większych
problemów. Przechodzimy do Ustawienia =&gt; Bluetooth i aktywujemy nadajnik:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/001.linux-debian-bluetooth-smartfon-aktywacja-telefon.png" alt="linux-debian-bluetooth-smartfon-aktywacja-telefon"    class="huge"></p>
<p>Smartfon powinien zacząć wyszukiwać dostępne urządzenia ale nie znajdzie jeszcze naszego komputera.
Musimy pierw uczynić go możliwym do odnalezienia. Odpalamy zatem terminal i jako zwykły użytkownik
wpisujemy <code>bluetoothctl</code> (działa autouzupełnianie za pomocą klawisza Tab):</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/002.linux-debian-bluetooth-smartfon-informacje-usb-adapter.png" alt="linux-debian-bluetooth-smartfon-informacje-usb-adapter"    class="huge"></p>
<p>Mamy tutaj informacje na temat aktualnie podpiętego adaptera bluetooth do portu USB komputera. Nazwa
widoczna przy skanowaniu to wykorzystywany hostname. Klasa z kolei określa usługi jakie dana maszyna
jest w stanie świadczyć. <a href="http://bluetooth-pentest.narod.ru/software/bluetooth_class_of_device-service_generator.html">Dokładna lista jest uwzględniona
tutaj</a>.
Mamy też informacje na temat zasilania i możliwości parowania. Z kolei zaś wszystkie pozycje z UUID
odnoszą się do usług jakie maszyna jest w stanie zapewnić (można konfigurować dowolnie).</p>
<p>Jako, że naszym celem jest sprawowanie komputera ze smartfonem, to w konsoli bluetooth wpisujemy
kolejno poniższe polecenia:</p>
<pre><code>[bluetooth]# power on
[bluetooth]# discoverable on
[bluetooth]# pairable on
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/003.linux-debian-bluetooth-smartfon-aktywacja-komputer.png" alt="linux-debian-bluetooth-smartfon-aktywacja-komputer"    class="huge"></p>
<p>Teraz możemy sprawować urządzenia. Ten proces może zostać zainicjowany ze smartfona lub z komputera.
W przypadku smartfona raczej nie powinno być problemów, to sparujmy te urządzenia inicjując cały
proces na komputerze.</p>
<p>Przede wszystkim musimy aktywować agenta, który wynegocjuje odpowiednie parametry połączenia,
wliczając w to sposób przekazania sekretu. Ten sekret trzeba wpis zarówno na komputerze jak i
smartfonie. Zwykle jest to czterocyfrowy PIN, np. 0000 lub 1234. Zarówno komputer jak i smartfon
dysponują klawiaturami, dlatego też możemy wybrać sobie agenta <code>KeyboardOnly</code> :</p>
<pre><code>[bluetooth]# agent KeyboardOnly
[bluetooth]# default-agent
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/004.linux-debian-bluetooth-smartfon-agent.png" alt="linux-debian-bluetooth-smartfon-agent"    class="huge"></p>
<p>Teraz wysyłamy prośbę parowania:</p>
<pre><code>[bluetooth]# scan on
[bluetooth]# pair 40:3F:8C:02:41:AD
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/005.linux-debian-bluetooth-smartfon-parowanie-urzadzen.png" alt="linux-debian-bluetooth-smartfon-parowanie-urzadzen"    class="huge"></p>
<p>Wyżej widzimy, że agent poprosił nas o wpisanie kodu PIN, oraz że wpisany kod to 1234. Teraz
przechodzimy na telefon. Powinno nam się pojawić to poniższe okienko, w którym wpisujemy PIN:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/006.linux-debian-bluetooth-smartfon-parowanie-urzadzen.png" alt="linux-debian-bluetooth-smartfon-parowanie-urzadzen"    class="medium"></p>
<p>Urządzenia mamy sparowane. Dla pewności możemy sprawdzić czy faktycznie system zarówno komputera jak
i telefonu honoruje te ustawienia.</p>
<p>Komputer:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/007.linux-debian-bluetooth-smartfon-sparowane-urzadzenia.png" alt="linux-debian-bluetooth-smartfon-sparowane-urzadzenia"    class="huge"></p>
<p>Telefon:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/008.linux-debian-bluetooth-smartfon-sparowane-urzadzenia.png" alt="linux-debian-bluetooth-smartfon-sparowane-urzadzenia"    class="huge"></p>
<p>Wygląda dobrze. Podłączmy zatem ze sobą te dwa sprzęty:</p>
<pre><code>[bluetooth]# connect 40:3F:8C:02:41:AD
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/009.linux-debian-bluetooth-smartfon-laczenie-urzadzen.png" alt="linux-debian-bluetooth-smartfon-laczenie-urzadzen"    class="huge"></p>
<p>Na telefonie zaś powinien wyskoczyć status połączony:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/010.linux-debian-bluetooth-smartfon-polaczone-urzadzenia.png" alt="linux-debian-bluetooth-smartfon-polaczone-urzadzenia"    class="medium"></p>
<p>Warto zauważyć, że prompt zmienił nazwę z <code>bluetooth</code> na nazwę urządzenia, w tym przypadku
<code>NeffosC5</code> . Połączenie zostało ustanowione i przydałoby się oznaczyć nasz smartfon jako zaufany:</p>
<pre><code>[NeffosC5]# trust 40:3F:8C:02:41:AD
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/011.linux-debian-bluetooth-smartfon-zaufane-urzadzenia.png" alt="linux-debian-bluetooth-smartfon-zaufane-urzadzenia"    class="huge"></p>
<p>Na koniec sprawdzamy jeszcze status smartfona:</p>
<pre><code>[NeffosC5]# info 40:3F:8C:02:41:AD
</code></pre>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/012.linux-debian-bluetooth-smartfon-informacje-o-urzadzeniu.png" alt="linux-debian-bluetooth-smartfon-informacje-o-urzadzeniu"    class="huge"></p>
<p>Wygląda dobrze. Możemy zatem przejść do skonfigurowania przesyłania plików jak i streaming'u
dźwięku.</p>
<h2 id="problemy-przy-połączeniu-ze-smartfonem-przez-bluetooth">Problemy przy połączeniu ze smartfonem przez bluetooth</h2>
<p>Czasami podczas konfiguracji systemu pod streaming dźwięku można napotkać problemy z podłączeniem
się do smartfona. Po skorzystaniu z polecenia <code>connect</code> dostajemy jedynie poniższy błąd:</p>
<pre><code>[bluetooth]# connect 40:3F:8C:02:41:AD
Attempting to connect to 40:3F:8C:02:41:AD
Failed to connect: org.bluez.Error.Failed
</code></pre>
<p>W logu systemowym zaś można dostrzec następujący komunikat:</p>
<pre><code>bluetoothd[63148]: a2dp-source profile connect failed for 40:3F:8C:02:41:AD: Protocol not available
</code></pre>
<p>Ten problem można poprawić instalując w systemie pakiet <code>pulseaudio-module-bluetooth</code> . Po
zainstalowaniu tego pakietu musimy załadować odpowiednie moduły w poniższy sposób:</p>
<pre><code>$ pactl load-module module-bluetooth-discover
$ pactl load-module module-bluetooth-policy

$ pactl list modules | grep blue
    Name: module-bluetooth-discover
    Name: module-bluez5-discover
    Name: module-bluetooth-policy
    Name: module-bluez5-device
</code></pre>
<p>Jeśli z jakiegoś powodu te moduły nie są ładowane automatycznie na starcie PulseAudio, to musimy
poddać edycji plik <code>/etc/pulse/default.pa</code> i dopisać w nim następujące linijki:</p>
<pre><code>.ifexists module-bluetooth-policy.so
load-module module-bluetooth-policy
.endif

.ifexists module-bluetooth-discover.so
load-module module-bluetooth-discover
.endif
</code></pre>
<p>Teraz nie powinniśmy mieć już problemów z podłączeniem się do smartfona. Obecność w logu systemowym
poniższych informacji wskazuje, że problem został wyeliminowany:</p>
<pre><code>...
bluetoothd[63148]: Endpoint registered: sender=:1.95 path=/MediaEndpoint/A2DPSource
bluetoothd[63148]: Endpoint registered: sender=:1.95 path=/MediaEndpoint/A2DPSink
...
kernel: input: 40:3F:8C:02:41:AD as /devices/virtual/input/input34
...
</code></pre>
<h2 id="jak-strumieniować-dźwięk-ze-smartfona-przez-bluetooth">Jak strumieniować dźwięk ze smartfona przez bluetooth</h2>
<p>W opcjach urządzenia bluetooth na smartfonie mogliśmy zobaczyć, że była tam zaznaczona pozycja
&quot;Dźwięk multimediów&quot;. Poniżej jest jeszcze raz ta fotka:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/013.linux-debian-bluetooth-smartfon-streaming-dzwieku.png" alt="linux-debian-bluetooth-smartfon-streaming-dzwieku"    class="medium"></p>
<p>Jeśli jest ona zaznaczona, to dźwięk powinien być przesłany po bluetooth do komputera praktycznie
OOTB. Tam powinien go odebrać PulseAudio. Możemy to w bardzo prosty sposób sprawdzić. Uruchommy
zatem na smartfonie jakąś aplikację, która jest w stanie odtwarzać dźwięk. Ja korzystałem z VLC. Jak
tylko plik <code>.mp3</code> zaczął być odtwarzany, głośniki mojego komputera zaczęły grać muzykę. Podglądając
w takim momencie co się dzieje na na serwerze dźwięku (przez <code>pavucontrol</code> ) można zobaczyć coś
takiego:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/014.linux-debian-bluetooth-smartfon-streaming-dzwiek-pulseaudio.png" alt="linux-debian-bluetooth-smartfon-streaming-dzwiek-pulseaudio"    class="huge"></p>
<p>Ta pozycja <code>loopback from NeffosC5</code> to jest właśnie strumień naszego smartfona, którym można
dowolnie zarządzać, tak jakby to lokalnie była odtwarzana jakaś aplikacja dźwiękowa. Operowanie
głośnością na smartfonie również ma efekt na komputerze. Oczywiście przykład z komputerem nie jest
najlepszy, bo przecie można bez problemu taka muzykę zgrać na dysk z telefonu ale korzystając, np. z
systemu live czy mając zwykłe głośniki bluetooth, to już taki setup nabiera większego sensu.</p>
<p>Warto też wspomnieć, że smartfony mogą nadawać lepszej jakości dźwięk przez bluetooth. Trzeba tylko
tę opcję włączyć w Ustawienia =&gt; Dźwięki i Powiadomienia =&gt; Funkcje poprawy dźwięku:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/015.linux-debian-bluetooth-smartfon-poprawa-jakosci-dzwieku.png" alt="linux-debian-bluetooth-smartfon-poprawa-jakosci-dzwieku"    class="huge"></p>
<p>Problem ze smartfonami jest taki, że standardowe ROM'y nie umożliwiają przesłania dźwięku z PC na
smartfona. Póki co jeszcze nie wiem jak tego typu przedsięwzięcie zorganizować. Jak natknę się na
jakieś ciekawe info odnośnie tej kwestii, to dorzucę je tutaj. (FIXME)</p>
<h2 id="przesyłanie-plików-przez-bluetooth-obex">Przesyłanie plików przez bluetooth (OBEX)</h2>
<p>Pora skupić się na przesyłaniu plików przez bluetooth. Standardowo w linux'ie możemy przesłać
jedynie plik z komputera na telefon. Można to zrobić posługując się dowolną graficzną nakładką
zdolną zarządzać modułem bluetooth, np. <code>blueman</code> . Jeśli zaś chodzi o polecenia konsolowe, to
najpierw musimy ustalić na jakich kanałach są dostępne usługi bluetooth ale zanim do tego
przejdziemy, to skonfigurujmy sobie interfejs <code>hci0</code> :</p>
<pre><code># hcitool dev
Devices:
    hci0    E8:03:9A:CB:0C:24

# hciconfig hci0 up

# hciconfig -a hci0
hci0:   Type: BR/EDR  Bus: USB
    BD Address: E8:03:9A:CB:0C:24  ACL MTU: 1022:8  SCO MTU: 183:5
    UP RUNNING PSCAN ISCAN
    RX bytes:30365733 acl:46626 sco:0 events:576 errors:0
    TX bytes:2920 acl:70 sco:0 commands:77 errors:0
    Features: 0xff 0xfe 0x0d 0xfe 0xd8 0x7f 0x7b 0x87
    Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
    Link policy: RSWITCH HOLD SNIFF
    Link mode: SLAVE ACCEPT
    Name: 'morfikownia'
    Class: 0x1c010c
    Service Classes: Rendering, Capturing, Object Transfer
    Device Class: Computer, Laptop
    HCI Version: 4.0 (0x6)  Revision: 0x102
    LMP Version: 4.0 (0x6)  Subversion: 0x1
    Manufacturer: Atheros Communications, Inc. (69)
</code></pre>
<p>Skanujemy teraz w poszukiwaniu urządzeń bluetooth:</p>
<pre><code># hcitool scan
Scanning ...
    40:3F:8C:02:41:AD   NeffosC5
</code></pre>
<p>Jeśli <code>hcitool</code> nie jest w stanie wykryć żadnych urządzeń, oznacza to, że adapter w komputerze jest
w jakiś sposób uszkodzony. Jeśli zaś cześć urządzeń jest wykrywana poprawnie ale brakuje tego
naszego na liście, to oznacza, że prawdopodobnie to urządzenie ma uszkodzony moduł bluetooth.
Oczywiście przy założeniu, że oba sprzęty są poprawnie skonfigurowane do pracy.</p>
<p>Mając adres MAC smartfona, możemy teraz przeszukać jego serwer SDP pod kątem usług:</p>
<pre><code>$ sdptool browse 40:3F:8C:02:41:AD
Browsing 40:3F:8C:02:41:AD ...
Service RecHandle: 0x10001
Service Class ID List:
  &quot;Generic Access&quot; (0x1800)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 31
  &quot;ATT&quot; (0x0007)
    uint16: 0x0001
    uint16: 0x0005

Service Name: Headset Audio Gateway
Service RecHandle: 0x10002
Service Class ID List:
  &quot;Headset Audio Gateway&quot; (0x1112)
  &quot;Generic Audio&quot; (0x1203)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 1
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Headset&quot; (0x1108)
    Version: 0x0102

Service Name: Handsfree Audio Gateway
Service RecHandle: 0x10003
Service Class ID List:
  &quot;Handsfree Audio Gateway&quot; (0x111f)
  &quot;Generic Audio&quot; (0x1203)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 2
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Handsfree&quot; (0x111e)
    Version: 0x0106

Service Name: Network Access Point Service
Service Description: Bluetooth NAP Service
Service RecHandle: 0x10004
Service Class ID List:
  &quot;Network Access Point&quot; (0x1116)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 15
  &quot;BNEP&quot; (0x000f)
    Version: 0x0100
    SEQ8: 0 6
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Network Access Point&quot; (0x1116)
    Version: 0x0100

Service RecHandle: 0x10006
Service Class ID List:
  &quot;AV Remote Target&quot; (0x110c)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0100
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0103

Service RecHandle: 0x10007
Service Class ID List:
  &quot;AV Remote Controller&quot; (0x110f)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0100
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0100

Service Name: Advanced Audio
Service RecHandle: 0x10008
Service Class ID List:
  &quot;Audio Source&quot; (0x110a)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 25
  &quot;AVDTP&quot; (0x0019)
    uint16: 0x0102
Profile Descriptor List:
  &quot;Advanced Audio&quot; (0x110d)
    Version: 0x0102

Service Name: 000eSMS/MMS
Service RecHandle: 0x10009
Service Class ID List:
  &quot;Message Access - MAS&quot; (0x1132)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 23
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;Message Access&quot; (0x1134)
    Version: 0x0101

Service Name: OBEX Phonebook Access Server
Service RecHandle: 0x1000a
Service Class ID List:
  &quot;Phonebook Access - PSE&quot; (0x112f)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 24
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;Phonebook Access&quot; (0x1130)
    Version: 0x0101

Service Name: OBEX Object Push
Service RecHandle: 0x1000b
Service Class ID List:
  &quot;OBEX Object Push&quot; (0x1105)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 25
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;OBEX Object Push&quot; (0x1105)
    Version: 0x0100
</code></pre>
<h3 id="narzędzie-ussp-push">Narzędzie ussp-push</h3>
<p>Mamy tutaj min. <code>OBEX Object Push</code> . Możemy zatem przesłać plik na smartfon. Musimy tylko zanotować
sobie kanał, który przy tej pozycji jest uwzględniony, tj. <code>Channel: 25</code> . Polecenie, które prześle
plik z komputera na telefon będzie miało zatem poniższą postać:</p>
<pre><code>$ ussp-push 40:3F:8C:02:41:AD@25 plik_z_kompa plik_na_smartfonie
</code></pre>
<h3 id="narzędzie-obexpushd">Narzędzie obexpushd</h3>
<p>Jeśli zaś chodzi o przesyłanie plików ze smartfona na komputer, to możemy skorzystać z poniższego
polecenia:</p>
<pre><code>$ obexpushd -o ~/bluetooth/
</code></pre>
<p>Ta komenda uruchamiana demona, który nasłuchuje zapytań. Pliki odbierane ze smartfona będą
przesyłane do katalogu <code>~/bluetooth/</code> .</p>
<h3 id="obex-ftp-i-bluetooth-file-transfer">OBEX FTP i Bluetooth File Transfer</h3>
<p>Alternatywnym podejściem do przesyłania plików przez bluetooth jest zamontowanie systemu plików
telefonu lokalnie i operowanie na nim jak na zwyczajnym systemie plików. Niemniej jednak, taki
zabieg wymaga doinstalowania odpowiedniego oprogramowania na smartfonie. Wyżej w listingu usług
zwróconych przez <code>sdptool browse</code> mieliśmy co prawda dwie pozycje od OBEX'a ale żadna z nich nie
zawierała frazy FTP. Z pobieżnego rozeznania wyśledziłem aplikację <a href="https://play.google.com/store/apps/details?id=it.medieval.blueftp">Bluetooth File
Transfer</a>. Jej zainstalowanie w
Androidzie uaktywni usługę OBEX FTP:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/016.linux-debian-bluetooth-smartfon-file-transfer.png" alt="linux-debian-bluetooth-smartfon-file-transfer"    class="huge"></p>
<p>Po uruchomieniu tej aplikacji, na dole powinna pojawić się poniższa informacja:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/017.linux-debian-bluetooth-smartfon-file-transfer.png" alt="linux-debian-bluetooth-smartfon-file-transfer"    class="medium"></p>
<p>Zatem OBEX FTP został uruchomiony. Sprawdźmy czy faktycznie tak jest przez odpytanie serwera SDP na
smartfonie:</p>
<pre><code>$ sdptool browse 40:3F:8C:02:41:AD
Browsing 40:3F:8C:02:41:AD ...
Service RecHandle: 0x10001
Service Class ID List:
  &quot;Generic Access&quot; (0x1800)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 31
  &quot;ATT&quot; (0x0007)
    uint16: 0x0001
    uint16: 0x0005

Service Name: Headset Audio Gateway
Service RecHandle: 0x10002
Service Class ID List:
  &quot;Headset Audio Gateway&quot; (0x1112)
  &quot;Generic Audio&quot; (0x1203)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 1
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Headset&quot; (0x1108)
    Version: 0x0102

Service Name: Handsfree Audio Gateway
Service RecHandle: 0x10003
Service Class ID List:
  &quot;Handsfree Audio Gateway&quot; (0x111f)
  &quot;Generic Audio&quot; (0x1203)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 2
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Handsfree&quot; (0x111e)
    Version: 0x0106

Service Name: Network Access Point Service
Service Description: Bluetooth NAP Service
Service RecHandle: 0x10004
Service Class ID List:
  &quot;Network Access Point&quot; (0x1116)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 15
  &quot;BNEP&quot; (0x000f)
    Version: 0x0100
    SEQ8: 0 6
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  &quot;Network Access Point&quot; (0x1116)
    Version: 0x0100

Service RecHandle: 0x10006
Service Class ID List:
  &quot;AV Remote Target&quot; (0x110c)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0100
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0103

Service RecHandle: 0x10007
Service Class ID List:
  &quot;AV Remote Controller&quot; (0x110f)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 23
  &quot;AVCTP&quot; (0x0017)
    uint16: 0x0100
Profile Descriptor List:
  &quot;AV Remote&quot; (0x110e)
    Version: 0x0100

Service Name: Advanced Audio
Service RecHandle: 0x10008
Service Class ID List:
  &quot;Audio Source&quot; (0x110a)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
    PSM: 25
  &quot;AVDTP&quot; (0x0019)
    uint16: 0x0102
Profile Descriptor List:
  &quot;Advanced Audio&quot; (0x110d)
    Version: 0x0102

Service Name: 000eSMS/MMS
Service RecHandle: 0x10009
Service Class ID List:
  &quot;Message Access - MAS&quot; (0x1132)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 23
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;Message Access&quot; (0x1134)
    Version: 0x0101

Service Name: OBEX OPP
Service RecHandle: 0x1000a
Service Class ID List:
  &quot;OBEX Object Push&quot; (0x1105)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 24
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;OBEX Object Push&quot; (0x1105)
    Version: 0x0100

Service Name: OBEX FTP
Service RecHandle: 0x1000b
Service Class ID List:
  UUID 128: 00001106-0000-1000-8000-00805f9b34fb
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 25

Service Name: OBEX Phonebook Access Server
Service RecHandle: 0x1000c
Service Class ID List:
  &quot;Phonebook Access - PSE&quot; (0x112f)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 26
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;Phonebook Access&quot; (0x1130)
    Version: 0x0101

Service Name: OBEX Object Push
Service RecHandle: 0x1000d
Service Class ID List:
  &quot;OBEX Object Push&quot; (0x1105)
Protocol Descriptor List:
  &quot;L2CAP&quot; (0x0100)
  &quot;RFCOMM&quot; (0x0003)
    Channel: 27
  &quot;OBEX&quot; (0x0008)
Profile Descriptor List:
  &quot;OBEX Object Push&quot; (0x1105)
    Version: 0x0100
</code></pre>
<p>I tutaj już widzimy, że poza tymi wcześniejszymi <code>OBEX Object Push</code> i <code>OBEX Phonebook Access Server</code>
doszły nam również <code>OBEX OPP</code> i <code>OBEX FTP</code> . Ten ostatni ma kanał <code>Channel: 25</code> . Zapamiętujemy
sobie tę wartość i łączymy się z telefonem w poniższy sposób:</p>
<pre><code>$ obexfs -b 40:3F:8C:02:41:AD -B 25 ~/bluetooth/
</code></pre>
<p>Udostępniany katalog na smartfonie powinien nam się zamontować we wskazanym wyżej miejscu:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/11/018.linux-debian-bluetooth-smartfon-obex.png" alt="linux-debian-bluetooth-smartfon-obex"    class="huge"></p>
<p>Ten katalog można oczywiście sobie dostosować w opcjach aplikacji na smartfonie. Można również
autoryzować każde podłączenie. Generalnie, to polecam zajrzenie w opcje aplikacji Bluetooth File
Transfer.</p>
<p>By ten katalog odmontować, korzystamy z <code>fusermount</code> :</p>
<pre><code>$ fusermount -u ~/bluetooth
</code></pre></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/pulseaudio/">pulseaudio</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/dzwiek/">dźwięk</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/bluetooth/">bluetooth</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/smartfon/">smartfon</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&amp;text=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&amp;title=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&amp;title=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&title=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&amp;title=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzesylanie-dzwieku-plikow-ze-smartfona-bluetooth%2f&description=Przesy%c5%82anie%20d%c5%bawi%c4%99ku%20i%20plik%c3%b3w%20ze%20smartfona%20przez%20bluetooth" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-serwera-dzwieku-pulseaudio/">Konfiguracja serwera dźwięku PulseAudio</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/pulseaudio-i-przesylanie-dzwieku-przez-siec/">PulseAudio i przesyłanie dźwięku przez sieć</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/android-jak-zainstalowac-adb-i-fastboot-pod-linux/">Android: Jak zainstalować ADB i fastboot pod linux</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-przeniesc-kontakty-telefon-smartfon/">Jak przenieść kontakty ze starego telefonu do smartfona</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/smartfon-android-linux-mtp-ptp/">Smartfon z Androidem pod linux&#39;em (MTP/PTP)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/szyfrowanie-dzwieku-przesylanego-przez-siec/">Szyfrowanie dźwięku przesyłanego przez sieć</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/brak-dzwieku-przy-nieaktywnej-sesji-logowania/">Brak dźwięku przy nieaktywnej sesji logowania</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script src="https://utteranc.es/client.js"
        repo="morfikov/morfitronik-comments"
        issue-term="og:title"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2024 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
const images = Array.from(document.querySelectorAll(".entry__content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'
  });
});
</script>
</body>
</html>

<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Przeciek DNS (DNS leak) w VPN (resolvconf) | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Przeciek DNS (DNS leak) w VPN (resolvconf)" />
<meta property="og:description" content="Przeciek DNS (dns leak) to nic innego jak wyciek
poufnej informacji, za sprawą nieprawidłowej konfiguracji resolver&#39;a DNS. Może niekoniecznie jest
winne tutaj samo oprogramowanie, które realizuje zapytania DNS, czy też serwer domen jakiejś
organizacji. Chodzi głównie o tematykę VPN,
gdzie cały ruch sieciowy powinien być wrzucany do tunelu SSL/TLS i szyfrowany. W pewnych sytuacjach,
zapytania DNS mogą zostać wysyłane pod zewnętrzny resolver, często w formie niezaszyfrowanej i do
tego poza połączeniem VPN. Ten ruch można podsłuchać, przechwycić i poddać analizie. Celem tego
artykułu jest tak skonfigurowanie linux&#39;a (w tym przypadku dystrybucja Debian), by te przecieki
wyeliminować. Jest to możliwe za sprawą narzędzia resolvconf." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/przeciek-dns-dns-leak-w-vpn-resolvconf/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-04-25T14:37:51+00:00" />
<meta property="article:modified_time" content="2016-04-25T14:37:51+00:00" />


		<meta itemprop="name" content="Przeciek DNS (DNS leak) w VPN (resolvconf)">
<meta itemprop="description" content="Przeciek DNS (dns leak) to nic innego jak wyciek
poufnej informacji, za sprawą nieprawidłowej konfiguracji resolver&#39;a DNS. Może niekoniecznie jest
winne tutaj samo oprogramowanie, które realizuje zapytania DNS, czy też serwer domen jakiejś
organizacji. Chodzi głównie o tematykę VPN,
gdzie cały ruch sieciowy powinien być wrzucany do tunelu SSL/TLS i szyfrowany. W pewnych sytuacjach,
zapytania DNS mogą zostać wysyłane pod zewnętrzny resolver, często w formie niezaszyfrowanej i do
tego poza połączeniem VPN. Ten ruch można podsłuchać, przechwycić i poddać analizie. Celem tego
artykułu jest tak skonfigurowanie linux&#39;a (w tym przypadku dystrybucja Debian), by te przecieki
wyeliminować. Jest to możliwe za sprawą narzędzia resolvconf."><meta itemprop="datePublished" content="2016-04-25T14:37:51+00:00" />
<meta itemprop="dateModified" content="2016-04-25T14:37:51+00:00" />
<meta itemprop="wordCount" content="1414">
<meta itemprop="keywords" content="debian,vpn,prywatność,sieć,dns,resolver," />
		<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Przeciek DNS (DNS leak) w VPN (resolvconf)"/>
<meta name="twitter:description" content="Przeciek DNS (dns leak) to nic innego jak wyciek
poufnej informacji, za sprawą nieprawidłowej konfiguracji resolver&#39;a DNS. Może niekoniecznie jest
winne tutaj samo oprogramowanie, które realizuje zapytania DNS, czy też serwer domen jakiejś
organizacji. Chodzi głównie o tematykę VPN,
gdzie cały ruch sieciowy powinien być wrzucany do tunelu SSL/TLS i szyfrowany. W pewnych sytuacjach,
zapytania DNS mogą zostać wysyłane pod zewnętrzny resolver, często w formie niezaszyfrowanej i do
tego poza połączeniem VPN. Ten ruch można podsłuchać, przechwycić i poddać analizie. Celem tego
artykułu jest tak skonfigurowanie linux&#39;a (w tym przypadku dystrybucja Debian), by te przecieki
wyeliminować. Jest to możliwe za sprawą narzędzia resolvconf."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Przeciek DNS (DNS leak) w VPN (resolvconf)</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2016-04-25T14:37:51Z">Opublikowano: 25/04/2016</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Przeciek DNS (DNS leak) w VPN (resolvconf)</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#realizowanie-zapytań-dns-w-linuxie">Realizowanie zapytań DNS w linux'ie</a></li>
    <li><a href="#eliminowanie-dns-leak-za-sprawą-resolvconf">Eliminowanie DNS leak za sprawą resolvconf</a></li>
    <li><a href="#dodatkowe-zabezpieczenia-przed-dns-leak">Dodatkowe zabezpieczenia przed DNS leak</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p><a href="https://dnsleaktest.com/what-is-a-dns-leak.html">Przeciek DNS (dns leak)</a> to nic innego jak wyciek
poufnej informacji, za sprawą nieprawidłowej konfiguracji resolver'a DNS. Może niekoniecznie jest
winne tutaj samo oprogramowanie, które realizuje zapytania DNS, czy też serwer domen jakiejś
organizacji. Chodzi głównie o tematykę <a href="https://pl.wikipedia.org/wiki/Virtual_Private_Network">VPN</a>,
gdzie cały ruch sieciowy powinien być wrzucany do tunelu SSL/TLS i szyfrowany. W pewnych sytuacjach,
zapytania DNS mogą zostać wysyłane pod zewnętrzny resolver, często w formie niezaszyfrowanej i do
tego poza połączeniem VPN. Ten ruch można podsłuchać, przechwycić i poddać analizie. Celem tego
artykułu jest tak skonfigurowanie linux'a (w tym przypadku dystrybucja Debian), by te przecieki
wyeliminować. Jest to możliwe za sprawą narzędzia <code>resolvconf</code>.</p>
<h2 id="realizowanie-zapytań-dns-w-linuxie">Realizowanie zapytań DNS w linux'ie</h2>
<p>Linux'y standardowo nie posiadają żadnego oprogramowania, które cache'uje zapytania DNS w celu
szybszego zwracania wyników, tak jak to robi, np. windows. Tutaj trzeba świadomie sobie taką usługę
zainstalować i skonfigurować. W przeciwnym wypadku zapytania będą przesyłane bezpośrednio do
upstream'owego serwera DNS. Adresy takiego serwera domen są pobierane zwykle z lease DHCP, którą
nasz system otrzymuje od serwera DHCP providera internetowego. Następnie ten wpis jest przetwarzany
i adres serwera DNS wędruje do pliku <code>/etc/resolv.conf</code> . Większość aplikacji internetowych przy
rozwiązywaniu domen odpytuje adres IP, który w tym pliku się znajduje. Oczywiście w pliku
<code>/etc/resolv.conf</code> może się znajdować kilka adresów (maksymalnie 3). W takim przypadku, jeśli system
nie będzie w stanie się skontaktować z pierwszym adresem, automatycznie odpyta drugi i trzeci w
kolejności, w której występują w tym pliku. Domyślny przedział czasu między przejściem do kolejnego
serwera nazw w przypadku braku odpowiedzi to 30 sekund.</p>
<p>Załóżmy teraz na moment, że skonfigurowaliśmy sobie połączenie VPN. Niemniej jednak, zapomnieliśmy
przepisać plik <code>/etc/resolv.conf</code> . W lease otrzymanej z serwera DHCP był zawarty wpis z serwerem
DNS o adresie 192.168.3.1 . W taki sposób, wszystkie zapytania o domeny zostaną przesłane do tego
lokalnego serwera DNS bezpośrednio. Dzieje się tak dlatego, że ten adres pochodzi z sieci, do której
jesteśmy fizycznie podłączeni. W oparciu o tablicę routingu, system wie gdzie przesyłać zapytania w
zależności od docelowych adresów IP. Wszystkie nielokalne zapytania są kierowana na bramę domyślną.
Zatem jeśli chcemy się połączyć ze zdalnym serwerem, który nie należy do naszej sieci lokalnej, to
zapytania powędrują przez VPN. Natomiast ruch DNS zostanie przesłany bezpośrednio do lokalnego
serwera DNS i tu właśnie doświadczymy DNS leak. Poniżej przykład z wireshark'a. Z lewej strony mamy
interfejs <code>tun0</code> . Po prawej zaś jest fizyczny interfejs <code>eth0</code> :</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/04/1.dns-leak-lokalny-serwer-isp.png" alt="dns-leak-lokalny-serwer-isp"    class="huge"></p>
<p>Trzeba wyraźnie zaznaczyć, że ten problem dotyczy jedynie lokalnych serwerów DNS, które zwykle są
implementowane w domowych routerach WiFi. Po części też taki DNS leak może wystąpić w przypadku
serwerów DNS od ISP ale to tylko wtedy, gdy ISP korzysta z prywatnych bloków adresowych, tj
10.0.0.0/8 czy 192.168.0.0/16 . W przypadku globalnych providerów DNS, takich jak google, czy
OpenDNS, DNS leak nie występuje. Poniżej przykład:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/04/2.brak-dns-leak-google-serwer.png" alt="brak-dns-leak-google-serwer"    class="huge"></p>
<p>Dzieje się tak dlatego, że adres IP 8.8.8.8 nie jest lokalny i zapytania do tego serwera muszą
zostać przesłane przez bramę domyślną, tj. wrzucone w szyfrowany tunel, którym powędrują do VPN.
VPN otrzyma takie żądanie DNS i prześle je w naszym imieniu do serwera DNS google. Następnie otrzyma
od niego odpowiedź, którą prześle nam z powrotem. W efekcie cały ruch między nami i VPN jest
szyfrowany. W ten sposób nikt nie jest w stanie podsłuchać zapytań DNS, które zostały przesłane do
VPN i to mimo faktu, że korzystamy z zewnętrznego serwera DNS.</p>
<p>Mając na uwadze powyższe informacje, możemy zrobić dwie rzeczy. Możemy wymusić korzystanie z
lokalnego serwera DNS, np. w oparciu o oprogramowanie
<a href="https://morfikov.github.io/post/cache-dns-buforowania-zapytan/">dnsmasq</a> +
<a href="https://morfikov.github.io/post/dnscrypt-proxy-czyli-szyfrowanie-zapytan-dns/">dnscrypt-proxy</a>. Zaowocuje to
tym, że wszystkie zapytania DNS będą przesyłane na adres 127.0.0.1, następnie szyfrowane, po czym
przesyłane, np. do OpenDNS. Ten setup jest niezależny od providera internetowego i konfiguracji
sieciowej.</p>
<p>Z kolei, jeśli konfiguracja hosta w sieci lokalnej odbywa się za sprawą protokołu DHCP i nie chce
nam się korzystać z tego powyższego rozwiązania, to musimy w pliku <code>/etc/resolv.conf</code> zawrzeć adres
DNS dostarczany przez VPN. Zwykle taki adres może zostać odczytany z logu podczas nawiązywania
połączenia. Poniżej przykład:</p>
<pre><code>ovpn-riseup[38262]: [vpn.riseup.net] Peer Connection Initiated with [AF_INET]198.252.153.226:1194
ovpn-riseup[38262]: SENT CONTROL [vpn.riseup.net]: 'PUSH_REQUEST' (status=1)
ovpn-riseup[38262]: PUSH: Received control message: 'PUSH_REPLY,redirect-gateway def1,dhcp-option DNS 172.27.100.1,
route-gateway 172.27.100.1,topology subnet,ping 7,ping-restart 35,socket-flags TCP_NODELAY,ifconfig 172.27.100.7 255.255.252.0'
</code></pre>
<p>Adres serwera DNS dla tego VPN, to <code>172.27.100.1</code> . Moglibyśmy ręcznie uzupełniać plik
<code>/etc/resolv.conf</code> tak, by wskazywał na ten adres ilekroć tylko łączymy się via VPN ale takie
rozwiązanie ma dwie wady. Po pierwsze, wymagana jest nasza ingerencja za każdym razem, gdy będziemy
nawiązywać połączenie, a po drugie, zawsze możemy zapomnieć to zrobić. W takim przypadku dużo lepiej
jest zaprzęgnąć do pracy narzędzie <code>resolvconf</code> , które cały ten proces przepisywania pliku
<code>/etc/resolv.conf</code> ogarnie za nas.</p>
<h2 id="eliminowanie-dns-leak-za-sprawą-resolvconf">Eliminowanie DNS leak za sprawą resolvconf</h2>
<p>W Debianie standardowo mamy dostępny pakiet o nazwie <code>resolvconf</code> . Z jego instalacją nie powinno
być problemu ale trzeba powiedzieć kilka słów na temat konfiguracji tego narzędzia. Przede
wszystkim, z tym pakietem jest dostarczany szereg plików. Nas interesuje głównie katalog
<code>/etc/resolvconf/</code> , a w szczególności plik <code>interface-order</code> . W oparciu o ten plik, system wie w
jakiej kolejności wpisać adresy serwerów DNS do pliku <code>/etc/resolv.conf</code> . Interfejsy wirtualne,
takie jak <code>tun*</code> czy <code>tap*</code> , są w tym pliku wyżej niż standardowe interfejsy fizyczne. Zatem jeśli
zostanie zarejestrowany serwer DNS dla tych interfejsów, to zostaną one umieszczone wyżej w pliku
<code>/etc/resolv.conf</code> . Pamiętajmy, że standardowo wszystkie zapytania DNS zostaną przesłane pod
pierwszy adres IP w tym pliku. W przypadku odpalenia VPN, będzie to adres serwera DNS dostarczany
przez VPN, a w każdym innym wypadku, będzie to standardowa konfiguracja resolver'a dla naszego
systemu.</p>
<p>By <code>resolvconf</code> spełniał swoje zadanie w przypadku VPN, musimy dodatkowo stworzyć <a href="https://github.com/masterkorp/openvpn-update-resolv-conf">skrypt
update-resolv-conf.sh</a> , który będzie
wykonywany przy podnoszeniu i ubijaniu połączenia. Niestety zawiera on błędną opcję <code>-x</code> przy
wywołaniu <code>resolvconf</code> . Dlatego, by ten skrypt działał prawidłowo trzeba tę opcję usunąć z
poniższej linijki:</p>
<pre><code>echo -n &quot;$R&quot; | $RESOLVCONF -a &quot;${dev}.inet&quot;
</code></pre>
<p>Skrypt zapisujemy w katalogu <code>/etc/openvpn/</code> i nadajemy mu prawa wykonywania. Następnie edytujemy
konfigurację połączenia VPN i dodajemy do niej te poniższe linijki:</p>
<pre><code>script-security 2
up /etc/openvpn/update-resolv-conf.sh
down /etc/openvpn/update-resolv-conf.sh
</code></pre>
<p>Możemy teraz przetestować połączenie. Jeśli plik <code>/etc/resolv.conf</code> zostanie przepisany do mniej
więcej poniższej postaci:</p>
<pre><code>$ cat /etc/resolv.conf
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 172.27.100.1
nameserver 192.168.3.1
</code></pre>
<p>To oznacza, że mechanizm działa prawidłowo i zapytania DNS są kierowane do serwera DNS otrzymanego
od VPN. Możemy także zweryfikować połączenie pod kątem DNS leak zapuszczając ponownie wireshark'a na
interfejsach <code>eth0</code> i <code>tun0</code> . Poniżej przykład:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/04/3.brak-dns-leak-serwer-vpn.png" alt="brak-dns-leak-serwer-vpn"    class="huge"></p>
<h2 id="dodatkowe-zabezpieczenia-przed-dns-leak">Dodatkowe zabezpieczenia przed DNS leak</h2>
<p>Dodatkowym zabezpieczeniem, które ochroni nas przed DNS leak jest zapora sieciowa. Przy pomocy
<code>iptables</code> jesteśmy w stanie zablokować pakiety, które są przeznaczone na port 53. Chcielibyśmy
raczej też, by taka blokada dotyczyła serwerów DNS innych niż te od VPN. No i też raczej nie będzie
nam się chciało pisać odpowiednich regułek ręcznie za każdym razem, gdy nawiązujemy połączenie przez
VPN. Jak zatem zrealizować takie zadanie? Możemy posłużyć się skryptem
<code>/etc/openvpn/update-resolv-conf.sh</code> . Trzeba go tylko uzupełnić o odpowiedni kod.</p>
<p>Skrypt jest wywoływany przy zestawianiu połączenia i przy jego niszczeniu. Są tam dwa przypadki:
<code>up</code> i <code>down</code> . W <code>up</code> na końcu dopisujemy ten poniższy blok kodu:</p>
<pre><code>  $IPT -N openvpn
  $IPT -I OUTPUT 1 -p tcp --dport 53 -j openvpn
  $IPT -I OUTPUT 1 -p udp --dport 53 -j openvpn
  $IPT -A openvpn -p tcp -o lo -j ACCEPT
  $IPT -A openvpn -p udp -o lo -j ACCEPT
  for NS in $IF_DNS_NAMESERVERS ; do
    $IPT -A openvpn -p tcp -o ${dev} -d $NS -j ACCEPT
    $IPT -A openvpn -p udp -o ${dev} -d $NS -j ACCEPT
  done
  $IPT -A openvpn -p udp -j DROP
  $IPT -A openvpn -p tcp -j DROP
</code></pre>
<p>Ma on za zadanie stworzyć nowy łańcuch <code>openvpn</code> , przekierować do niego ruch kierowany na port <code>53</code>
oraz umieścić w nim szereg reguł. Zezwalamy w ten sposób na rozwiązywanie domen z interfejsu <code>lo</code>
oraz interfejsu VPN, w tym przypadku <code>tun0</code> ale tylko, gdy te zapytania są kierowane do serwera DNS
od VPN. Każde inne zapytanie DNS będzie blokowane przez dwie ostatnie reguły.</p>
<p>W przypadku <code>down</code> musimy dopisać na końcu ten poniższy kod:</p>
<pre><code>  if [ ! -z &quot;$foreign_option_1&quot; ] || [ ! -z &quot;$foreign_option_2&quot; ] ; then
	$IPT -D OUTPUT -p tcp --dport 53 -j openvpn
	$IPT -D OUTPUT -p udp --dport 53 -j openvpn
	$IPT -F openvpn
	$IPT -X openvpn
  fi
</code></pre>
<p>Sprawdza on czy zmienne, w których są przechowywane adresy serwerów DNS, są puste. Jeśli któraś z
nich nie jest, oznacza to, że VPN dysponuje serwerami DNS. W takim przypadku należy usunąć
przekierowanie do łańcucha <code>openvpn</code> , wyczyścić go z reguł, a następnie usunąć sam łańcuch.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/vpn/">vpn</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/prywatnosc/">prywatność</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/siec/">sieć</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/dns/">dns</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/resolver/">resolver</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&amp;text=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&amp;title=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&amp;title=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&title=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&amp;title=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fprzeciek-dns-dns-leak-w-vpn-resolvconf%2f&description=Przeciek%20DNS%20%28DNS%20leak%29%20w%20VPN%20%28resolvconf%29" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/riseup-vpn-na-strazy-prywatnosci/">Riseup VPN na straży prywatności</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/aero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy/">Aero2 w połączeniu z dnsmasq i dnscrypt-proxy</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/dnscrypt-proxy-czyli-szyfrowanie-zapytan-dns/">DNScrypt-proxy, czyli szyfrowanie zapytań DNS</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-dnscrypt-proxy-w-openwrt/">Konfiguracja dnscrypt-proxy w OpenWRT</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/wvdial-ppp-czyli-modem-lte-w-trybie-ras/">Wvdial i PPP, czyli modem LTE w trybie RAS</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-modemu-lte-w-trybie-ndis-ncm/">Konfiguracja modemu LTE w trybie NDIS (NCM)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/darmowy-internet-lte-od-rbmplay/">Darmowy internet LTE od RBM (Play)</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script src="https://utteranc.es/client.js"
        repo="morfikov/morfitronik-comments"
        issue-term="og:title"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2024 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
const images = Array.from(document.querySelectorAll(".entry__content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'
  });
});
</script>
</body>
</html>

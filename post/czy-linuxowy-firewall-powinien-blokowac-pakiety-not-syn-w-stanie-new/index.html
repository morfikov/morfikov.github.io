<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW" />
<meta property="og:description" content="Od czasu do czasu w logu systemowym mojego Debiana można zanotować szereg pakietów przychodzących,
które są zrzucane przez linux&#39;owy firewall (nftables/iptables ). Po krótkiej analizie okazało
się, że są to pakiety protokołu TCP mające stan NEW (czyli są to nowe połączenia) ale
niezawierające przy tym flagi SYN . Mój laptop nie ma aktualnie przydzielonego zewnętrznego
routowalnego adresu IPv4/IPv6, więc nasunęło się pytanie o przyczynę takiego stanu
rzeczy -- przecie będąc za NAT, nikt spoza sieci nie powinien być w stanie nawiązać połączenia z
moją maszyną, a ewidentnie co się do jej bram dobija i to nie z adresu lokalnego. Niby mam też
odfiltrowane pakiety w stanie INVALID (np. te mające niepoprawny zestaw flag) ale widać te
pakiety, o których mowa, nie zaliczają się do tego stanu, więc wygląda na to, że wszystko z nimi
jest w porządku. Czy tego typu pakiety TCP w stanie NEW niemające ustawionej flagi SYN
stanowią jakieś zagrożenie dla naszego komputera? Czy powinno się je zablokować, a może przepuścić
w filtrze pakietów? A jeśli zablokować, to czy zwykły DROP wystarczy czy może powinno się te
pakiety potraktować przy pomocy REJECT ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/czy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-03-15T18:02:21&#43;00:00" />
<meta property="article:modified_time" content="2019-03-15T18:02:21&#43;00:00" />


		<meta itemprop="name" content="Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW">
<meta itemprop="description" content="Od czasu do czasu w logu systemowym mojego Debiana można zanotować szereg pakietów przychodzących,
które są zrzucane przez linux&#39;owy firewall (nftables/iptables ). Po krótkiej analizie okazało
się, że są to pakiety protokołu TCP mające stan NEW (czyli są to nowe połączenia) ale
niezawierające przy tym flagi SYN . Mój laptop nie ma aktualnie przydzielonego zewnętrznego
routowalnego adresu IPv4/IPv6, więc nasunęło się pytanie o przyczynę takiego stanu
rzeczy -- przecie będąc za NAT, nikt spoza sieci nie powinien być w stanie nawiązać połączenia z
moją maszyną, a ewidentnie co się do jej bram dobija i to nie z adresu lokalnego. Niby mam też
odfiltrowane pakiety w stanie INVALID (np. te mające niepoprawny zestaw flag) ale widać te
pakiety, o których mowa, nie zaliczają się do tego stanu, więc wygląda na to, że wszystko z nimi
jest w porządku. Czy tego typu pakiety TCP w stanie NEW niemające ustawionej flagi SYN
stanowią jakieś zagrożenie dla naszego komputera? Czy powinno się je zablokować, a może przepuścić
w filtrze pakietów? A jeśli zablokować, to czy zwykły DROP wystarczy czy może powinno się te
pakiety potraktować przy pomocy REJECT ?"><meta itemprop="datePublished" content="2019-03-15T18:02:21&#43;00:00" />
<meta itemprop="dateModified" content="2019-03-15T18:02:21&#43;00:00" />
<meta itemprop="wordCount" content="1075">
<meta itemprop="keywords" content="debian,nftables,iptables," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW"/>
<meta name="twitter:description" content="Od czasu do czasu w logu systemowym mojego Debiana można zanotować szereg pakietów przychodzących,
które są zrzucane przez linux&#39;owy firewall (nftables/iptables ). Po krótkiej analizie okazało
się, że są to pakiety protokołu TCP mające stan NEW (czyli są to nowe połączenia) ale
niezawierające przy tym flagi SYN . Mój laptop nie ma aktualnie przydzielonego zewnętrznego
routowalnego adresu IPv4/IPv6, więc nasunęło się pytanie o przyczynę takiego stanu
rzeczy -- przecie będąc za NAT, nikt spoza sieci nie powinien być w stanie nawiązać połączenia z
moją maszyną, a ewidentnie co się do jej bram dobija i to nie z adresu lokalnego. Niby mam też
odfiltrowane pakiety w stanie INVALID (np. te mające niepoprawny zestaw flag) ale widać te
pakiety, o których mowa, nie zaliczają się do tego stanu, więc wygląda na to, że wszystko z nimi
jest w porządku. Czy tego typu pakiety TCP w stanie NEW niemające ustawionej flagi SYN
stanowią jakieś zagrożenie dla naszego komputera? Czy powinno się je zablokować, a może przepuścić
w filtrze pakietów? A jeśli zablokować, to czy zwykły DROP wystarczy czy może powinno się te
pakiety potraktować przy pomocy REJECT ?"/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2019-03-15T18:02:21Z">Opublikowano: 15/03/2019</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Czy linux&#39;owy firewall powinien blokować pakiety not-syn w stanie NEW</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#dlaczego-pakiet-not-syn-w-stanie-new-nie-zalicza-się-do-invalid">Dlaczego pakiet not-SYN w stanie NEW nie zalicza się do INVALID</a>
      <ol>
        <li><a href="#czy-pakiety-not-syn-w-stanie-new-mogą-być-groźne">Czy pakiety not-SYN w stanie NEW mogą być groźne</a></li>
      </ol>
    </li>
    <li><a href="#drop-czy-reject-dla-pakietów-not-syn-w-stanie-new">DROP czy REJECT dla pakietów not-SYN w stanie NEW</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Od czasu do czasu w logu systemowym mojego Debiana można zanotować szereg pakietów przychodzących,
które są zrzucane przez linux'owy firewall (<code>nftables</code>/<code>iptables</code> ). Po krótkiej analizie okazało
się, że są to pakiety protokołu TCP mające stan <code>NEW</code> (czyli są to nowe połączenia) ale
niezawierające przy tym flagi <code>SYN</code> . Mój laptop nie ma aktualnie przydzielonego zewnętrznego
routowalnego adresu IPv4/IPv6, więc nasunęło się pytanie o przyczynę takiego stanu
rzeczy -- przecie będąc za NAT, nikt spoza sieci nie powinien być w stanie nawiązać połączenia z
moją maszyną, a ewidentnie co się do jej bram dobija i to nie z adresu lokalnego. Niby mam też
odfiltrowane pakiety w stanie <code>INVALID</code> (np. te mające niepoprawny zestaw flag) ale widać te
pakiety, o których mowa, nie zaliczają się do tego stanu, więc wygląda na to, że wszystko z nimi
jest w porządku. Czy tego typu pakiety TCP w stanie <code>NEW</code> niemające ustawionej flagi <code>SYN</code>
stanowią jakieś zagrożenie dla naszego komputera? Czy powinno się je zablokować, a może przepuścić
w filtrze pakietów? A jeśli zablokować, to czy zwykły <code>DROP</code> wystarczy czy może powinno się te
pakiety potraktować przy pomocy <code>REJECT</code> ?</p>
<h2 id="dlaczego-pakiet-not-syn-w-stanie-new-nie-zalicza-się-do-invalid">Dlaczego pakiet not-SYN w stanie NEW nie zalicza się do INVALID</h2>
<p>Wydawać by się mogło, że wszystkie pakiety w protokole TCP ustanawiające nowe połączenia powinny
zawierać flagę <code>SYN</code> , która ma na celu zsynchronizować końcówki połączenia w celu wymiany danych.
Dlaczego zatem stan <code>INVALID</code> nie jest przypisany do pakietu <code>not-SYN</code> w stanie <code>NEW</code> ? Okazuje
się, że tego typu sytuacja jest notowana nawet dość często i nie jest ona niczym niezwykłym w ruchu
sieciowym. Istnieje bowiem szereg przyczyn, które mogą taki stan rzeczy zainicjować i nie wszystkie
z nich mają na celu zaatakowanie naszej maszyny.</p>
<p>Przykładem sytuacji, w której pakiet <code>non-SYN</code> w stanie <code>NEW</code> może się pojawić, jest choćby zmiana
adresu IP. Jeśli mamy przydzielony dynamiczny adres IP, lub też korzystamy z usług ISP, u którego
jest spora rotacja klientów (np. operatorzy GSM), to może się zdarzyć tak, że po podniesieniu
interfejsu sieciowego zostanie nam przydzielony inny adres IP w stosunku do tego, który mieliśmy
przypisany przed opuszczeniem tego interfejsu. Ten nasz nowy adres będący wcześniej w innych
łapkach mógł nawiązać jakieś połączenia ze zdalnym serwerem. W międzyczasie ten adres IP został
przydzielony nam, a serwer nie jest świadom tego całego zdarzenia. Jeśli teraz dodamy do tego
przedsięwzięcia pakiety <code>keep-alive</code> , to po jakimś czasie serwer pośle do nas pakiet <code>ACK</code> , by
się upewnić, że druga strona nie zakończyła połączenia, przez co sesja powinna być w dalszym ciągu
utrzymywana.</p>
<p>Może się zdarzyć też tak, że serwer, do którego się łączymy jest dość poważnie obciążony i nasz
linux zakończy połączenie zanim otrzyma odpowiedź od serwera. Niemniej jednak, taka odpowiedź do
nas może trafić później i wtedy taki pakiet zostanie zakwalifikowany jako <code>non-SYN</code> w stanie <code>NEW</code> .</p>
<p>Generalnie to powinniśmy zwracać uwagę na to jakie pakiety w stanie <code>NEW</code> do nas docierają, bo mogą
nam one nieco ułatwić odnalezienie przyczyny. Poniżej przykład logu z <code>nftables</code>/<code>iptables</code> :</p>
<pre><code>kernel: [ 9271.326139] * new-not-syn * IN=bond0 OUT= MACSRC=ec:08:6b:00:fb:b0
MACDST=3c:4a:92:00:4c:5b MACPROTO=0800 SRC=54.38.143.252 DST=192.168.0.135 LEN=1440
TOS=0x18 PREC=0x00 TTL=53 ID=17441 DF PROTO=TCP SPT=443 DPT=49412 SEQ=4233876898
ACK=924634312 WINDOW=245 RES=0x00 ACK URGP=0 OPT (0101080A0588C9ECF077CEED)
</code></pre>
<p>Wyżej widać ustawioną flagę <code>ACK</code> oraz ilość potwierdzonych bajtów <code>ACK=924634312</code> . Więc
ewidentnie mamy do czynienia z pierwsza sytuacją opisaną wyżej (najprawdopodobniej przerwany
transfer pliku pobieranego z serwera), a nie z obciążonym serwerem.</p>
<p>Są też i inne sytuacje, w których takich pakietów <code>not-SYN</code> w stanie <code>NEW</code> możemy doświadczyć, np.
jeśli mamy do czynienia z asymetrycznym routingiem (docierają do nas pakiety <code>SYN-ACK</code> w stanie
<code>NEW</code> ). Zwykle jednak tego typu sytuacja związana jest z jakimś błędem w konfiguracji routingu w
przyległych sieciach i z tym problemem przydałoby się jak najszybciej uporać.</p>
<p>Jeśli z kolei przeładujemy politykę linux'owej zapory sieciowej i przy tym czyścimy tablicę
conntrack'a chcąc mieć pewność, że wszystkie nawiązane sesje zostaną ubite (klienci będą musieli
jeszcze raz nawiązać połączenie), to w takim przypadku również zanotujemy sporo pakietów <code>not-SYN</code>
w stanie NEW.</p>
<h3 id="czy-pakiety-not-syn-w-stanie-new-mogą-być-groźne">Czy pakiety not-SYN w stanie NEW mogą być groźne</h3>
<p>Poza tymi sytuacjami opisanymi wyżej, pakiety TCP w stanie <code>NEW</code> niezawierające flagi <code>SYN</code> mogą
być także wykorzystywane w złych celach. Przykładem mogą być skany portów z wykorzystaniem pakietu
<code>ACK</code> do <a href="https://nmap.org/man/pl/man-port-scanning-techniques.html">ustalenia czy dana maszyna ma zaimplementowany firewall</a>
i by poznać po części jego konfigurację, np. czy wykorzystywane są stany połączeń i które porty są
filtrowane.</p>
<h2 id="drop-czy-reject-dla-pakietów-not-syn-w-stanie-new">DROP czy REJECT dla pakietów not-SYN w stanie NEW</h2>
<p>Jako, że pakiety TCP niemające flagi <code>SYN</code> ale będące w stanie <code>NEW</code> są bardzo charakterystyczne,
to możemy je bardzo prosto zablokować na firewall'u, z tym, że przydałoby się rozważyć kwestię
stosowania <code>DROP</code> lub <code>REJECT</code> . Która z tych dwóch opcji jest lepsza? W zasadzie jeśli mamy
odpowiednio skonfigurowany firewall w linux'ie i mamy wystawione na świat tylko te usługi, które
faktycznie chcemy udostępnić, a wszystkie inne porty mamy pozamykane, to te skany portów za wiele
nowych informacji o naszej maszynie nie dostarczą. Za to zrzucając cicho pakiety <code>not-SYN</code> w stanie
<code>NEW</code> jedynie przyczyniamy się do nieinformowania serwera, że coś jest nie tak z połączeniem, które
powinno zostać już dawno zakończone. Dlatego też dobrze jest wysłać pakiet <code>RST</code> w odpowiedzi na
taką próbę połączenia i zresetować połączenie, tak by serwer je poprawnie zakończył i przestał przy
tym marnować na nie zasoby sprzętowe.</p>
<p>Pakiety protokołu TCP mające stan <code>NEW</code> ale bez ustawionej flagi <code>SYN</code> można w
<code>nftables</code>/<code>iptables</code> wyłowić przy pomocy poniższych reguł.</p>
<p>Dla <code>DROP</code> :</p>
<pre><code># nft add rule inet filter INPUT meta l4proto tcp tcp flags &amp; (fin|syn|rst|ack) != syn ct state new counter drop

# iptables -A INPUT -p tcp ! --syn -m conntrack --ctstate NEW -j DROP
</code></pre>
<p>Dla <code>REJECT</code> :</p>
<pre><code># nft add rule inet filter INPUT meta l4proto tcp tcp flags &amp; (fin|syn|rst|ack) != syn ct state new counter reject with tcp reset

# iptables -A INPUT -p tcp ! --syn -m conntrack --ctstate NEW -j REJECT --reject-with tcp-reset
</code></pre>
<p>Warto zauważyć, że sporo użytkowników daje te reguły przed regułą, która ma na celu przepuścić
pakiety mające ustawioną flagę <code>SYN</code> i będące przy tym w stanie <code>NEW</code> . Takie zachowanie nie ma
większego sensu -- pakiet niemający flagi <code>SYN</code> ale będący przy tym w stanie <code>NEW</code> nigdy nie
zostanie dopasowany do reguły, która sprawdza obecność flagi <code>SYN</code> . Taka kolejność reguł spowalnia
tylko przechodzenie pakietów przez zaporę. Dlatego dobrze jest dodać te reguły gdzieś pod koniec
filtra Pamiętajmy też, że jeśli ręcznie nie odfiltrujemy tych pakietów, to zostaną one albo
zrzucone gdzieś pod koniec listy reguł, albo też zadziała domyślna polityka łańcucha <code>INPUT</code> ,
którą zwykle jest <code>DROP</code> .</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/nftables/">nftables</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/iptables/">iptables</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&amp;text=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&amp;title=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&amp;title=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&title=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&amp;title=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fczy-linuxowy-firewall-powinien-blokowac-pakiety-not-syn-w-stanie-new%2f&description=Czy%20linux%27owy%20firewall%20powinien%20blokowa%c4%87%20pakiety%20not-syn%20w%20stanie%20NEW" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/migracja-z-iptables-na-nftables-w-debianie/">Migracja z iptables na nftables w Debianie</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-ustalic-nazwe-procesu-korzystajacego-z-sieci/">Jak ustalić nazwę procesu korzystającego z sieci</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/brak-wsparcia-dla-ipset-w-nftables/">Brak wsparcia dla ipset w nftables</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/czy-brak-wsparcia-dla-synproxy-w-nftables-jest-problemem/">Czy brak wsparcia dla SYNPROXY w nftables jest problemem</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-wyczyscic-tablice-conntrack-w-debianie/">Jak wyczyścić tablicę conntrack&#39;a w debianie</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/rownowazenie-ruchu-lacz-kilku-isp-load-balancing/">Równoważenie ruchu łącz kilku ISP (load balancing)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-przy-pomocy-usbguard-zabezpieczyc-porty-usb-przed-zlosliwymi-urzadzeniami/">Jak przy pomocy USBguard zabezpieczyć porty USB przed złośliwymi urządzeniami</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script>
  var id =  293 ;

  if (id)
  {
    let url = "https://github.com/morfikov/morfitronik-comments/issues/".concat(id);
    let api_url = "https://api.github.com/repos/morfikov/morfitronik-comments/issues/".concat(id, "/comments");

    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Komentarze dla tego postu nie zostały jeszcze otworzone (albo skrypty GitHub'a są wyłączone). Być może też skończył ci się przydział 60/godzinę (limit GitHub'a).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h3");
        mainHeader.innerHTML = "Komentarze: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>Możesz zostawić komentarz korzystając z <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);

        comments.forEach(function(comment)
        {
			const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Europe/Warsaw' };
			options.timeZoneName = 'short';
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " | <em>", (new Date(comment.created_at)).toLocaleTimeString('pl-PL', options), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Wystąpił jakiś błąd przy ładowaniu komentarzy.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2021 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
</body>
</html>

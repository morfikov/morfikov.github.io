<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar" />
<meta property="og:description" content="Jakiś czas temu opisywałem konfigurację własnych kluczy EFI/UEFI, którymi można zastąpić te
wbudowane standardowo w firmware naszego komputera. W tamtym artykule napotkałem jednak dość dziwny
problem, za sprawą którego nie można było zaktualizować zmiennych PK , KEK , db i dbx przy
pomocy efi-updatevar z poziomu działającego linux&#39;a. Gdy próbowało się te zmienne przepisać,
dostawało się błąd typu Operation not permitted . Niby system został uruchomiony w trybie Setup Mode ale z jakiegoś powodu odmawiał on współpracy i trzeba było te zmienne aktualizować
bezpośrednio z poziomu firmware EFI/UEFI, co było trochę upierdliwe. Szukając wtedy informacji na
ten temat, jedyne co znalazłem, to fakt, że sporo osób ma podobny problem i najwyraźniej firmware
mojego laptopa jest ździebko niedorobiony, przez co efi-updatevar nie mógł realizować swojego
zdania. Rzeczywistość okazała się nieco inna, a rozwiązanie samego problemu było wręcz banalne." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/problem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-07-30T20:30:00&#43;00:00" />
<meta property="article:modified_time" content="2020-07-30T20:30:00&#43;00:00" />


		<meta itemprop="name" content="Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar">
<meta itemprop="description" content="Jakiś czas temu opisywałem konfigurację własnych kluczy EFI/UEFI, którymi można zastąpić te
wbudowane standardowo w firmware naszego komputera. W tamtym artykule napotkałem jednak dość dziwny
problem, za sprawą którego nie można było zaktualizować zmiennych PK , KEK , db i dbx przy
pomocy efi-updatevar z poziomu działającego linux&#39;a. Gdy próbowało się te zmienne przepisać,
dostawało się błąd typu Operation not permitted . Niby system został uruchomiony w trybie Setup Mode ale z jakiegoś powodu odmawiał on współpracy i trzeba było te zmienne aktualizować
bezpośrednio z poziomu firmware EFI/UEFI, co było trochę upierdliwe. Szukając wtedy informacji na
ten temat, jedyne co znalazłem, to fakt, że sporo osób ma podobny problem i najwyraźniej firmware
mojego laptopa jest ździebko niedorobiony, przez co efi-updatevar nie mógł realizować swojego
zdania. Rzeczywistość okazała się nieco inna, a rozwiązanie samego problemu było wręcz banalne."><meta itemprop="datePublished" content="2020-07-30T20:30:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-07-30T20:30:00&#43;00:00" />
<meta itemprop="wordCount" content="1065">
<meta itemprop="keywords" content="debian,efi,uefi," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar"/>
<meta name="twitter:description" content="Jakiś czas temu opisywałem konfigurację własnych kluczy EFI/UEFI, którymi można zastąpić te
wbudowane standardowo w firmware naszego komputera. W tamtym artykule napotkałem jednak dość dziwny
problem, za sprawą którego nie można było zaktualizować zmiennych PK , KEK , db i dbx przy
pomocy efi-updatevar z poziomu działającego linux&#39;a. Gdy próbowało się te zmienne przepisać,
dostawało się błąd typu Operation not permitted . Niby system został uruchomiony w trybie Setup Mode ale z jakiegoś powodu odmawiał on współpracy i trzeba było te zmienne aktualizować
bezpośrednio z poziomu firmware EFI/UEFI, co było trochę upierdliwe. Szukając wtedy informacji na
ten temat, jedyne co znalazłem, to fakt, że sporo osób ma podobny problem i najwyraźniej firmware
mojego laptopa jest ździebko niedorobiony, przez co efi-updatevar nie mógł realizować swojego
zdania. Rzeczywistość okazała się nieco inna, a rozwiązanie samego problemu było wręcz banalne."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2020-07-30T20:30:00Z">Opublikowano: 30/07/2020</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Problem z aktualizacją zmiennych PK, KEK, db i dbx via efi-updatevar</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#czemu-efi-updatevar-zwraca-operation-not-permitted">Czemu efi-updatevar zwraca &quot;Operation not permitted&quot;</a></li>
    <li><a href="#czyszczenie-zmiennych-pk-kek-db-i-dbx">Czyszczenie zmiennych PK, KEK, db i dbx</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Jakiś czas temu opisywałem <a href="https://morfikov.github.io/jak-dodac-wlasne-klucze-dla-secure-boot-do-firmware-efi-uefi-pod-linux/">konfigurację własnych kluczy EFI/UEFI</a>, którymi można zastąpić te
wbudowane standardowo w firmware naszego komputera. W tamtym artykule napotkałem jednak dość dziwny
problem, za sprawą którego nie można było zaktualizować zmiennych <code>PK</code> , <code>KEK</code> , <code>db</code> i <code>dbx</code> przy
pomocy <code>efi-updatevar</code> z poziomu działającego linux'a. Gdy próbowało się te zmienne przepisać,
dostawało się błąd typu <code>Operation not permitted</code> . Niby system został uruchomiony w trybie <code>Setup Mode</code> ale z jakiegoś powodu odmawiał on współpracy i trzeba było te zmienne aktualizować
bezpośrednio z poziomu firmware EFI/UEFI, co było trochę upierdliwe. Szukając wtedy informacji na
ten temat, jedyne co znalazłem, to fakt, że sporo osób ma podobny problem i najwyraźniej firmware
mojego laptopa jest ździebko niedorobiony, przez co <code>efi-updatevar</code> nie mógł realizować swojego
zdania. Rzeczywistość okazała się nieco inna, a rozwiązanie samego problemu było wręcz banalne.</p>
<h2 id="czemu-efi-updatevar-zwraca-operation-not-permitted">Czemu efi-updatevar zwraca &quot;Operation not permitted&quot;</h2>
<p>Niby własne klucze EFI/UEFI udało się ostatecznie wgrać do firmware, może nieco inną metodą i
trochę na około, ale przez cały ten czas ta sytuacja nie dawała mi spokoju. Może nie szukałem
aktywnie rozwiązania problem, bo w ostatecznie te klucze udało się wymienić ale nie lubię zostawić
niedokończonych spraw samym sobie, bo prędzej czy później one wracają w najmniej oczekiwanym
momencie. Jako, że ostatnio sporo się bawię narzędziem <code>strace</code> i przy okazji parę dni temu pojawił
się dość poważny <a href="https://eclypsium.com/2020/07/29/theres-a-hole-in-the-boot/">błąd w Grub2, który obchodzi mechanizm Secure Boot</a>, to postanowiłem powrócić
do tematu i trochę go głębiej podrążyć.</p>
<p>Poniżej jest kawałek logu <code>strace</code> z zarejestrowanym błędem:</p>
<pre><code># strace -f -o /tmp/strace.txt -s 2000 efi-updatevar -f dbx.esl dbx
...
13488 openat(AT_FDCWD, &quot;/sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f&quot;, O_RDWR|O_CREAT|O_TRUNC, 0644) = -1 EPERM (Operation not permitted)
13488 write(2, &quot;Failed to update dbx: &quot;, 22) = 22
13488 write(2, &quot;Operation not permitted\n&quot;, 24) = 24
</code></pre>
<p>Niemniej jednak, jak się podejrzy uprawnienia tego pliku
<code>/sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f</code> , to mamy coś takiego:</p>
<pre><code># ls -al /sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f
-rw-r--r-- 1 root root 0 2020-07-30 17:42:36 /sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f
</code></pre>
<p>Więc w czym problem? Niby root ma uprawnienia do zapisu tego pliku ale mimo to operacja zapisu jest
niedozwolona.</p>
<p>Z początku nie miałem pojęcia o co może chodzić. Góglając jednak, natrafiłem na <a href="https://packages.ubuntu.com/groovy/secureboot-db">pakiet
secureboot-db</a>, którego co prawda nie ma w Debianie ale jest za to w Ubuntu. Postanowiłem sobie
ten pakiet zbudować, no i do tego celu były mi potrzebne źródła, które można było pozyskać ze
wskazanego wyżej linku. Tam z kolei już był przygotowany katalog <code>debian/</code> , a w nim plik
<code>secureboot-db.service</code> , tj. usługa dla systemd. Zajrzawszy do środka, moim oczom ukazała się
poniższa zawartość:</p>
<pre><code>...
[Service]
...
ExecStartPre=-/usr/bin/chattr -i /sys/firmware/efi/efivars/KEK-8be4df61-93ca-11d2-aa0d-00e098032b8c
ExecStartPre=-/usr/bin/chattr -i /sys/firmware/efi/efivars/db-d719b2cb-3d3a-4596-a3bc-dad00e67656f
ExecStartPre=-/usr/bin/chattr -i /sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f

...
</code></pre>
<p>No proszę, a co tu robi <code>chattr</code> ? Przecie to narzędzie zmienia atrybuty pliku. No właśnie
atrybuty... A ten <code>i</code> odpowiada za bit odporności (immutable bit) i gdy jest on ustawiony, to taki
plik nie może być w żaden sposób modyfikowany, nawet przez użytkownika root.</p>
<p>Postanowiłem zatem sprawdzić atrybuty plików w katalogu <code>/sys/firmware/efi/efivars/</code> :</p>
<pre><code># lsattr /sys/firmware/efi/efivars/*
...
----i--------------- /sys/firmware/efi/efivars/KEK-8be4df61-93ca-11d2-aa0d-00e098032b8c
----i--------------- /sys/firmware/efi/efivars/PK-8be4df61-93ca-11d2-aa0d-00e098032b8c
----i--------------- /sys/firmware/efi/efivars/db-d719b2cb-3d3a-4596-a3bc-dad00e67656f
----i--------------- /sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f
...
</code></pre>
<p>I zgodnie z moimi podejrzeniami, wszystkie te wyżej widoczne pliki (każdy odpowiada innej zmiennej
EFI/UEFI) mają ustawiony bit odporności. Usunąłem zatem ten bit odporności:</p>
<pre><code># chattr -i /sys/firmware/efi/efivars/KEK-8be4df61-93ca-11d2-aa0d-00e098032b8c
# chattr -i /sys/firmware/efi/efivars/PK-8be4df61-93ca-11d2-aa0d-00e098032b8c
# chattr -i /sys/firmware/efi/efivars/db-d719b2cb-3d3a-4596-a3bc-dad00e67656f
# chattr -i /sys/firmware/efi/efivars/dbx-d719b2cb-3d3a-4596-a3bc-dad00e67656f
</code></pre>
<p>I co się okazało? Teraz bez większego problemu idzie te zmienne zapisać przy pomocy narzędzia
<code>efi-updatevar</code> .</p>
<h2 id="czyszczenie-zmiennych-pk-kek-db-i-dbx">Czyszczenie zmiennych PK, KEK, db i dbx</h2>
<p>Drugi problem, jaki napotkałem, związany był z wyczyszczeniem zmiennych <code>PK</code> , <code>KEK</code> , <code>db</code> i
<code>dbx</code> . Do tej pory informacje w tych zmiennych były zastępowane w procesie ich aktualizacji.
Czasami jednak przydałoby się te zmienne kompletnie wyczyścić, tak by nie zawierały żadnych
informacji. Można tego dokonać przez stworzenie pustego pliku z listą sygnatur EFI/UEFI:</p>
<pre><code># &gt; null.esl
# ls -al null.esl
-rw-r--r-- 1 root root 0 2020-07-30 18:32:47 null.esl
</code></pre>
<p>Tak stworzony plik trzeba podpisać w standardowy sposób kluczem <code>PK</code> , w którego to posiadaniu
powinniśmy już być (jeśli nie mamy tego klucza, to odsyłam do artykułu podlinkowanego we wstępie):</p>
<pre><code># sign-efi-sig-list -c PK.crt -k PK.key PK null.esl PKnull.auth
Timestamp is 2020-7-30 18:35:21
Authentication Payload size 40
Signature of size 1211
Signature at: 40

# ls -al PKnull.auth
-rw------- 1 root root 1251 2020-07-30 18:35:21 PKnull.auth
</code></pre>
<p>Ten plik może zostać teraz wykorzystany do wyczyszczenia zmiennych <code>PK</code> , <code>KEK</code> , <code>db</code> i <code>dbx</code> .
Robimy to w poniższy sposób:</p>
<pre><code># efi-updatevar -f PKnull.auth PK
# efi-updatevar -f PKnull.auth KEK
# efi-updatevar -f PKnull.auth db
# efi-updatevar -f PKnull.auth dbx
</code></pre>
<p>Sprawdźmy czy zadziałało:</p>
<pre><code># efi-readvar

Variable PK has no entries
Variable KEK has no entries
Variable db has no entries
Variable dbx has no entries
Variable MokList has no entries
</code></pre>
<p>No proszę, zmienne udało się wyczyścić bez żadnego problemu, a sam błąd <code>Operation not permitted</code>
już się nie pojawia.</p>
<p>Po wyczyszczeniu zmiennej <code>PK</code> system automatycznie przejdzie w tryb <code>Setup Mode</code> , o czym możemy
się przekonać wydając jedno z tych dwóch poniższych poleceń:</p>
<pre><code># mokutil --sb-state
SecureBoot disabled
Platform is in Setup Mode

# bootctl | grep Setup

   Setup Mode: setup
</code></pre>
<p>Możemy teraz wgrać nową zawartość do tych czterech zmiennych dokładnie w taki sam sposób jak to
było robione z poziomu firmware EFI/UEFI, z tą różnicą, że przy pomocy <code>efi-updatevar</code> :</p>
<pre><code># efi-updatevar -f old_dbx.auth dbx
# efi-updatevar -f compound_db.auth db
# efi-updatevar -f compound_KEK.auth KEK
# efi-updatevar -f PK.auth PK
</code></pre>
<p>I sprawdźmy czy udało się je uzupełnić:</p>
<pre><code># efi-readvar
Variable PK, length 853
PK: List 0, type X509
	Signature 0, size 825, owner 90a7d962-e601-4363-a326-524f9f76132b
        Subject:
            CN=morfikov's platform key
        Issuer:
            CN=morfikov's platform key
Variable KEK, length 861
KEK: List 0, type X509
	Signature 0, size 833, owner 95b65092-8342-4a45-9dc2-d80233aba2b3
        Subject:
            CN=morfikov's key-exchange-key
        Issuer:
            CN=morfikov's key-exchange-key
Variable db, length 865
db: List 0, type X509
	Signature 0, size 837, owner 1091ff9c-7b84-4df6-8163-ed1b8aa05096
        Subject:
            CN=morfikov's kernel-signing key
        Issuer:
            CN=morfikov's kernel-signing key
Variable dbx, length 3800
dbx: List 0, type SHA256
	Signature 0, size 48, owner 7facc7b6-127f-4e9c-9c5d-080f98994345
        Hash:14e62a4905e19189e70828983165939afc0a331d0b415f3332b0e818a827f436
	...
Variable MokList has no entries
</code></pre>
<p>Jak tylko zapiszemy zmienną <code>PK</code> , to system z <code>Setup Mode</code> automatycznie przeskoczy do
<code>User Mode</code> , co możemy zaobserwować w wyjściu  <code>bootctl</code> :</p>
<pre><code># bootctl | grep Setup

   Setup Mode: user
</code></pre>
<p>Warto w tym miejscu zaznaczyć, że z racji podpisania pliku <code>null.esl</code> kluczem <code>PK</code> , zmiany, które
ten plik wprowadza (czyści zmienne) są zawsze autoryzowane. Dlatego dobrze jest ten plik po
zakończeniu prac usunąć albo chociaż trzymać go w bezpiecznym miejscu razem z samym kluczem <code>PK</code> ,
tak by nikt nam zmiennych EFI/UEFI nie przepisał bez naszej świadomej i dobrowolnej zgody.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/efi/">efi</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/uefi/">uefi</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&amp;text=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&amp;title=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&amp;title=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&title=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&amp;title=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fproblem-z-aktualizacja-zmiennych-pk-kek-db-dbx-efi-updatevar%2f&description=Problem%20z%20aktualizacj%c4%85%20zmiennych%20PK%2c%20KEK%2c%20db%20i%20dbx%20via%20efi-updatevar" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/pendrive-multiboot-dla-efi-uefi-z-secure-boot/">Pendrive multiboot dla EFI/UEFI z Secure Boot</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-dodac-wlasne-klucze-dla-secure-boot-do-firmware-efi-uefi-pod-linux/">Jak dodać własne klucze dla Secure Boot do firmware EFI/UEFI pod linux</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-przygotowac-dysk-pod-instalacje-debian-linux-z-efi-uefi/">Jak przygotować dysk pod instalację Debian linux z EFI/UEFI</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/memtest86-dla-efi-uefi-i-refind/">Memtest86 dla EFI/UEFI i rEFInd</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/linux-kernel-efi-boot-stub-i-zaszyfrowany-debian-luks-lvm/">Linux kernel EFI boot stub i zaszyfrowany Debian (LUKS&#43;LVM)</a></li>
		
	</ul>
</div>

	

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2021 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
		<img alt="Licencja Creative Commons" style="border-width:0" src="https://licensebuttons.net/l/by-nc-sa/4.0/80x15.png" />
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
<script data-goatcounter="https://morfik.goatcounter.com/count"
  async src="//gc.zgo.at/count.js"></script>
</body>
</html>

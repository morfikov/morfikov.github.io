<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Aero2 w połączeniu z dnsmasq i dnscrypt-proxy | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Aero2 w połączeniu z dnsmasq i dnscrypt-proxy" />
<meta property="og:description" content="Aero2 już od dość dawna oferuje darmowy dostęp do internetu w technologi LTE ale jakoś
wcześniej nie byłem tym tematem zainteresowany. Parę dni temu złożyłem jednak wniosek o kartę SIM,
tak by posiadać zapasowe łącze na wypadek, gdyby mój obecny ISP z jakiegoś powodu padł. Aero2
oferuje wersję komercyjną jak i tę za free i każda z nich ma swoje wady i zalety. Jako, że to łącze
ma robić jedynie za zapas, to korzystam z wersji FREE, a jest ono dość poważne ograniczenie, tj.
występuje tutaj kod CAPTCHA, który trzeba wpisywać tak co godzinę, po czym należy resetować
modem. Ten kod może zostać zaserwowany jedynie w przypadku korzystania z DNS Aero2 i pozornie
odpada możliwość używania własnego systemu DNS opartego o dnsmasq i dnscrypt-proxy. Po
kilku dniach eksperymentów udało mi się wypracować przyzwoitą konfigurację, która potrafi obejść to
ograniczenie, poprawiając tym samym prywatność i bezpieczeństwo w internecie korzystając z
darmowego LTE za sprawą Aero2. W tym wpisie postaramy się zaimplementować ten mechanizm na debianie." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/aero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-04-02T18:47:47&#43;02:00" />
<meta property="article:modified_time" content="2016-04-02T18:47:47&#43;02:00" />


		<meta itemprop="name" content="Aero2 w połączeniu z dnsmasq i dnscrypt-proxy">
<meta itemprop="description" content="Aero2 już od dość dawna oferuje darmowy dostęp do internetu w technologi LTE ale jakoś
wcześniej nie byłem tym tematem zainteresowany. Parę dni temu złożyłem jednak wniosek o kartę SIM,
tak by posiadać zapasowe łącze na wypadek, gdyby mój obecny ISP z jakiegoś powodu padł. Aero2
oferuje wersję komercyjną jak i tę za free i każda z nich ma swoje wady i zalety. Jako, że to łącze
ma robić jedynie za zapas, to korzystam z wersji FREE, a jest ono dość poważne ograniczenie, tj.
występuje tutaj kod CAPTCHA, który trzeba wpisywać tak co godzinę, po czym należy resetować
modem. Ten kod może zostać zaserwowany jedynie w przypadku korzystania z DNS Aero2 i pozornie
odpada możliwość używania własnego systemu DNS opartego o dnsmasq i dnscrypt-proxy. Po
kilku dniach eksperymentów udało mi się wypracować przyzwoitą konfigurację, która potrafi obejść to
ograniczenie, poprawiając tym samym prywatność i bezpieczeństwo w internecie korzystając z
darmowego LTE za sprawą Aero2. W tym wpisie postaramy się zaimplementować ten mechanizm na debianie."><meta itemprop="datePublished" content="2016-04-02T18:47:47&#43;02:00" />
<meta itemprop="dateModified" content="2016-04-02T18:47:47&#43;02:00" />
<meta itemprop="wordCount" content="1098">
<meta itemprop="keywords" content="resolver,sieć,aero2,lte,modem,huawei,e3372,dns,dnsmasq,dnscrypt," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Aero2 w połączeniu z dnsmasq i dnscrypt-proxy"/>
<meta name="twitter:description" content="Aero2 już od dość dawna oferuje darmowy dostęp do internetu w technologi LTE ale jakoś
wcześniej nie byłem tym tematem zainteresowany. Parę dni temu złożyłem jednak wniosek o kartę SIM,
tak by posiadać zapasowe łącze na wypadek, gdyby mój obecny ISP z jakiegoś powodu padł. Aero2
oferuje wersję komercyjną jak i tę za free i każda z nich ma swoje wady i zalety. Jako, że to łącze
ma robić jedynie za zapas, to korzystam z wersji FREE, a jest ono dość poważne ograniczenie, tj.
występuje tutaj kod CAPTCHA, który trzeba wpisywać tak co godzinę, po czym należy resetować
modem. Ten kod może zostać zaserwowany jedynie w przypadku korzystania z DNS Aero2 i pozornie
odpada możliwość używania własnego systemu DNS opartego o dnsmasq i dnscrypt-proxy. Po
kilku dniach eksperymentów udało mi się wypracować przyzwoitą konfigurację, która potrafi obejść to
ograniczenie, poprawiając tym samym prywatność i bezpieczeństwo w internecie korzystając z
darmowego LTE za sprawą Aero2. W tym wpisie postaramy się zaimplementować ten mechanizm na debianie."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Aero2 w połączeniu z dnsmasq i dnscrypt-proxy</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2016-04-02T18:47:47&#43;02:00">Opublikowano: 02/04/2016</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Aero2 w połączeniu z dnsmasq i dnscrypt-proxy</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#resolver-na-potrzeby-aero2">Resolver na potrzeby Aero2</a></li>
    <li><a href="#konfiguracja-dnsmasq">Konfiguracja dnsmasq</a></li>
    <li><a href="#konfiguracja-wvdial">Konfiguracja wvdial</a></li>
    <li><a href="#testy-połączenia-lte-od-aero2-z-własnym-dns">Testy połączenia LTE od Aero2 z własnym DNS</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p><a href="https://aero2.pl/">Aero2</a> już od dość dawna oferuje darmowy dostęp do internetu w technologi LTE ale jakoś
wcześniej nie byłem tym tematem zainteresowany. Parę dni temu złożyłem jednak wniosek o kartę SIM,
tak by posiadać zapasowe łącze na wypadek, gdyby mój obecny ISP z jakiegoś powodu padł. Aero2
oferuje wersję komercyjną jak i tę za free i każda z nich ma swoje wady i zalety. Jako, że to łącze
ma robić jedynie za zapas, to korzystam z wersji FREE, a jest ono dość poważne ograniczenie, tj.
występuje tutaj <a href="https://pl.wikipedia.org/wiki/CAPTCHA">kod CAPTCHA</a>, który trzeba wpisywać tak co godzinę, po czym należy resetować
modem. Ten kod może zostać zaserwowany jedynie w przypadku korzystania z DNS Aero2 i pozornie
odpada możliwość używania własnego systemu DNS opartego o <a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">dnsmasq</a> i <a href="https://dnscrypt.org/">dnscrypt-proxy</a>. Po
kilku dniach eksperymentów udało mi się wypracować przyzwoitą konfigurację, która potrafi obejść to
ograniczenie, poprawiając tym samym prywatność i bezpieczeństwo w internecie korzystając z
darmowego LTE za sprawą Aero2. W tym wpisie postaramy się zaimplementować ten mechanizm na debianie.</p>
<h2 id="resolver-na-potrzeby-aero2">Resolver na potrzeby Aero2</h2>
<p>Przede wszystkim, potrzebne nam będą odpowiednie pakiety i konfiguracja systemu. Nie będziemy
korzystać z automatów, bo one tylko będą przeszkadzać. <a href="https://morfikov.github.io/post/dnscrypt-proxy-czyli-szyfrowanie-zapytan-dns/">Tutaj znajduje się opis konfiguracji
narzędzia dnscrypt-proxy</a>, a <a href="https://morfikov.github.io/post/cache-dns-buforowania-zapytan/">tutaj zaś jest opisana konfiguracja dnsmasq</a>. Nie będę
poruszał tutaj tych tematów i zakładam, że mamy już odpowiedni setup zaprojektowany oraz, że on
działa.</p>
<p>By ułatwić nieco zrozumienie samej konfiguracji, trzeba ustalić kilka rzeczy. Przede wszystkim,
wpisy w pliku <code>/etc/resolv.conf</code> wskazują na adres <code>127.0.0.1</code> . Jest to adres, na którym nasłuchuje
<code>dnsmasq</code> . Zapytania DNS wędrują do <code>dnsmasq</code> i ten albo odpowiada adresami IP ze swojego cache,
albo forward'uje te zapytania do <code>dnscrypt-proxy</code> na adres <code>127.0.2.1:5353</code> . Później te zapytania
są szyfrowane i przesyłane do upstream'owego serwera DNS.</p>
<p>By darmowy internet LTE od Aero2 nam działał, musimy wpisywać kod CAPTCHA co 60 minut. Za każdym
razem, gdy upływa ten czas, po przejściu na dowolny adres w przeglądarce, zostaniemy przekierowani
automatycznie na stronę <code>bdi.free.aero2.net.pl</code> . Oczywiście, pod warunkiem, że korzystamy z DNS od
Aero2. I tu właśnie napotykamy problem pozornie nie do obejścia. Korzystając z zaszyfrowanego
systemu DNS, zapytania nigdy nie dotrą do serwerów DNS Aero2, a bez tego nie zostaniemy
przekierowani na stronę z kodem. Nie wpiszemy kodu, to nie będzie połączenia. Musimy zatem
zaprojektować taki resolver, który w odpowiedniej chwili przekieruje nas na stronę z kodem CAPTCHA,
a po wszystkim będzie wysyłał zapytania do naszego lokalnego resolver'a.</p>
<h2 id="konfiguracja-dnsmasq">Konfiguracja dnsmasq</h2>
<p>W <code>dnsmasq</code> mamy możliwość zdefiniowania wielu upstream'owych serwerów DNS i rozdzielenia ruchu do
nich na podstawie domen. Nie możemy jednak operować na domenie <code>bdi.free.aero2.net.pl</code> , bo ta jest
rozwiązywana na adres lokalny <code>10.2.37.78</code> . Można to sprawdzić znając serwery DNS Aero2 (
<code>212.2.96.51</code> i <code>212.2.96.52</code> ) w poniższy sposób:</p>
<pre><code>$ nslookup bdi.free.aero2.net.pl 212.2.96.51
Server:         212.2.96.51
Address:        212.2.96.51#53

Non-authoritative answer:
Name:   bdi.free.aero2.net.pl
Address: 10.2.37.78
</code></pre>
<p>Musimy zatem zrobić inny trik, który polega na zdefiniowaniu tego powyższego powiązania w pliku
<code>/etc/dnsmasq.conf</code> oraz wytypowaniu jednej domeny, która zostanie przesłana do serwerów DNS Aero2.
Poniżej jest przykład konfiguracji, którą trzeba dodać do powyższego pliku:</p>
<pre><code>server=127.0.2.1#5353
server=/wp.pl/212.2.96.51
address=/bdi.free.aero2.net.pl/10.2.37.78
</code></pre>
<p>Pierwsza linijka odpowiada za przesłanie wszystkich zapytań do określonego serwera DNS. Druga
linijka przesyła zapytania o domenę <code>wp.pl</code> do serwera DNS Aero2. W trzeciej zaś mamy statyczny wpis
rozwiązujący domenę <code>bdi.free.aero2.net.pl</code> na adres prywatny <code>10.2.37.78</code> .</p>
<p>By dodatkowo zwiększyć bezpieczeństwo przeglądania internetu za pośrednictwem Aero2, możemy jeszcze
dodać ten poniższy blok kodu do pliku <code>/etc/dnsmasq.conf</code> :</p>
<pre><code>stop-dns-rebind
rebind-localhost-ok
rebind-domain-ok=free.aero2.net.pl
</code></pre>
<p>Opcja <code>stop-dns-rebind</code> zapobiega przekierowaniu w oparciu od DNS, tj. wpisujemy jedną domenę, a
jest nam zwracana inna, tzw <a href="https://en.wikipedia.org/wiki/DNS_rebinding">DNS rebinding</a> i dokładnie ten mechanizm ma miejsce w przypadku
serwowania strony z kodem CAPTCHA przez Aero2. Dlatego też musimy jedną domenę wyłączyć spod
działania tego mechanizmu i za to odpowiada parametr <code>rebind-domain-ok</code> .</p>
<h2 id="konfiguracja-wvdial">Konfiguracja wvdial</h2>
<p>Musimy jeszcze skonfigurować połączenie. Na debianie sid, ta procedura sprowadza się do
zainstalowania pakietów <code>ppp</code> , <code>usb-modeswitch</code> oraz <code>wvdial</code> . W zależności od posiadanego modemu,
być może trzeba będzie zaaplikować konfigurację dla <code>usb-modeswitch</code> w pliku
<code>/etc/usb_modeswitch.conf</code> . Ja korzystam z modemu Huawei E3372s-153 w wersji NON-HiLink i żadnych
dodatkowych czynności pod kątem zmiany jego trybu pracy nie musiałem przeprowadzać. Teraz w pliku
<code>/etc/wvdial.conf</code> dodajemy ten poniższy blok kodu:</p>
<pre><code>[Dialer Defaults]
Modem Type = Analog Modem
Modem = /dev/ttyUSB1
ISDN = 0
Baud = 9600
Dial Command = ATDT
Dial Attempts = 3
Dial Timeout = 30
Auto Reconnect = 1
Stupid mode = 1
Auto DNS = 0
Check DNS = 1
DNS Test1 = wp.pl
DNS Test2 = google.com
Check Def Route = 1
Idle Seconds = 0
Init1 = ATZ
Init2 = ATQ0 V1 E0 H0 S0=0

[Dialer modem-start]
Init1 = AT+CFUN=1

[Dialer modem-stop]
Modem = /dev/ttyUSB0
Init1 = AT+CFUN=0

[Dialer set-new]
Init4 = AT^SYSCFGEX=&quot;0302&quot;,3FFFFFFF,1,2,800C5,,

[Dialer aero2]
Init6 = AT+CGDCONT=1,&quot;IP&quot;,&quot;darmowy&quot;
Phone = *99#
Password = &quot;aero&quot;
Username = &quot;aero&quot;
</code></pre>
<p>Sekcja <code>[Dialer Defaults]</code> może być inna w zależności od posiadanego modemu i dobrze jest ją sobie
wygenerować za pomocą polecenia <code>wvdialconf</code> . Większość parametrów w tej sekcji powinna być raczej
zrozumiała. Dobrze jest ustawić <code>Check DNS</code> na <code>1</code> oraz dodać dwie domeny, które będą odpytywane
przy zestawianiu połączenia. Jedna z nich niech wskazuję na domenę, która została przekierowana do
DNS Aero2. Dodatkowo, by zapobiec przepisywaniu pliku <code>/etc/resolv.conf</code> powinniśmy ustawić <code>Auto DNS</code> na <code>0</code> oraz wykomentować <code>usepeerdns</code> w pliku <code>/etc/ppp/peers/wvdial</code> . Można też oczywiście
nadać atrybut odporności na plik <code>/etc/resolv.conf</code> w poniższy sposób:</p>
<pre><code># chattr +i /etc/resolv.conf
</code></pre>
<p>Pozostałe sekcje zawierają polecenia AT, które mówią modemowi co ma robić. Omówienie ich wychodzi
poza zakres tego artykułu. Jeśli ktoś jest ciekaw co te komendy oznaczają, to zawsze może rzucić
okiem na <a href="https://github.com/morfikov/files/blob/master/configs/etc/wvdial.conf">mój plik
/etc/wvdial.conf</a>.</p>
<h2 id="testy-połączenia-lte-od-aero2-z-własnym-dns">Testy połączenia LTE od Aero2 z własnym DNS</h2>
<p>Czas najwyższy przetestować cały mechanizm. Podłączamy zatem modem do portu USB i łączymy się za
pomocą tego poniższego polecenia:</p>
<pre><code># wvdial modem-start set-new aero2
...
--&gt; Default route Ok.
--&gt; Nameserver (DNS) Ok.
--&gt; Connected... Press Ctrl-C to disconnect
</code></pre>
<p>Powyżej widzimy, że połączenie zostało nawiązane z powodzeniem. W tech wili powinniśmy być w stanie
przejść na dowolny adres wpisując w przeglądarce w pasku adresu jakąś domenę. Po jakimś czasie
strona nie będzie nam się chciała załadować. W takim przypadku, musimy przejść na adres <code>wp.pl</code> i
zostaniemy przekierowani na stronę z kodem CAPTCHA:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/04/1.aero2-captcha-kod.png" alt=""    class="huge"></p>
<p>Wpisujemy kod i po chwili powinien nam zostać przywrócony dostęp do internetu:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/04/2.aero2-captcha-kod.png" alt=""    class="huge"></p>
<p>Musimy jeszcze zresetować połączenie modemu. Przechodzimy do terminala i wciskamy Ctrl-C . Po chwili
ponowne wpisujemy poniższe polecenie:</p>
<pre><code># wvdial modem-start set-new aero2
</code></pre>
<p>Od tego momentu przez następną godzinę możemy przeglądać internet swobodnie, a wszystkie domeny (no
może poza jedną i jej subdomenami) będą rozwiązywane przez lokalny resolver, ewentualnie przesyłane
do upstream'owego serwera DNS drogą szyfrowaną i nikt nie będzie w stanie zidentyfikować domen,
które odwiedzaliśmy korzystając z darmowego internetu LTE od Aero2.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/resolver/">resolver</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/sie%C4%87/">sieć</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/aero2/">aero2</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/lte/">lte</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/modem/">modem</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/huawei/">huawei</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/e3372/">e3372</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/dns/">dns</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/dnsmasq/">dnsmasq</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/dnscrypt/">dnscrypt</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&amp;text=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&amp;title=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&amp;title=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&title=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&amp;title=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2faero2-w-polaczeniu-z-dnsmasq-dnscrypt-proxy%2f&description=Aero2%20w%20po%c5%82%c4%85czeniu%20z%20dnsmasq%20i%20dnscrypt-proxy" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/cache-dns-buforowania-zapytan/">Cache DNS, czyli włączenie buforowania zapytań</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/dnscrypt-proxy-czyli-szyfrowanie-zapytan-dns/">DNScrypt-proxy, czyli szyfrowanie zapytań DNS</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-tunelu-6in4-w-openwrt-ipv6/">Konfiguracja tunelu 6in4 w OpenWRT (IPv6)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/implementacja-protokolu-ssltls-w-vsftpd/">Implementacja protokołu SSL/TLS w vsftpd</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-vsftpd-w-debianie/">Konfiguracja vsftpd w Debianie</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/backup-dysku-przez-siec-przy-pomocy-dd-netcat/">Backup dysku przez sieć przy pomocy dd i netcat</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/implementacja-protokolu-ipv6-za-pomoca-tunelu-6to4/">Implementacja protokołu IPv6 za pomocą tunelu 6to4</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script>
  var id =  428 ;

  if (id)
  {
    let url = "https://github.com/morfikov/morfitronik-comments/issues/".concat(id);
    let api_url = "https://api.github.com/repos/morfikov/morfitronik-comments/issues/".concat(id, "/comments");

    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Komentarze dla tego postu nie zostały jeszcze otworzone (albo skrypty GitHub'a są wyłączone). Być może też skończył ci się przydział 60/godzinę (limit GitHub'a).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h3");
        mainHeader.innerHTML = "Komentarze: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>Możesz zostawić komentarz korzystając z <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);

        comments.forEach(function(comment)
        {
			const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Europe/Warsaw' };
			options.timeZoneName = 'short';
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " | <em>", (new Date(comment.created_at)).toLocaleTimeString('pl-PL', options), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Wystąpił jakiś błąd przy ładowaniu komentarzy.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2021 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
</body>
</html>

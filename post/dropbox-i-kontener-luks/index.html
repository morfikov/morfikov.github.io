<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Dropbox i kontener LUKS | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Dropbox i kontener LUKS" />
<meta property="og:description" content="Ogarnęliśmy już szyfrowanie plików na Dropbox przy pomocy encfs oraz kontenerów
TrueCrypt. Każda z w/w operacji drastycznie poprawiła prywatność naszych plików, które
przechowujemy w chmurze. Poniższy wpis będzie w podobnym klimacie, tj. spróbujemy umieścić na
Dropbox kontener LUKS, co niesie ze sobą sporo udogodnień i czyni korzystanie z
zaszyfrowanego Dropbox&#39;a praktycznie transparentnym." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/dropbox-i-kontener-luks/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2015-10-21T20:34:42&#43;00:00" />
<meta property="article:modified_time" content="2015-10-21T20:34:42&#43;00:00" />


		<meta itemprop="name" content="Dropbox i kontener LUKS">
<meta itemprop="description" content="Ogarnęliśmy już szyfrowanie plików na Dropbox przy pomocy encfs oraz kontenerów
TrueCrypt. Każda z w/w operacji drastycznie poprawiła prywatność naszych plików, które
przechowujemy w chmurze. Poniższy wpis będzie w podobnym klimacie, tj. spróbujemy umieścić na
Dropbox kontener LUKS, co niesie ze sobą sporo udogodnień i czyni korzystanie z
zaszyfrowanego Dropbox&#39;a praktycznie transparentnym."><meta itemprop="datePublished" content="2015-10-21T20:34:42&#43;00:00" />
<meta itemprop="dateModified" content="2015-10-21T20:34:42&#43;00:00" />
<meta itemprop="wordCount" content="1423">
<meta itemprop="keywords" content="bezpieczeństwo,szyfrowanie,online-storage,luks," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dropbox i kontener LUKS"/>
<meta name="twitter:description" content="Ogarnęliśmy już szyfrowanie plików na Dropbox przy pomocy encfs oraz kontenerów
TrueCrypt. Każda z w/w operacji drastycznie poprawiła prywatność naszych plików, które
przechowujemy w chmurze. Poniższy wpis będzie w podobnym klimacie, tj. spróbujemy umieścić na
Dropbox kontener LUKS, co niesie ze sobą sporo udogodnień i czyni korzystanie z
zaszyfrowanego Dropbox&#39;a praktycznie transparentnym."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Dropbox i kontener LUKS</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2015-10-21T20:34:42Z">Opublikowano: 21/10/2015</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Dropbox i kontener LUKS</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#tworzenie-kontenera-pod-dane-na-dropbox">Tworzenie kontenera pod dane na Dropbox</a></li>
    <li><a href="#konfiguracja-kontenera-luks">Konfiguracja kontenera LUKS</a>
      <ol>
        <li><a href="#plik-etccrypttab">Plik /etc/crypttab</a></li>
        <li><a href="#plik-etcfstab">Plik /etc/fstab</a></li>
        <li><a href="#generowanie-nowego-initramfs">Generowanie nowego initramfs</a></li>
        <li><a href="#problemy-z-odblokowaniem-kontenera-luks">Problemy z odblokowaniem kontenera LUKS</a></li>
      </ol>
    </li>
    <li><a href="#automatyczne-montowanie-systemu-plików-kontenera">Automatyczne montowanie systemu plików kontenera</a></li>
    <li><a href="#ochrona-kontenera-z-plikami-dropboxa">Ochrona kontenera z plikami Dropbox'a</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Ogarnęliśmy już szyfrowanie plików na Dropbox przy pomocy <a href="https://morfikov.github.io/post/implementacja-encfs-na-dropboxie/">encfs</a> oraz <a href="https://morfikov.github.io/post/kontener-truecrypt-trzymany-na-dropboxie/">kontenerów
TrueCrypt</a>. Każda z w/w operacji drastycznie poprawiła prywatność naszych plików, które
przechowujemy w chmurze. Poniższy wpis będzie w podobnym klimacie, tj. spróbujemy umieścić na
Dropbox <a href="https://pl.wikipedia.org/wiki/Linux_Unified_Key_Setup">kontener LUKS</a>, co niesie ze sobą sporo udogodnień i czyni korzystanie z
zaszyfrowanego Dropbox'a praktycznie transparentnym.</p>
<h2 id="tworzenie-kontenera-pod-dane-na-dropbox">Tworzenie kontenera pod dane na Dropbox</h2>
<p>Przede wszystkim, musimy utworzyć plik składający się z samych zer. Tak stworzony plik umieszczamy
na Dropbox. Sam plik może być dowolnego rozmiaru i nie ma tutaj znaczenia czy będzie to 100 MiB
czy 10GiB. Liczy się tylko to ile miejsca chcemy przeznaczyć na Dropbox na szyfrowane pliki.
Najciekawsze w tym wszystkim jest to, że plik składający się z samych zer zostanie przed wysłaniem
do chmury skompresowany, a kompresja samych zer daje wynik porównywalny z zerem. I tak, np. 10 GiB
plik będzie zajmować parę KiB, co oczywiście cieszy, bo nie będzie trzeba wysyłać do chmury całych
10GiB danych.</p>
<p>Na sam początek zatrzymujemy synchronizację plików w Dropbox i przechodzimy do katalogu gdzie
mamy swoją lokalną kopię plików. W nim tworzymy plik kontenera LUKS:</p>
<pre><code>$ cd /media/Server/Dropbox/
$ dropbox status
Syncing paused

$ dd if=/dev/zero of=./luks_dropbox bs=2M count=500
</code></pre>
<p>Puszczamy synchronizację i po chwili kontener powinien zostać przesłany do chmury. Stan
synchronizacji możemy sprawdzić w poniższy sposób:</p>
<pre><code>$ dropbox filestatus

luks_dropbox:        up to date
</code></pre>
<p>Ponownie wstrzymujemy synchronizację plików, po czym logujemy się na konto root w celu przygotowania
urządzenia <code>loop</code>, które zamontuje nam w systemie plik kontenera:</p>
<pre><code># losetup /dev/loop0 /media/Server/Dropbox/luks_dropbox
# losetup -a
/dev/loop0: [0807]:2883594 (/media/Server/Dropbox/luks_dropbox)
</code></pre>
<p>Teraz trzeba zaszyfrować plik kontenera przy pomocy <code>cryptsetup</code> . Pamiętajmy by wskazać urządzenie
<code>/dev/loop0</code> , a nie faktyczny plik na dysku:</p>
<pre><code># cryptsetup --cipher aes-xts-plain64 --key-size 512 --hash sha512 --iter-time 5000 --use-random --verify-passphrase --verbose luksFormat /dev/loop0
</code></pre>
<p>Otwieramy kontener i tworzymy w nim system plików:</p>
<pre><code># cryptsetup luksOpen /dev/loop0 crypt_dropbox

# mkfs.ext4 -m 0 -L dropbox /dev/mapper/crypt_dropbox
</code></pre>
<p>W tej chwili mamy przygotowany kontener na dane. Zamykamy go i synchronizujemy Dropbox'a:</p>
<pre><code># cryptsetup luksClose crypt_dropbox

$ dropbox status
Updating (1 file, 9 mins left)
Uploading &quot;luks_dropbox&quot; (70.0 kB/sec, 9 mins left)
</code></pre>
<h2 id="konfiguracja-kontenera-luks">Konfiguracja kontenera LUKS</h2>
<p>Powyższy setup powinien działać prawidłowo. Musimy jednak jeszcze nauczyć system jak automatycznie
montować ten kontener. Ja już mam w swoim systemie kilka zaszyfrowanych dysków, dlatego też u mnie
nie będzie potrzebne dodatkowe hasło, które trzeba by podawać przy starcie systemu. Hasła co prawda
są inne, i w przypadku systemu, i w przypadku kontenera dropbox ale przy pomocy ciekawej sztuczki
można uzależnić kontener Dropbox'a od klucza jakiejś zaszyfrowanej już partycji. Można też
wykasować hasło do kontenera ale wtedy uzależnimy kontener zupełnie od nagłówków tej partycji.
Jeśli te nagłówki ulegną uszkodzeniu albo przez przypadek stworzymy nowy kontener pod nowy system,
stracimy dostęp do danych na Dropbox.</p>
<p>Przede wszystkim narzędzie <code>losetup</code> musi widzieć nasz kontener:</p>
<pre><code>#  losetup -a
/dev/loop0: [0807]:2883594 (/media/Server/Dropbox/luks_dropbox)
</code></pre>
<h3 id="plik-etccrypttab">Plik /etc/crypttab</h3>
<p>Edytujemy teraz plik <code>/etc/crypttab</code> , z tym, że konfiguracja w nim zawarta będzie się różnić w
zależności od tego czy mamy już w systemie jakieś zaszyfrowane dyski, czy tez i nie. Jeśli nie
mamy, to trzeba będzie niestety podawać na starcie systemu hasło. Można też sprecyzować keyfile,
choć na niezaszyfrowanym systemie nie polecam tego rozwiązania. Keyfile jest dopuszczalną formą
uzyskania dostępu do kontenera, tylko gdy rezyduje na zaszyfrowanej przestrzeni, w chronionej przez
roota lokalizacji (prawa 400). Także jeśli nie mamy zaszyfrowanego systemu, w pliku <code>/etc/crypttab</code>
dodalibyśmy coś na wzór tej linijki poniżej:</p>
<pre><code>crypt_dropbox             /media/Server/Dropbox/luks_dropbox   none      luks,noauto
</code></pre>
<p>Ja nie będę się zajmował powyższym rozwiązaniem, bo jest ono wielce niepraktyczne. Dlatego ja
wykorzystuje pełne szyfrowanie dysku i jak zobaczymy poniżej, to powoli zaczyna ułatwiać życie.</p>
<p>Tak powinien mniej więcej wyglądać plik <code>/etc/crypttab</code> przy posiadaniu zaszyfrowanego dysku
systemowego:</p>
<pre><code>sda2_crypt         UUID=727fa348-8804-4773-ae3d-f3e176d12dac   none      luks
crypt_dropbox     /media/Server/Dropbox/luks_dropbox              sda2_crypt  luks,keyscript=/lib/cryptsetup/scripts/decrypt_derived,noauto
</code></pre>
<p>Teraz jeszcze trzeba wyciągnąć 128 znakowy ciąg z tabeli <code>dmsetup</code> :</p>
<pre><code># dmsetup table --showkeys
</code></pre>
<p>Odczytujemy ten długi ciąg znaków przy pozycji <code>sda2_crypt</code> i dodajemy go do nagłówka kontenera LUKS
jako hasło:</p>
<pre><code># cryptsetup luksAddKey /media/Server/Dropbox/luks_dropbox
</code></pre>
<p>Sprawdzamy czy są zajęte dwa sloty:</p>
<pre><code># cryptsetup luksDump /media/Server/Dropbox/luks_dropbox
...
Key Slot 0: ENABLED
...
Key Slot 1: ENABLED
...
</code></pre>
<p>Zamykany kontener:</p>
<pre><code># cryptsetup luksClose crypt_dropbox

# losetup -D
</code></pre>
<h3 id="plik-etcfstab">Plik /etc/fstab</h3>
<p>Otwórzmy raz jeszcze kontener z plikami Dropbox'a, bo jakby nie patrzeć, to nie jest koniec naszej
pracy. Musimy min. dodać odpowiedni wpis w <code>/etc/fstab</code> . By to zrobić trzeba uzyskać UUID systemu
plików w kontenerze:</p>
<pre><code># tune2fs -l /dev/mapper/crypt_dropbox | grep UUID
Filesystem UUID:          0d959e74-ec19-43bf-b779-60134c676aef
</code></pre>
<p>Edytujemy plik <code>/etc/fstab</code> i dodajemy tam poniższy wpis:</p>
<pre><code># dropbox
UUID=0d959e74-ec19-43bf-b779-60134c676aef /media/Dropbox    ext4  defaults,noauto,user,nofail,noatime,commit=20   0 2
</code></pre>
<p>Tworzymy także punkt montowania w katalogu <code>/media/</code> :</p>
<pre><code># mkdir /media/Dropbox
</code></pre>
<h3 id="generowanie-nowego-initramfs">Generowanie nowego initramfs</h3>
<p>Po dostosowaniu plików <code>/etc/crypttab</code> i <code>/etc/fstab</code> musimy wygenerować nowy initramfs przy pomocy
poniższego polecenia:</p>
<pre><code># update-initramfs -u -k all
</code></pre>
<p>W tej chwili system będzie w stanie wykorzystać hexalną wartość klucza partycji systemowej do
odblokowania kontenera przeznaczonego pod pliki Dropbox'a. Możemy sprawdzić czy tak faktycznie się
stanie. By otworzyć kontener wydajemy poniższe polecenie:</p>
<pre><code># cryptdisks_start crypt_dropbox
</code></pre>
<p>By zamknąć:</p>
<pre><code># cryptdisks_stop crypt_dropbox
</code></pre>
<p>Skrypty <code>cryptdisks_start</code> oraz <code>cryptdisks_stop</code> działają w oparciu o plik <code>/etc/crypttab</code> i by z
nich skorzystać, trzeba mieć w tym pliku zdefiniowane kontenery.</p>
<h3 id="problemy-z-odblokowaniem-kontenera-luks">Problemy z odblokowaniem kontenera LUKS</h3>
<p>Przy otwieraniu kontenera możemy napotkać na pewien problem. Mianowicie, ten kontener znajduje się
na partycji, a jej system plików z kolei trzeba pierw zamontować by uzyskać dostęp do znajdującego
się na nim kontenera. To powoduje, że nie można ustawić automatycznego otwarcia kontenera przy
starcie systemu w <code>/etc/crypttab</code> . Jeśli się przyjrzymy bliżej temu plikowi, to dostrzeżemy tam
opcję <code>noauto</code>. Jeśli nie można otworzyć kontenera na starcie, nie można też zamontować
automatycznie jego systemu plików. A to z kolei obeszliśmy przez opcję <code>noauto</code> w pliku
<code>/etc/fstab</code> .</p>
<p>Problem jest jeszcze taki, że mimo iż kontener nie jest otwierany, a jego system plików nie jest
montowany to i tak podczas startu systemu jest wyrzucany błąd o braku urządzenia z UUID naszego
kontenera. Opcja <code>nofail</code> w <code>/etc/fstab</code> rozwiązuje ten problem i tłumi ten komunikat.</p>
<h2 id="automatyczne-montowanie-systemu-plików-kontenera">Automatyczne montowanie systemu plików kontenera</h2>
<p>Obecnie, za sprawą opcji, które ustawiliśmy, ani kontener nie jest otwierany na starcie, ani system
plików nie jest montowany. To chyba nie tak miało wyglądać, prawda? Oczywiście, że nie. Musimy
stworzyć dwa pliki w katalogu <code>/etc/systemd/system/</code> , które będą wchodzić w skład potrzebnej nam
usługi.</p>
<p>Plik <code>systemd-cryptsetup@dropbox.service</code> :</p>
<pre><code>[Unit]
Description=Cryptography Setup for %I
Documentation=man:cryptdisks_start man:cryptdisks_stop man:systemd-cryptsetup@.service(8)
IgnoreOnIsolate=true
DefaultDependencies=no
Requires=media-Kabi.mount
After=cryptsetup-pre.target
After=systemd-fsck-root.service
After=media-Kabi.mount
Before=systemd-fsck@dev-mapper-crypt_dropbox.service
Before=cryptsetup.target
Before=media-Dropbox.mount
Before=umount.target shutdown.target
Conflicts=umount.target shutdown.target
ConditionPathExists=/media/Kabi/luks_dropbox

[Service]
Type=oneshot
RemainAfterExit=yes
TimeoutSec=30
ExecStart=/lib/systemd/systemd-cryptsetup attach 'crypt_dropbox' '/media/Kabi/luks_dropbox' 'none' 'luks'
ExecStop=/lib/systemd/systemd-cryptsetup detach 'crypt_dropbox'

[Install]
WantedBy=cryptsetup.target
</code></pre>
<p>Plik <code>media-Dropbox.mount</code> :</p>
<pre><code>[Unit]
Documentation=man:fstab(5)
Requires=systemd-fsck@dev-mapper-crypt_dropbox.service
Requires=systemd-cryptsetup@crypt_dropbox.service
Requires=media-Kabi.mount
After=systemd-fsck@dev-mapper-crypt_dropbox.service
After=systemd-cryptsetup@crypt_dropbox.service
After=media-Kabi.mount
Before=local-fs.target

[Mount]
What=/dev/mapper/crypt_dropbox
Where=/media/Dropbox
Type=ext4
Options=defaults,errors=remount-ro,commit=20,loop=/dev/loop5
</code></pre>
<p>Dodajemy jeszcze <code>systemd-cryptsetup@dropbox.service</code> do autostartu systemu:</p>
<pre><code># systemctl enable systemd-cryptsetup@dropbox.service
</code></pre>
<p>I to by było w zasadzie wszystko. Po starcie systemu, kontener zostanie otworzony a jego system
plików zamontowany. Przy czym, taki otwarty kontener jest przez dropboxa traktowany jako plik w
fazie edycji.</p>
<h2 id="ochrona-kontenera-z-plikami-dropboxa">Ochrona kontenera z plikami Dropbox'a</h2>
<p>Jeszcze kilka słów na temat tego w jaki sposób dostęp do kontenera dropbox powinien być chroniony.
Słabe hasło najlepiej jest zastąpić przez keyfile. Oczywiście sposób uzyskiwania dostępu do
kontenera zostaje taki sam ale na wypadek problemów z zależną partycją musimy mieć jakieś
zabezpieczenie, by dane z Dropbox'a nie przepadły. Najlepiej stworzyć keyfile w oparciu o plik
binarny, który jest trzymany &quot;w głębokim ukryciu&quot;. Głębokie ukrycie będzie polegało na wybraniu
jakiegoś pliku, który rezyduje na naszym dysku ale jest już używany w jakiś sposób, np. plik mp3 czy
avi.</p>
<p>Teraz przy pomocy <code>--new-keyfile-size=</code> oraz <code>--new-keyfile-offset=</code> możemy wskazać, od której
części pliku ma się zaczynać nasz keyfile oraz jak długi ma on być. Przykład wykorzystania takiego
mechanizmu:</p>
<pre><code>cryptsetup luksAddKey --new-keyfile-size=2048 --new-keyfile-offset=4096 '/media/Server/Dropbox/luks_dropbox' '/media/mp3/mp3.mp3'
</code></pre>
<p>Jeśli spróbowalibyśmy otworzyć ten kontener przy pomocy powyższego pliku, nie uda nam się ta
operacja:</p>
<pre><code># cryptsetup luksOpen  '/media/Server/Dropbox/luks_dropbox' crypt_dropbox --key-file='/media/mp3/mp3.mp3'
No key available with this passphrase.
</code></pre>
<p>Podobnie sprawa ma się w przypadku podania niewłaściwych parametrów, tj. rozmiaru i offsetu pliku
klucza:</p>
<pre><code># cryptsetup luksOpen '/media/Server/Dropbox/luks_dropbox' crypt_dropbox --key-file='/media/mp3/mp3.mp3' --keyfile-offset=4095 --keyfile-size=2048
No key available with this passphrase.

# cryptsetup luksOpen '/media/Server/Dropbox/luks_dropbox' crypt_dropbox --key-file='/media/mp3/mp3.mp3' --keyfile-offset=4096 --keyfile-size=2047
No key available with this passphrase.
</code></pre>
<p>Powyżej został pokazany prosty przykład, jednak wartościami <code>offset</code> i <code>size</code> można dowolnie
manipulować i ustawić można sobie dowolne wartości i nawet jeśli już ktoś wejdzie w posiadanie
naszego pliku, to będzie musiał znać 2 parametry by odblokować kontener. Możliwe jest, co prawda,
zdefiniowanie tego keyfile w <code>/etc/crypttab</code> i użycie go do odblokowania kontenera ale ja bym tego
nie robił. Można tym zdradzić położenie keyfile no i oczywiście wartości <code>offset</code> i <code>size</code> . Lepiej
zostawić ten keyfile jako backup.</p>
<p>W przypadku zrobienia backupu w postaci keyfile, trzeba pamiętać też o wyczyszczeniu odpowiednich
slotów w nagłówku kontenera LUKS. Służy do tego <code>cryptsetup luksKillSlot</code>:</p>
<pre><code># cryptsetup luksKillSlot '/media/Server/Dropbox/luks_dropbox' 0
Enter any remaining passphrase:
</code></pre></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/bezpiecze%C5%84stwo/">bezpieczeństwo</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/szyfrowanie/">szyfrowanie</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/online-storage/">online-storage</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/luks/">luks</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&amp;text=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&amp;title=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&amp;title=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&title=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&amp;title=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fdropbox-i-kontener-luks%2f&description=Dropbox%20i%20kontener%20LUKS" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/kontener-truecrypt-trzymany-na-dropboxie/">Kontener TrueCrypt trzymany na dropbox&#39;ie</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/przejscie-z-truecrypt-na-luks/">Przejście z Truecrypt na LUKS</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/implementacja-encfs-na-dropboxie/">Implementacja encfs na dropbox&#39;ie</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/zaszyfrowana-przestrzen-wymiany-swap/">Zaszyfrowana przestrzeń wymiany SWAP</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/szyfrowanie-katalogu-home-przy-pomocy-encfs/">Szyfrowanie katalogu /home/ przy pomocy encfs</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/serwer-kluczy-gpg-i-kwestia-prywatnosci/">Serwer kluczy GPG i kwestia prywatności</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/generowanie-certyfikatow-przy-pomocy-easy-rsa/">Generowanie certyfikatów przy pomocy easy-rsa</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script>
  var id =  192 ;

  if (id)
  {
    let url = "https://github.com/morfikov/morfitronik-comments/issues/".concat(id);
    let api_url = "https://api.github.com/repos/morfikov/morfitronik-comments/issues/".concat(id, "/comments");

    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Komentarze dla tego postu nie zostały jeszcze otworzone (albo skrypty GitHub'a są wyłączone).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h3");
        mainHeader.innerHTML = "Komentarze: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>Możesz zostawić komentarz korzystając z <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);

        comments.forEach(function(comment)
        {
			const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Europe/Warsaw' };
			options.timeZoneName = 'short';
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " | <em>", (new Date(comment.created_at)).toLocaleTimeString('pl-PL', options), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Wystąpił jakiś błąd przy ładowaniu komentarzy.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2021 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
		<img alt="Licencja Creative Commons" style="border-width:0" src="https://licensebuttons.net/l/by-nc-sa/4.0/80x15.png" />
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
</body>
</html>

<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Moduł TPE (Trusted Path Execution) dla kernela linux | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Moduł TPE (Trusted Path Execution) dla kernela linux" />
<meta property="og:description" content="Użytkownicy linux&#39;a są zwykle chronieni przez mechanizmy bezpieczeństwa, które ten system jest w
stanie zaoferować. Oczywiście deweloperzy różnych dystrybucji, np. Debiana, dokładają wszelkich
możliwych starań, by system jako całość był wstępnie skonfigurowany tak, by końcowy użytkownik nie
musiał za wiele majstrować przy zabezpieczeniach i mógł się czuć i być (przynajmniej względnie)
bezpieczny. No i faktycznie złowrogie oprogramowanie ma czasem spore problemy dostać się do maszyny,
którą operuje linux. Niemniej jednak, gdy już taki syf się do systemu dostanie, to zwykle niewiele
dzieli go od przejęcia kontroli nad komputerem. Może i część zabezpieczeń linux&#39;a zadziała i sprawi,
że taki wirus/trojan czy nawet zwykły skrypt będzie miał ograniczone pole manewru, to i tak będzie
on mógł przeprowadzić te akcje, które zwyczajny użytkownik systemu (nie root) jest zwykle w stanie
poczynić, np. odebrać dźwięk i video ze stosownych urządzeń i przesłać te dane przez sieć. My z
kolei możemy nawet tego faktu nie być świadomi. Jasne, że powinno się zwracać uwagę na to jakie
pliki się pobiera z internetu i nie uruchamiać wszystkiego lekkomyślnie ale też trzeba mieć na
uwadze fakt, że często jedna maszyna jest współdzielona, np. z członkami rodziny i oni już
niekoniecznie muszą władać zaawansowaną wiedza z zakresu IT, by przewidzieć wszystkie możliwe
zagrożenia czyhające na nich w sieci. Można za to postarać się, by uczynić naszą maszynę nieco
bardziej odporną na niezbyt przemyślane zachowania użytkowników jej systemu operacyjnego. Jednym z
kroków, które możemy podjąć, jest wdrożenie mechanizmu Trusted Path Execution (TPE), który póki co
jest dostępny jedynie w formie patch&#39;a na kernel
linux&#39;a lub też jako jego osobny moduł oferujący sporo
więcej możliwości w stosunku do wspomnianej wcześniej łaty. W niniejszym artykule rzucimy sobie
okiem na ten cały mechanizm TPE i zobaczymy jak jest on w stanie uchronić nasz OS przed niezbyt
zaawansowaną ludzką inteligencją." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/modul-tpe-trusted-path-execution-dla-kernela-linux/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-03-22T20:10:11+00:00" />
<meta property="article:modified_time" content="2019-03-22T20:10:11+00:00" />

		<meta itemprop="name" content="Moduł TPE (Trusted Path Execution) dla kernela linux">
<meta itemprop="description" content="Użytkownicy linux&#39;a są zwykle chronieni przez mechanizmy bezpieczeństwa, które ten system jest w
stanie zaoferować. Oczywiście deweloperzy różnych dystrybucji, np. Debiana, dokładają wszelkich
możliwych starań, by system jako całość był wstępnie skonfigurowany tak, by końcowy użytkownik nie
musiał za wiele majstrować przy zabezpieczeniach i mógł się czuć i być (przynajmniej względnie)
bezpieczny. No i faktycznie złowrogie oprogramowanie ma czasem spore problemy dostać się do maszyny,
którą operuje linux. Niemniej jednak, gdy już taki syf się do systemu dostanie, to zwykle niewiele
dzieli go od przejęcia kontroli nad komputerem. Może i część zabezpieczeń linux&#39;a zadziała i sprawi,
że taki wirus/trojan czy nawet zwykły skrypt będzie miał ograniczone pole manewru, to i tak będzie
on mógł przeprowadzić te akcje, które zwyczajny użytkownik systemu (nie root) jest zwykle w stanie
poczynić, np. odebrać dźwięk i video ze stosownych urządzeń i przesłać te dane przez sieć. My z
kolei możemy nawet tego faktu nie być świadomi. Jasne, że powinno się zwracać uwagę na to jakie
pliki się pobiera z internetu i nie uruchamiać wszystkiego lekkomyślnie ale też trzeba mieć na
uwadze fakt, że często jedna maszyna jest współdzielona, np. z członkami rodziny i oni już
niekoniecznie muszą władać zaawansowaną wiedza z zakresu IT, by przewidzieć wszystkie możliwe
zagrożenia czyhające na nich w sieci. Można za to postarać się, by uczynić naszą maszynę nieco
bardziej odporną na niezbyt przemyślane zachowania użytkowników jej systemu operacyjnego. Jednym z
kroków, które możemy podjąć, jest wdrożenie mechanizmu Trusted Path Execution (TPE), który póki co
jest dostępny jedynie w formie patch&#39;a na kernel
linux&#39;a lub też jako jego osobny moduł oferujący sporo
więcej możliwości w stosunku do wspomnianej wcześniej łaty. W niniejszym artykule rzucimy sobie
okiem na ten cały mechanizm TPE i zobaczymy jak jest on w stanie uchronić nasz OS przed niezbyt
zaawansowaną ludzką inteligencją."><meta itemprop="datePublished" content="2019-03-22T20:10:11+00:00" />
<meta itemprop="dateModified" content="2019-03-22T20:10:11+00:00" />
<meta itemprop="wordCount" content="2347">
<meta itemprop="keywords" content="debian,kernel,moduły-kernela,tpe," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Moduł TPE (Trusted Path Execution) dla kernela linux"/>
<meta name="twitter:description" content="Użytkownicy linux&#39;a są zwykle chronieni przez mechanizmy bezpieczeństwa, które ten system jest w
stanie zaoferować. Oczywiście deweloperzy różnych dystrybucji, np. Debiana, dokładają wszelkich
możliwych starań, by system jako całość był wstępnie skonfigurowany tak, by końcowy użytkownik nie
musiał za wiele majstrować przy zabezpieczeniach i mógł się czuć i być (przynajmniej względnie)
bezpieczny. No i faktycznie złowrogie oprogramowanie ma czasem spore problemy dostać się do maszyny,
którą operuje linux. Niemniej jednak, gdy już taki syf się do systemu dostanie, to zwykle niewiele
dzieli go od przejęcia kontroli nad komputerem. Może i część zabezpieczeń linux&#39;a zadziała i sprawi,
że taki wirus/trojan czy nawet zwykły skrypt będzie miał ograniczone pole manewru, to i tak będzie
on mógł przeprowadzić te akcje, które zwyczajny użytkownik systemu (nie root) jest zwykle w stanie
poczynić, np. odebrać dźwięk i video ze stosownych urządzeń i przesłać te dane przez sieć. My z
kolei możemy nawet tego faktu nie być świadomi. Jasne, że powinno się zwracać uwagę na to jakie
pliki się pobiera z internetu i nie uruchamiać wszystkiego lekkomyślnie ale też trzeba mieć na
uwadze fakt, że często jedna maszyna jest współdzielona, np. z członkami rodziny i oni już
niekoniecznie muszą władać zaawansowaną wiedza z zakresu IT, by przewidzieć wszystkie możliwe
zagrożenia czyhające na nich w sieci. Można za to postarać się, by uczynić naszą maszynę nieco
bardziej odporną na niezbyt przemyślane zachowania użytkowników jej systemu operacyjnego. Jednym z
kroków, które możemy podjąć, jest wdrożenie mechanizmu Trusted Path Execution (TPE), który póki co
jest dostępny jedynie w formie patch&#39;a na kernel
linux&#39;a lub też jako jego osobny moduł oferujący sporo
więcej możliwości w stosunku do wspomnianej wcześniej łaty. W niniejszym artykule rzucimy sobie
okiem na ten cały mechanizm TPE i zobaczymy jak jest on w stanie uchronić nasz OS przed niezbyt
zaawansowaną ludzką inteligencją."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Moduł TPE (Trusted Path Execution) dla kernela linux</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2019-03-22T20:10:11Z">Opublikowano: 22/03/2019</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Moduł TPE (Trusted Path Execution) dla kernela linux</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#czym-jest-trusted-path-execution-tpe">Czym jest Trusted Path Execution (TPE)</a></li>
    <li><a href="#patch-na-kernel-czy-osobny-moduł-tpe">Patch na kernel czy osobny moduł TPE</a>
      <ol>
        <li><a href="#problemy-z-modułempatchem-tpe">Problemy z modułem/patch'em TPE</a></li>
      </ol>
    </li>
    <li><a href="#co-oferuje-moduł-tpe">Co oferuje moduł TPE</a></li>
    <li><a href="#różnice-modułu-tpe-w-stosunku-do-łatki-kernela">Różnice modułu TPE w stosunku do łatki kernela</a></li>
    <li><a href="#problemy-z-uruchamianiem-aplikacji">Problemy z uruchamianiem aplikacji</a></li>
    <li><a href="#testowanie-trusted-path-execution">Testowanie Trusted Path Execution</a></li>
    <li><a href="#dodatkowe-zabezpieczenia">Dodatkowe zabezpieczenia</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Użytkownicy linux'a są zwykle chronieni przez mechanizmy bezpieczeństwa, które ten system jest w
stanie zaoferować. Oczywiście deweloperzy różnych dystrybucji, np. Debiana, dokładają wszelkich
możliwych starań, by system jako całość był wstępnie skonfigurowany tak, by końcowy użytkownik nie
musiał za wiele majstrować przy zabezpieczeniach i mógł się czuć i być (przynajmniej względnie)
bezpieczny. No i faktycznie złowrogie oprogramowanie ma czasem spore problemy dostać się do maszyny,
którą operuje linux. Niemniej jednak, gdy już taki syf się do systemu dostanie, to zwykle niewiele
dzieli go od przejęcia kontroli nad komputerem. Może i część zabezpieczeń linux'a zadziała i sprawi,
że taki wirus/trojan czy nawet zwykły skrypt będzie miał ograniczone pole manewru, to i tak będzie
on mógł przeprowadzić te akcje, które zwyczajny użytkownik systemu (nie root) jest zwykle w stanie
poczynić, np. odebrać dźwięk i video ze stosownych urządzeń i przesłać te dane przez sieć. My z
kolei możemy nawet tego faktu nie być świadomi. Jasne, że powinno się zwracać uwagę na to jakie
pliki się pobiera z internetu i nie uruchamiać wszystkiego lekkomyślnie ale też trzeba mieć na
uwadze fakt, że często jedna maszyna jest współdzielona, np. z członkami rodziny i oni już
niekoniecznie muszą władać zaawansowaną wiedza z zakresu IT, by przewidzieć wszystkie możliwe
zagrożenia czyhające na nich w sieci. Można za to postarać się, by uczynić naszą maszynę nieco
bardziej odporną na niezbyt przemyślane zachowania użytkowników jej systemu operacyjnego. Jednym z
kroków, które możemy podjąć, jest wdrożenie mechanizmu Trusted Path Execution (TPE), który póki co
jest dostępny jedynie w <a href="https://patchwork.kernel.org/patch/9773791/">formie patch'a</a> na kernel
linux'a lub też jako jego <a href="https://github.com/cormander/tpe-lkm">osobny moduł</a> oferujący sporo
więcej możliwości w stosunku do wspomnianej wcześniej łaty. W niniejszym artykule rzucimy sobie
okiem na ten cały mechanizm TPE i zobaczymy jak jest on w stanie uchronić nasz OS przed niezbyt
zaawansowaną ludzką inteligencją.</p>
<h2 id="czym-jest-trusted-path-execution-tpe">Czym jest Trusted Path Execution (TPE)</h2>
<p>Trusted Path Execution (TPE) to mechanizm zabezpieczający przed próbą wykonania plików ze ścieżek
niezaufanych. Ścieżki zaufane to takie, w których root jest właścicielem katalogu zawierającego
pliki wykonywalne oraz pliki w tym katalogu mogą być zapisywane jedynie przez niego. Dla przykładu,
katalog <code>/bin/</code> , <code>/usr/bin/</code> czy też <code>/usr/local/bin/</code> są uważane za ścieżki zaufane, podczas gdy
katalogi zwykłego użytkownika, np. <code>/home/morfik/bin/</code> , jak i katalog <code>/tmp/</code> nie są już
traktowane jako zaufane, bo pliki w nich może zapisać albo użytkownik inny niż root, albo też może
to zrobić dowolny użytkownik systemu.</p>
<p>Jeśli dowolny użytkownik systemu jest w stanie w obrębie swojego katalogu domowego zapisać jakiś
plik, np. po pobraniu go z internetu czy skopiowaniu z pendrive, i jednocześnie ten sam użytkownik
ma możliwość uruchomić taki plik, to tego typu sytuacja  stwarza w zasadzie nieograniczone pole
manewru dla złośliwego oprogramowania. Pamiętajmy przy tym, że jeśli mamy do czynienia z sesją
graficzną (np. mamy uruchomione środowisko graficzne na bazie Xorg'a), to zwykły użytkownik może
mieć dostęp do klawiatury, myszy, obrazu (w tym webcam) i dźwięku (również mikrofon). Jeżeli zwykły
użytkownik ma dostęp do tych urządzeń, to złośliwy skrypt, który taki użytkownik uruchomi, też
będzie go miał, przez co będzie w stanie on nas podglądać z kamery, nagrywać dźwięk z mikrofonu
oraz rejestrować przyciśnięcia klawiszy.</p>
<p>By zaradzić tego typu problemom powstał właśnie Trusted Path Execution (TPE) , bo skutecznie
uniemożliwia on uruchamianie się różnych rzeczy w systemie, nawet jeśli dany użytkownik miałby na
to wielką ochotę. Po prostu wymagane jest, by administrator, który trzyma pieczę nad tą konkretną
linux'ową maszyną, rzucił okiem na dany plik wykonywalny i ocenił go pod kątem negatywnego wpływu
na system. Każda potajemna próba uruchomienia pliku bez świadomej zgody ze strony administratora
systemu zwyczajnie się nie powiedzie, a zdarzenie przy tym zostanie odnotowane w logu.</p>
<h2 id="patch-na-kernel-czy-osobny-moduł-tpe">Patch na kernel czy osobny moduł TPE</h2>
<p>By wdrożyć u siebie mechanizm Trusted Path Execution (TPE), musimy się zdecydować czy zamierzymy
korzystać z patch'a na kernel linux'a, czy też wolimy osobny moduł ładowany wraz ze startem systemu
operacyjnego. Jeśli nasz kernel nie posiada modułów i całą swoją funkcjonalność ma wkompilowaną na
stałe, to być może lepszym wyjściem okaże się skorzystanie z łaty na kernel. Niemniej jednak, ten
patch jest dość ubogi jeśli chodzi o oferowane mechanizmy ochrony i w zasadzie daje on nam jedynie
podstawowe zabezpieczenie w postaci ochrony plików wykonywalnych. Osobny moduł TPE z kolei potrafi
o wiele więcej, np. w kwestii odmowy dostępu zwykłym użytkownikom systemowym do plików takich jak
<code>/proc/modules</code>  czy <code>/proc/kallsyms</code> albo też jest w stanie uniemożliwić podglądanie procesów
innych użytkowników czy nawet sprawdzenie wersji jądra operacyjnego poleceniem <code>uname -a</code> . To
oczywiście tylko wierzchołek góry możliwości modułu TPE.</p>
<p>Tak czy inaczej, Jeśli chcemy mieć jedynie TPE bez tych dodatkowych mechanizmów zbrojących, to
wystarczy nam w zasadzie sama łata na kernel linux'a. Niemniej jednak, aplikowanie łaty wymusza na
nas <a href="https://morfikov.github.io/post/budowanie-kernela-linux-dla-konkretnej-maszyny-z-debianem/">posiadanie własnego kernela</a>,
który trzeba będzie sobie zbudować. Jeśli to zadanie nas przerasta, to opcją alternatywną jest
skorzystanie z
modułu, <a href="https://morfikov.github.io/post/jak-na-debianie-zrobic-pakiet-deb-zawierajacy-modul-kernela-linux-dkms/">choć go również trzeba zbudować</a>,
z tym, że za pomocą <a href="https://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support">mechanizmu DKMS</a>.
Oczywiście można pójść na skróty i pobrać repozytorium git na dysk i dać <code>make</code> i <code>make install</code> .
Sposób instalacji modułu nie jest istotny, za to liczy się efekt posiadania go w systemie.</p>
<h3 id="problemy-z-modułempatchem-tpe">Problemy z modułem/patch'em TPE</h3>
<p>W moim przypadku po zbudowaniu kernela z łatą TPE system działał w miarę normalnie, choć część
opcji, które można było ustawić za pomocą tego patch'a, nie działała. Niemniej jednak, ograniczenie
dostępu do plików wykonywalnych spełniało swoją rolę. Dodatkowo, pojawiły się pewne problemy w
przypadku Docker'a i odmontowania systemu plików <code>overlayfs</code> , co z kolei powodowało BUG'a w
kernelu. Można zatem przypuszczać, że ta łatka na kernel nie jest należycie dopracowana i jeśli
ktoś chciałby TPE wdrożyć u siebie, to jednak lepiej zainteresować się osobnym modułem, który
działa o wiele lepiej.</p>
<p>Niestety modułowi też się dostanie, bo z racji bardzo szybkich zmian, które przechodzi kernel
linux'a, pewne mechanizmy oferowane przez moduł TPE nie do końca są sprawne. Jednym z nich jest
ukrycie numeru wersji kernela (w <code>uname -a</code>), choć to akurat nie jest zbyt uporczywe. Ale, np.
niedziałająca opcja whitelist'owania aplikacji może już się dać we znaki. Pozostałe rzeczy zdają
się działać prawidłowo. Te problemy zgłosiłem już twórcy modułu i być może w niedługim czasie
zostaną one poprawione.</p>
<h2 id="co-oferuje-moduł-tpe">Co oferuje moduł TPE</h2>
<p>Poniżej znajduje się lista opcji modułu TPE, które administrator systemu może ustawić za pomocą
pliku <code>/etc/sysctl.conf</code> . Wszystkie parametry posiadają ustawienia domyślne (w nawiasach), przez
co nie trzeba ich wyraźnie definiować jeśli nam te ustawienia odpowiadają. Większość opcji można
włączyć lub wyłączyć stosując odpowiednio <code>1</code> lub <code>0</code> .</p>
<ul>
<li><code>tpe.paranoid</code> -- mechanizm TPE będzie również aplikowany dla administratora systemu (wyłączone).</li>
<li><code>tpe.hardcoded_path</code> -- lista katalogów (oddzielonych dwukropkiem), które będą uznane przez
mechanizm TPE jako zaufane. W ten sposób żaden plik, za wyjątkiem tych znajdujących się w
katalogach określonych tutaj, nie będzie mógł zostać wykonany/zmapowany. Lepiej się zastanowić dwa
razy, zanim się tutaj jakąś ścieżkę określi (puste).</li>
<li><code>tpe.extras.lsmod</code> -- nie zezwala zwykłym użytkownikom na odczyt pliku <code>/proc/modules</code> (włączone).</li>
<li><code>tpe.extras.proc_kallsyms</code> -- nie zezwala zwykłym użytkownikom na odczyt pliku <code>/proc/kallsyms</code>
(włączone).</li>
<li><code>tpe.extras.harden_ptrace</code> -- nie zezwala zwykłym użytkownikom na wykonanie operacji <code>ptrace</code>
(włączone).</li>
<li><code>tpe.extras.hide_uname</code> -- nie zezwala zwykłym użytkownikom na odczyt wersji kernela, np. przy
użyciu polecenia <code>uname -a</code> (wyłączone).</li>
<li><code>tpe.extras.ps</code> -- nie zezwala zwykłym użytkownikom na podglądanie procesów innych użytkowników
(wyłączone).</li>
<li><code>tpe.extras.ps_gid</code> -- określa grupę, do której użytkownik musi zostać dodany, by być w stanie
podglądać procesy innych użytkowników (gdy <code>extras.ps</code> jest ustawiony na <code>1</code> ) (wyłączone).</li>
<li><code>tpe.extras.restrict_setuid</code> -- nie zezwala zwykłym użytkownikom niebędący w grupie określonej
przez <code>trusted_gid</code> używać wywołań <code>setuid()</code> (wyłączone).</li>
<li><code>tpe.trusted_gid</code> -- określa identyfikator zaufanej grupy, której członkowie będą wyjęci spod
działania mechanizmu TPE (wyłączone).</li>
<li><code>tpe.trusted_apps</code> -- pliki określone tutaj (oddzielone przecinkami) będą wyjęte spod działania
mechanizmu TPE (puste).</li>
<li><code>tpe.trusted_invert</code> -- gdy ustawiony na <code>1</code> , znaczenie parametru <code>trusted_gid</code> ulega zmianie. W
takim przypadku, tylko użytkownicy grupy określonej w <code>trusted_gid</code> będą podlegać mechanizmowi TPE
(wyłączone).</li>
<li><code>tpe.admin_gid</code> -- określa grupę, której pliki będą traktowane jak te, których właścicielem jest
root. W ten sposób mechanizm TPE nie będzie brany pod uwagę w ich przypadku (wyłączone) .</li>
<li><code>tpe.dmz_gid</code> -- określa grupę, której użytkownicy nie mogą w ogóle wykonywać żadnych plików
(wyłączone).</li>
<li><code>tpe.softmode</code> -- określa tryb łagodny, w którym logowane są jedynie komunikaty bez faktycznego
blokowania dostępu (wyłączone).</li>
<li><code>tpe.extras.ignore_softmode</code> -- opcje <code>tpe.extras.*</code> będą aktywne nawet w trybie łagodnym
(wyłączone).</li>
<li><code>tpe.log</code> oraz <code>tpe.extras.log</code> -- gdy parametr <code>tpe.log</code> zostanie ustawiony na <code>1</code> , to odmowy
dostępu przy wykonywaniu plików będą logowane w dzienniku systemowym. Można także zalogować
dodatkowych rzeczy, np. odmowę dostępu przy odczycie pliku <code>/proc/modules</code> , przez ustawienie
<code>tpe.extras.log</code> na <code>1</code> (włączone dla obu).</li>
<li><code>tpe.log_verbose</code> -- włącza tryb rozmowy przy logowaniu, który loguje również informacje mogące
posłużyć do odblokowania zablokowanego procesu (włączone).</li>
<li><code>tpe.log_max</code> -- maksymalna ilość procesów nadrzędnych, która może zostać zalogowana w
pojedynczym wpisie logu (50).</li>
<li><code>tpe.log_floodburst</code> oraz <code>tpe.log_floodtim</code> -- włączają ratelimit dla komunikatów logowania.
Parametr <code>log_floodburst</code> określa ilość komunikatów, które system jest w stanie zalogować zanim
logowanie zostanie wstrzymane. Natomiast <code>log_floodtime</code> określa czas w sekundach jaki musi upłynąć
do ponownego włączenia logowania (5 dla obu).</li>
<li><code>tpe.kill</code> -- zabija proces wraz z procesem nadrzędnym, gdy dojdzie do odmowy dostępu ze strony
TPE przy wykonaniu pliku, chyba, że wywoła go root (wyłączone).</li>
<li><code>tpe.strict</code> -- szereg opcji mechanizmu TPE (jakich?? FIXME) będzie aplikowany również dla
zaufanych użytkowników (włączone).</li>
<li><code>tpe.group_writable</code> -- sprawdza czy plik/katalog może zostać zapisany również przez grupę
(włączone).</li>
<li><code>tpe.check_file</code> -- sprawdza właściciela i prawa dostępu również w przypadku katalogów (włączone).</li>
<li><code>tpe.lock</code> -- uniemożliwia dalsze zmiany ustawień za sprawą <code>sysctl</code> (wyłączone).</li>
<li><code>tpe.xattr_soften</code> -- sprawdza <a href="https://nfsec.pl/root/6030">rozszerzone atrybuty systemu plików</a>
w poszukiwaniu flagi <code>soften</code> . W ten sposób można zezwolić na wykonanie poszczególnych plików,
bez posługiwania się parametrem <code>tpe.trusted_apps</code> (włączone).</li>
</ul>
<h2 id="różnice-modułu-tpe-w-stosunku-do-łatki-kernela">Różnice modułu TPE w stosunku do łatki kernela</h2>
<p>Gdybyśmy zdecydowali się jedynie na założenie łatki, to opcji, które moglibyśmy wtedy ustawić, było
by sporo mniej. W zasadzie to byłyby tylko te poniższe:</p>
<ul>
<li><code>kernel.tpe.enabled</code> -- włącza mechanizm TPE, przez co niezaufani użytkownicy nie będą mogli
wykonać plików w przypadku, gdy plik nie znajduje się w katalogu, którego właścicielem jest root
lub plik może zostać zapisany przez użytkownika innego niż root.</li>
<li><code>kernel.tpe.strict</code> -- aplikuje inny zestaw restrykcji dla wszystkich użytkowników za wyjątkiem
użytkownika root, nawet jeśli są oni zaufani, przez co wykonanie pliku może nastąpić w dwóch
przypadkach. Pierwszy: gdy plik znajduje się w katalogu, którego właścicielem jest dany użytkownik
i ten plik może być zapisywany tylko przez tego użytkownika, oraz drugi: gdy plik jest w katalogu,
którego właścicielem jest root, a sam plik może być zapisywany tylko przez niego.</li>
<li><code>kernel.tpe.restrict_root</code> -- aplikuje wszystkie restrykcje TPE dla użytkownika root, przez co
root nie będzie w stanie odpalać aplikacji/skryptów innych użytkowników.</li>
<li><code>kernel.tpe.gid</code> -- określa grupę, która będzie uważana za zaufaną. Jeśli użytkownik nie znajdzie
się w tej grupie, to będzie podlegał sprawdzaniu przez mechanizm TPE. W przypadku ustawienia tutaj
<code>0</code> , zaufana grupa zostanie wyłączona, czyniąc tym samym wszystkich użytkowników za wyjątkiem root
niezaufanymi.</li>
<li><code>kernel.tpe.invert_gid</code> -- sprawia, że grupa określona w <code>kernel.tpe.gid</code> staje się grupą
niezaufaną, przez co wszystkie inne grupy stają się zaufane. Ta opcja przydaje się w sytuacji, gdy
tylko wąskie grono użytkowników ma podlegać restrykcjom TPE.</li>
</ul>
<h2 id="problemy-z-uruchamianiem-aplikacji">Problemy z uruchamianiem aplikacji</h2>
<p>Jak widzieliśmy wyżej, moduł TPE jest dość rozbudowany jeśli chodzi o ilość opcji, co przekłada się
dość znacznie na poprawę bezpieczeństwa samego linux'a. Niestety szereg aplikacji działających w
tym systemie instaluje swoje pliki wykonywalne w katalogu <code>/home/</code> . Może i takie zachowanie jest
marginalną sprawą w przypadku dystrybucji Debian, ale nie zmienia to faktu, że po włączeniu
mechanizmu Trusted Path Execution, część programów może nam przestać działać. Do nich zaliczają się
np. Dropbox oraz kontenery Docker'a, czy też skrypt odpalający <code>conky</code> . W takiej sytuacji możemy
dodać wyjątki w parametrze <code>tpe.trusted_apps</code> (lub przez rozszerzone atrybuty pliku) lub też
przenieść pewne rzeczy pod <code>/usr/local/bin/</code> , gdzie właścicielem plików będzie root i tylko on
będzie miał prawa ich zapisu. Oczywiście to drugie rozwiązanie wymagać będzie zapewne dostosowania
konfiguracji systemu i nie zawsze będzie możliwe. Niemniej jednak, warto to uczynić w każdym z
pozostałych przypadków, bo przyniesie nam to sporo korzyści w przyszłości i wyrobi odpowiednie
nawyki przy korzystaniu z systemu.</p>
<h2 id="testowanie-trusted-path-execution">Testowanie Trusted Path Execution</h2>
<p>Zakładając, że moduł działa na ustawieniach domyślnych, spróbujmy zatem uruchomić Dropbox'a. Ta
czynność się nie powiedzie, a w logu ujrzymy jedynie poniższy komunikat:</p>
<pre><code>kernel: tpe: Denied untrusted exec of /home/morfik/.dropbox-dist/dropboxd (uid:1000) by
/usr/bin/python3.7 (uid:1000), parents: /usr/bin/python3.7 (uid:1000), /lib/systemd/systemd
(uid:0). Deny reason: directory uid not trusted
</code></pre>
<p>No i jak widać mechanizm TPE uniemożliwił uruchomienie tej aplikacji, bo UID katalogu, w których
przechowywana jest binarka <code>dropboxd</code> nie jest zaufany.</p>
<p>Rozmowy tryb logowania sprawi, że w logu pojawi się również poniższy komunikat z informacją, która
pomoże nam dodać wyjątek dla uruchamianego pliku:</p>
<pre><code>kernel: tpe: If this exec was legitimate and you cannot correct the behavior, an exception can
be made to allow this by running; setfattr -n security.tpe -v &quot;soften_exec:soften_mmap&quot;
/home/morfik/.dropbox-dist/dropboxd. To silence this message, run; sysctl tpe.log_verbose = 0
</code></pre>
<p>Czyli trzeba by wykonać poniższe polecenie jako root:</p>
<pre><code># setfattr -n security.tpe -v &quot;soften_exec:soften_mmap&quot; /home/morfik/.dropbox-dist/dropboxd
</code></pre>
<p>Co spowoduje, że zostanie dodany rozszerzony atrybut <code>security.tpe</code> o wartości
<code>soften_exec:soften_mmap</code> :</p>
<pre><code># getfattr -d -m &quot;-&quot; /home/morfik/.dropbox-dist/dropboxd

# file: home/morfik/.dropbox-dist/dropboxd
security.tpe=&quot;soften_exec:soften_mmap&quot;
</code></pre>
<p>Jeśli z jakichś przyczyn chcemy usunąć ten atrybut, robimy to w poniższy sposób:</p>
<pre><code># setfattr -x security.tpe /home/morfik/.dropbox-dist/dropboxd

# getfattr -d -m &quot;-&quot; /home/morfik/.dropbox-dist/dropboxd
</code></pre>
<p>Jeśli <code>getfattr</code> nie zwróci nam nic, to znaczy, że atrybut został usunięty i zwykły użytkownik
ponownie nie będzie w stanie uruchomić tego pliku.</p>
<p>Innym testem czy mechanizm TPE działa poprawnie jest próba podejrzenia pliku <code>/proc/modules</code> jako
zwykły użytkownik:</p>
<pre><code>$ cat  /proc/modules
cat: /proc/modules: Permission denied
</code></pre>
<p>To samo polecenie wykonane jako root zwróci już:</p>
<pre><code># cat /proc/modules
tpe 32768 - - Live 0xffffffffc02d8000 (O)
</code></pre>
<p>No w tym przypadku jest dostępny tylko jeden moduł ale jak widać zwykły użytkownik nie jest w
stanie sprawdzić jakie modły są aktualnie załadowane w systemie.</p>
<h2 id="dodatkowe-zabezpieczenia">Dodatkowe zabezpieczenia</h2>
<p>Gdy zdecydujemy się na używanie mechanizmu Trusted Path Execution, to wypadałoby także dodać do
pliku <code>/etc/sysctl.conf</code> te dwa poniższe parametry:</p>
<pre><code>kernel.modules_disabled = 1
kernel.dmesg_restrict = 1
</code></pre>
<p>Parametr <code>kernel.modules_disabled</code> steruje możliwością dynamicznego ładowania modułów. Gdy ustawi
się w nim wartość <code>1</code> , nie będzie można już załadować nowych modułów. Stan taki będzie trwał do
momentu ponownego uruchomienia systemu, gdyż wartości tej opcji nie da rady przełączyć na <code>0</code> .</p>
<p>Z kolei parametr <code>kernel.dmesg_restrict</code> umożliwia wgląd w logi kernela za pomocą <code>dmesg</code> . Jeśli
ten parametr zostanie ustawiony na <code>1</code> ,
to <a href="http://lwn.net/Articles/414813/">tylko użytkownicy posiadający CAP_SYS_ADMIN</a> będą w stanie
odczytać te logi. Domyślnie takie uprawnienia ma tylko root.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/kernel/">kernel</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/modu%C5%82y-kernela/">moduły-kernela</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/tpe/">tpe</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&amp;text=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&amp;title=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&amp;title=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&title=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&amp;title=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fmodul-tpe-trusted-path-execution-dla-kernela-linux%2f&description=Modu%c5%82%20TPE%20%28Trusted%20Path%20Execution%29%20dla%20kernela%20linux" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-recznie-zweryfikowac-sygnature-modulu-kernela-linux/">Jak ręcznie zweryfikować sygnaturę modułu kernela linux</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/automatyczne-podpisywanie-modulow-kernela-przez-dkms/">Automatyczne podpisywanie modułów kernela przez DKMS</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/dkms-czyli-automatycznie-budowane-moduly/">DKMS, czyli automatycznie budowane moduły</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-na-debianie-zrobic-pakiet-deb-zawierajacy-modul-kernela-linux-dkms/">Jak na Debianie zrobić pakiet .deb zawierający moduł kernela linux (DKMS)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/budowanie-kernela-linux-dla-konkretnej-maszyny-z-debianem/">Budowanie kernela linux dla konkretnej maszyny z Debianem</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-interfejsow-bond-bonding/">Jak skonfigurować bonding w Debian linux (eth0&#43;wlan0)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konfiguracja-interfejsow-imq-w-linuxie/">Konfiguracja interfejsów IMQ w linux&#39;ie</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script src="https://utteranc.es/client.js"
        repo="morfikov/morfitronik-comments"
        issue-term="og:title"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2023 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
const images = Array.from(document.querySelectorAll(".entry__content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'
  });
});
</script>
</body>
</html>

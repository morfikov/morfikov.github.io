<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Konfiguracja połączenia WiFi pod debianem | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Konfiguracja połączenia WiFi pod debianem" />
<meta property="og:description" content="Sieci bezprzewodowe w obecnych czasach to standard i nie ma chyba miejsca na ziemi gdzie nie dałoby
rady ulokować routera WiFi, do którego można by podłączyć szereg urządzeń. Każdy kto próbował
konfigurować sieć bezprzewodową na debianie, wie, że może to być bardzo upierdliwe, zwłaszcza jeśli
mamy dostęp do wielu AP, które posiadają różne konfiguracje. Wynaleziono, co prawda, automaty, które
mają pomagać w ogarnięciu tego całego bezprzewodowego zamieszania, np. network-manager czy wicd
ale w przypadku lekkich stacji roboczych, które nie mają wgranego pełnego środowiska graficznego, a
jedynie jakiś menadżer okien, np. Openbox, to instalacja tych powyższych narzędzi może zwyczajnie
nie wchodzić w grę." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/konfiguracja-polaczenia-wifi-pod-debianem/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2015-10-15T19:32:48+00:00" />
<meta property="article:modified_time" content="2015-10-15T19:32:48+00:00" />


		<meta itemprop="name" content="Konfiguracja połączenia WiFi pod debianem">
<meta itemprop="description" content="Sieci bezprzewodowe w obecnych czasach to standard i nie ma chyba miejsca na ziemi gdzie nie dałoby
rady ulokować routera WiFi, do którego można by podłączyć szereg urządzeń. Każdy kto próbował
konfigurować sieć bezprzewodową na debianie, wie, że może to być bardzo upierdliwe, zwłaszcza jeśli
mamy dostęp do wielu AP, które posiadają różne konfiguracje. Wynaleziono, co prawda, automaty, które
mają pomagać w ogarnięciu tego całego bezprzewodowego zamieszania, np. network-manager czy wicd
ale w przypadku lekkich stacji roboczych, które nie mają wgranego pełnego środowiska graficznego, a
jedynie jakiś menadżer okien, np. Openbox, to instalacja tych powyższych narzędzi może zwyczajnie
nie wchodzić w grę."><meta itemprop="datePublished" content="2015-10-15T19:32:48+00:00" />
<meta itemprop="dateModified" content="2015-10-15T19:32:48+00:00" />
<meta itemprop="wordCount" content="2350">
<meta itemprop="keywords" content="wifi,debian,sieć," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Konfiguracja połączenia WiFi pod debianem"/>
<meta name="twitter:description" content="Sieci bezprzewodowe w obecnych czasach to standard i nie ma chyba miejsca na ziemi gdzie nie dałoby
rady ulokować routera WiFi, do którego można by podłączyć szereg urządzeń. Każdy kto próbował
konfigurować sieć bezprzewodową na debianie, wie, że może to być bardzo upierdliwe, zwłaszcza jeśli
mamy dostęp do wielu AP, które posiadają różne konfiguracje. Wynaleziono, co prawda, automaty, które
mają pomagać w ogarnięciu tego całego bezprzewodowego zamieszania, np. network-manager czy wicd
ale w przypadku lekkich stacji roboczych, które nie mają wgranego pełnego środowiska graficznego, a
jedynie jakiś menadżer okien, np. Openbox, to instalacja tych powyższych narzędzi może zwyczajnie
nie wchodzić w grę."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Konfiguracja połączenia WiFi pod debianem</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2015-10-15T19:32:48Z">Opublikowano: 15/10/2015</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/linux/" rel="category">Linux</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Konfiguracja połączenia WiFi pod debianem</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#przestarzałe-narzędzia">Przestarzałe narzędzia</a></li>
    <li><a href="#narzędzia-do-konfiguracji-sieci-wifi">Narzędzia do konfiguracji sieci WiFi</a>
      <ol>
        <li><a href="#poufność-danych-logowania">Poufność danych logowania</a></li>
      </ol>
    </li>
    <li><a href="#plik-etcnetworkinterfaces">Plik /etc/network/interfaces</a></li>
    <li><a href="#plik-etcwpa_supplicantwpa_supplicantconf">Plik /etc/wpa_supplicant/wpa_supplicant.conf</a>
      <ol>
        <li><a href="#sekcja-globalna">Sekcja globalna</a></li>
        <li><a href="#sekcja-sieciowa">Sekcja sieciowa</a>
          <ol>
            <li><a href="#narzędzie-wpa_passphrase">Narzędzie wpa_passphrase</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#interfejs-bond">Interfejs bond</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Sieci bezprzewodowe w obecnych czasach to standard i nie ma chyba miejsca na ziemi gdzie nie dałoby
rady ulokować routera WiFi, do którego można by podłączyć szereg urządzeń. Każdy kto próbował
konfigurować sieć bezprzewodową na debianie, wie, że może to być bardzo upierdliwe, zwłaszcza jeśli
mamy dostęp do wielu AP, które posiadają różne konfiguracje. Wynaleziono, co prawda, automaty, które
mają pomagać w ogarnięciu tego całego bezprzewodowego zamieszania, np. <code>network-manager</code> czy <code>wicd</code>
ale w przypadku lekkich stacji roboczych, które nie mają wgranego pełnego środowiska graficznego, a
jedynie jakiś menadżer okien, np. Openbox, to instalacja tych powyższych narzędzi może zwyczajnie
nie wchodzić w grę.</p>
<h2 id="przestarzałe-narzędzia">Przestarzałe narzędzia</h2>
<p>W linux'ie istnieje obecnie podział na dwie grupy narzędzi, które służą do konfiguracji interfejsów
sieciowych. Jedna z nich zawiera narzędzia, które mają już swoje lata i powoli się od nich odchodzi,
choć nadal wiele osób z nich korzysta. Drugi zestaw to właśnie te narzędzia, na które ludzie
migrują. Wobec czego mamy pakiet <code>wireless-tools</code> , który został wyparty przez <code>iw</code> . Podobnie
zresztą też narzędzia zawarte w pakiecie <code>net-tools</code> , takie jak <code>ifconfig</code> , zostały zastąpione
przez narzędzia z pakietu <code>iproute2</code> .</p>
<p>W przypadku przechodzenia z <code>wireless-tools</code> na <code>iw</code> , można skorzystać ze ściągawki dostępnej <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration#Manual_setup">pod
tym adresem</a>. Jeśli chodzi zaś o <code>net-tools</code> i <code>iproute2</code> , to można skorzystać z rozpiski
znajdującej się <a href="https://www.tty1.net/blog/2010/ifconfig-ip-comparison_en.html">tutaj</a>. Więcej na temat aktualnego oprogramowania i nowszych standardów
sieciowych można poczytać i <a href="https://wireless.wiki.kernel.org/">tutaj</a>.</p>
<h2 id="narzędzia-do-konfiguracji-sieci-wifi">Narzędzia do konfiguracji sieci WiFi</h2>
<p>W tym artykule nie będziemy operować na graficznych aplikacjach, które umożliwiają w miarę szybkie
skonfigurowania połączenia WiFi. Będziemy za to korzystać z oprogramowania jakiego dostarcza nam
pakiet <code>wpasupplicant</code> . Jeśli nie mamy tego pakietu w systemie, to czym prędzej go doinstalujmy.</p>
<p>Będziemy operować na dwóch plikach. Pierwszym jest <code>/etc/network/interfaces</code> , drugim zaś
<code>/etc/wpa_supplicant/wpa_supplicant.conf</code> . W przypadku połączeń przewodowych, chyba każdy potrafi
skonfigurować sobie takie połączenie przez plik <code>/etc/network/interfaces</code> . Jeśli chodzi o
połączenia WiFi, to można postąpić podobnie, tylko trzeba dopisać trochę więcej parametrów.</p>
<p>Generalnie istnieją dwie metody konfiguracji: jedna zakłada wpisywanie opcji bezpośrednio do pliku
<code>/etc/network/interfaces</code> , druga zaś ma na celu przeniesienie konfiguracji wszystkich sieci
bezprzewodowych do osobnego pliku, tj. do <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> , który trzeba
stworzyć. Nie musimy go pisać od początku, bo dostępny jest szkielet w
<code>/usr/share/doc/wpasupplicant/examples/wpa_supplicant.conf.gz</code> , który wystarczy przekopiować do
katalogu <code>/etc/wpa_supplicant/</code> i odpowiednio przerobić. Ta druga metoda ma tę przewagę, że można
sobie zarządzać tym gdzie zostaniemy podłączeni w oparciu o określone priorytety danych sieci WiFi,
a gdy te są takie same, decydować będzie siła sygnału czy jakość zabezpieczeń.</p>
<h3 id="poufność-danych-logowania">Poufność danych logowania</h3>
<p>Z racji faktu, że w obu powyższych plikach, w zależności od konfiguracji, mogą znajdować się hasła
do sieci bezprzewodowych, dobrze jest zmienić domyślne uprawnienia tych plików na <code>600</code>:</p>
<pre><code># chmod 0600 /etc/network/interfaces
# chmod 0600 /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre>
<h2 id="plik-etcnetworkinterfaces">Plik /etc/network/interfaces</h2>
<p>Przechodzimy do edycji pliku <code>/etc/network/interfaces</code> . W moim przypadku on wygląda tak:</p>
<pre><code>auto lo
iface lo inet loopback

allow-hotplug eth1
#auto eth1
iface eth1 inet dhcp

#allow-hotplug wlan1
auto wlan1
iface wlan1 inet dhcp
      wpa-driver nl80211
      wpa-debug-level -1
      wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre>
<p>Powyższy blok kodu konfiguruje trzy interfejsy. Pierwszy z nich zwykle jest taki sam na każdej
maszynie, bo odpowiada on za pętlę zwrotną. Pozostałe będą się różnić w zależności od konfiguracji.
W każdym razie, w tym przypadku mamy po jednym interfejsie przewodowym i bezprzewodowym. Poniżej
jest krótkie wyjaśnienie wykorzystanych opcji:</p>
<ul>
<li><code>auto</code> -- odpowiada za automatyczną konfigurację interfejsu via skrypt <code>/etc/init.d/networking</code>
. Jeśli jakiś interfejs posiada opcję <code>auto</code>, będzie tym samym konfigurowany na starcie systemu.</li>
<li><code>allow-hotplug</code> -- mniej więcej to samo co <code>auto</code> , z tym, że kernel będzie próbował podnieść
interfejs za każdym razem gdy zostanie wykryte zdarzenie hotplug przez udev.</li>
<li><code>iface</code> -- definiuje parametry konfiguracyjne dla danego interfejsu. To tu określamy, czy
konfiguracja ma być przeprowadzana statycznie ( <code>static</code> ), przy czym trzeba ręcznie określić
address, network, netmask, broadcast oraz gateway, czy też dynamicznie, tj. przy pomocy
protokołu DHCP ( <code>dhcp</code> ).</li>
<li><code>wpa-</code> -- oznacza, że wykorzystywane jest oprogramowanie <code>wpasupplicant</code> i te opcje odnoszą się
do niego.</li>
</ul>
<p>W przypadku interfejsu <code>wlan1</code> profile sieci są definiowane w osobnym pliku. Konfiguracja WiFi
wymaga określenia różnych protokołów i kilku innych parametrów, których nie ma w przypadku
połączenia przewodowego. Plik konfiguracyjny definiujemy przez <code>wpa-conf</code> . Mamy tam także opcję
zdefiniowania sterownika dla karty. Nowsze modele będą bezproblemowo działać z <code>nl80211</code> , starsze
zaś mogą mieć z nim problemy i w takim przypadku trzeba tam ustawić <code>wext</code> . Jeśli nie określi się
sterownika, zostanie także użyty <code>wext</code> . Domyślnie też poziom logowania narzędzia <code>wpa_supplicant</code>
jest trochę zbyt niski i log systemowy może zbierać sporo komunikatów podobnych do tego poniżej:</p>
<pre><code>wpa_supplicant[112756]: wlan0: WPA: Group rekeying completed with f3:92:d5:21:31:14 [GTK=CCMP]
</code></pre>
<p>W zależności od częstości zmian kluczy, może tych wiadomości być więcej lub mniej. Jako, że jest to
tylko informacja, którą człowiek nie powinien sobie głowy zawracać, można ją zignorować i oczyścić
nieco log. Do tego celu służy parametr <code>wpa-debug-level</code> .</p>
<h2 id="plik-etcwpa_supplicantwpa_supplicantconf">Plik /etc/wpa_supplicant/wpa_supplicant.conf</h2>
<p>Jako, że część konfiguracji WiFi znajduje się w pliku <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> ,
rzućmy na niego okiem:</p>
<pre><code>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
eapol_version=2
ap_scan=1
country=PL
bss_max_count=200
filter_ssids=0

network={
        priority=10
        ssid=&quot;Winter Is Coming&quot;
        bssid=11:22:33:44:55:66
        #psk=&quot;Moje haslo&quot;
        psk=811339fbba9c799a6216ec3390bd1ae84680242fc0fcc918b0636a3dbe0fd310
        proto=RSN
        key_mgmt=WPA-PSK
        pairwise=CCMP
        group=CCMP
        auth_alg=OPEN
        scan_ssid=0
        disabled=0}
</code></pre>
<p>Powyższy plik składa się z dwóch części: globalnej i sieciowej. Parametry globalne, czyli te
nieujęte w <code>network={}</code> są aplikowane do każdej sieci wpisanej poniżej. Z kolei wszystko to co się
znajdzie w danym <code>network={}</code> dotyczy tylko i wyłącznie konkretnej sieci. Parametry w obu sekcjach
mogą się różnić, w zależności od tego jaki sprzęt posiadamy i gdzie przebywamy, oraz ma też wpływ
sama konfiguracja sieci na routerze. Powyższy config powinien działać w większości przypadków.</p>
<h3 id="sekcja-globalna">Sekcja globalna</h3>
<p>Sekcja globalna może zawierać <code>ctrl_interface</code> , który to składa się z dwóch opcji: <code>DIR</code> oraz
<code>GROUP</code>, z których pierwsza określa miejsce gdzie będzie tworzone gniazdo nasłuchujące zapytań od
zewnętrznych programów, np w celu konfiguracji sieci. Druga opcja odpowiada za grupę, której
członkowie będą mogli zarządzać konfiguracją WiFi, przydatne w korzystaniu z <code>wpa_cli</code> , czy też z
graficznych narzędzi, np. <code>wpa_gui</code> .</p>
<p>Możemy także określić wersję protokołu EAPOL przy pomocy <code>eapol_version</code> . Starsze urządzenia mogą
mieć problemy z obsługą wersji <code>2</code> . W takim przypadku trzeba ustawić tutaj <code>1</code> .</p>
<p>Narzędzie <code>wpa_supplicant</code> może dokonywać skanowania pasma i wybrać najlepszą sieć, do której nas
podłączy. Kwestię skanowania można zostawić sterownikowi karty albo też odpowiednio ustawić opcję
<code>ap_scan</code> .</p>
<p>Wykorzystywanie pewnych konfiguracji WiFi na terenie pewnych państw może być zakazane i by uniknąć
nieporozumień, można zdefiniować profil w oparciu o miejsce pobytu przy pomocy parametru <code>country</code> .
Zwykle jest to dwuznakowy kod państwa, np. dla Polski to będzie <code>PL</code> .</p>
<p>Jeśli w naszej okolicy jest dużo sieci bezprzewodowych, możemy ograniczyć ilość wpisów w cache za
pomocą <code>bss_max_count</code> . Wpisy są dodawane do cache przy skanowaniu pasma radiowego, po tym jak
zostanie napotkana jakaś sieć. Im jest ich więcej, tym też więcej zajmują one pamięci.</p>
<p>Istnieje również filtr sieci, który ma na celu zwrócenie jedynie tych wyników, do których posiadamy
konfiguracje. Jeśli chcemy skorzystać z tego ficzera ustawiamy <code>filter_ssids</code> .</p>
<p>Warto mieć jeszcze na uwadze parametr <code>update_config=1</code>, po zdefiniowaniu którego będzie możliwa
zmiana parametrów ustawionych w pliku <code>/etc/wpa_supplicant/wpa_supplicant.conf</code> przez zewnętrzne
narzędzia konfiguracyjne. Jednak w takim przypadku zostaną usunięte wszystkie komentarze.</p>
<h3 id="sekcja-sieciowa">Sekcja sieciowa</h3>
<p>Jeśli chodzi o część sieciową, nie trzeba definiować wszystkich wypisanych wyżej parametrów, być
może wystarczy samo <code>ssid</code> oraz <code>psk</code>. Jeśli jednak chce się mieć kontrolę nad konfiguracją i nie
ufa się zbytnio automatom, które resztę parametrów powinny sobie dobrać same, można doprecyzować
poszczególne opcje, tak jak to zostało zrobione powyżej.</p>
<p>Każda sieć musi posiadać unikalny identyfikator sieci ( <code>ssid</code> ). By się połączyć z siecią o danym
SSID, trzeba znać hasło ( <code>psk</code> ), oczywiście tylko w przypadku gdy sieć jest zabezpieczona. Jako,
że jest to hasło do naszej sieci, powinno być ono możliwe długie i skomplikowane, bo od niego, w
głównej mierze, zależeć będzie bezpieczeństwo sieci. Mamy do wyboru dwa rodzaje haseł. Jednym z
nich jest hasło w postaci czystego tekstu (<a href="https://pl.wikipedia.org/wiki/ASCII">7 bitowy kod ASCII</a>), przy czym musi ono zostać
ujęte w <code>&quot; &quot;</code> i posiadać 8-63 znaków. Drugim typem hasła jest ciąg hexalny o długości 64 znaków,
wpisywany bez <code>&quot; &quot;</code> . Istnieje także możliwość sprecyzowania <code>bssid</code> , z którym chcemy się połączyć.
Jest to nic innego jak tylko adres fizyczny danego urządzenia (MAC), podobny do tego w kartach
sieciowych. W konkretnej sieci o określonym SSID może znajdować się kilka punków dostępowych. Każdy
z tych routerów ma osobny BSSID i jeśli z jakichś powodów chce się korzystać z konkretnego z nich,
to trzeba określić jego adres za pomocą tego parametru.</p>
<p>Szyfr grupowy ( <code>group cipher</code> ) jest używany w przypadku transmisji ramek multicast, włączając w to
broadcast, i musi być zrozumiały (taki sam) dla wszystkich powiązanych stacji roboczych. Szyfr
parowy (<code>pairwise cipher</code>) jest wykorzystywany przez ramki unicastowe, np. połączenia http, i musi
być zrozumiały dla routera i oddzielnie dla każdej ze stacji roboczych -- różne stacje mogą używać
różnych szyfrów parowych. W WPA2 jest możliwość skonfigurowania routera by wspierał wiele
unicastowych szyfrów parowych. Jednak tylko jeden szyfr grupowy jest wykorzystywany do kodowania
ramek broadcast/multicast, tak by wszystkie stacje powiązane z daną siecią mogły być w stanie
odebrać tego typu pakiety. Będzie to najsłabszy z dozwolonych szyfrów parowych. To dlatego można
skorzystać, albo z TKIP, albo CCMP jeśli chodzi o szyfry parowe ale tylko TKIP może być wykorzystany
jako szyfr grupowy. CCMP może być użyty jako szyfr grupowy ale tylko w przypadku gdy zdefiniowany
jest on jako jedyny w dozwolonych szyfrach parowych.</p>
<p>Mamy także do dyspozycji kilka różnych protokołów zabezpieczających sieć przed nieautoryzowanym
dostępem, np. WEP, WPA, czy WPA2. Choć na dobrą sprawę WEP już się do niczego nie nadaje. By
poprawić bezpieczeństwo naszej sieci, możemy sprecyzować to, z którego protokołu zamierzamy
korzystać. Możemy to zrobić za pomocą opcji <code>proto</code> . RSN odpowiada za WPA2. Nie wszystkie
urządzenia, szczególnie te starsze, potrafią operować na tym protokole. Warto to wziąć pod uwagę w
przypadku ewentualnych problemów z siecią. Ponad to, trzeba także mieć na względzie obciążenie sieci
przez mocniejsze szyfrowanie w przypadku WPA2 -- może ono obniżyć maksymalną przepustowość łącza.</p>
<p>By dodatkowo zwiększyć poufność połączeń wewnątrz sieci, wprowadzono protokół zarządzania kluczami
uwierzytelniającymi (authenticated key management protocol). Definiowany jest on przez opcję
<code>key_mgmt</code> ). Zarządzanie kluczami może odbywać się w dwóch trybach. Pierwszym z nich jest WPA-PSK
(Personal albo Pre-shared), gdzie wszystkie stacje robocze korzystają z tego samego klucza, co daje
możliwość podsłuchiwania hostów w sieci. Niczym się taka sieć nie różni zbytnio od zwykłego LAN.
Drugi tryb to WPA-EAP (Enterprise), który wykorzystuje serwer RADIUS do przydzielania kluczy każdemu
użytkownikowi z osobna, szyfrując ruch wewnątrz sieci na podobnej zasadzie co w przypadku VPN.</p>
<p>Z kolei <code>auth_alg</code> określa rodzaj algorytmu uwierzytelniającego. Open system authentication (OPEN)
składa się z dwóch komunikatów. Pierwszy z nich jest to prośba o uwierzytelnienie wysłana przez
klienta do routera. Taka wiadomość zawiera ID stacji roboczej, zwykle jest to adres MAC. Drugi
komunikat to odpowiedź routera na to żądanie i może ona zawierać wiadomość o powodzeniu lub porażce,
np. gdy adres MAC klienta jest zbanowany w konfiguracji routera. W przypadku Shared Key
Authentication (SHARED) obie strony połączenia dzielą między sobą ten sam klucz lub hasło, które
jest ręcznie ustawiane zarówno na stacji klienckiej jak i na routerze. OPEN jest wymagany w
przypadku WPA/WPA2, zaś SHARED dla WEP .</p>
<p>Sieci w dostępnym paśmie radiowym mogą być jawne albo ukryte. Różnią się one między sobą
rozgłaszaniem informacji o swoim istnieniu w okolicy. Część osób uważa, że lepiej jest wyłączyć
tego typu broadcast na routerze i schować w ten sposób sieć przed innymi osobami, które mogą
spróbować ją spenetrować. W przypadku ukrytych sieci, każde urządzenie, które chce się podłączyć
musi wysyłać próbki żądań z określonym SSID i jeśli taka sieć się znajduje w okolicy, odpowie na
nie. Jeśli posiadamy ukrytą sieć, to by ją odnaleźć trzeba ustawić <code>scan_ssid</code> . Ukrywanie sieci
jednak mija się z celem, gdyż SSID jest rozgłaszane w pakietach sieciowych. Ponadto, w przypadku gdy
sieć jest ukryta, inne routery nie mogą dobrać optymalnego kanału dla połączenia, co może skutkować
sporymi zakłóceniami, np. gdy na jednym kanale nie widać żadnej sieci (a jest tam 10 ukrytych), a na
pozostałych są 1-2 sieci, które widać. W takiej sytuacji router spróbuje wleźć na ten pozornie wolny
kanał, co dodatkowo pogorszy komunikacje w obrębie wszystkich znajdujących się tam sieci, a
normalnie, router by wszedł na którychś z mniej zapchanych kanałów.</p>
<p>Do sieci możemy łączyć się z automatu albo ręcznie. Jeśli mamy zaufaną sieć, możemy się do niej
łączyć automatycznie. Natomiast jeśli w grę wchodzi jakiś publiczny Access Point, który nie jest w
żaden sposób zabezpieczony, dobrze jest wyłączyć ten ficzer przez ustawienie <code>disabled=1</code> .</p>
<p>Jeśli chodzi o kwestię automatycznej konfiguracji sieci bezprzewodowych i dynamicznego przełączania
się między nimi, trzeba dodatkowo posłużyć się parametrem <code>priority</code> . Przyjmuje on wartości od 0 do
1000, im wyższy numer, tym większy priorytet. W przypadku dostępności kilku zaufanych sieci,
<code>wpa_supplicant</code> wybierze sieć o najwyższym priorytecie. Jeśli będzie kilka sieci z takim samym
priorytetem, wtedy będzie decydować siła sygnału i zabezpieczenia danej sieci.</p>
<h4 id="narzędzie-wpa_passphrase">Narzędzie wpa_passphrase</h4>
<p>Nikomu za bardzo nie chce się wymyślać długich i skomplikowanych haseł ale istnieje narzędzie, które
może wygenerować hasło szesnastkowe w oparciu o nazwę sesji (SSID) oraz o jakąś frazę, dajmy na to
faktyczne hasło. Mowa oczywiście o <code>wpa_passphrase</code> . Poniżej przykład jego wykorzystania:</p>
<pre><code># wpa_passphrase &quot;Moja siec&quot; &quot;Moje haslo&quot;
network={
        ssid=&quot;Moja siec&quot;
        #psk=&quot;Moje haslo&quot;
        psk=811339fbba9c799a6216ec3390bd1ae84680242fc0fcc918b0636a3dbe0fd310
}
</code></pre>
<p>I w ten sposób, mając słabe hasło, można dość solidnie zabezpieczyć swoją sieć. Przy czym trzeba
pamiętać, że ten ciąg zawsze będzie taki sam o ile SSID i hasło nie zostaną zmienione i każdy kto
zna te dwie wartości, może wygenerować sobie ten 64 znakowy ciąg.</p>
<h2 id="interfejs-bond">Interfejs bond</h2>
<p>W ten oto sposób można łatwo pozbyć się pakietów <code>network-manager</code> lub/i <code>wicd</code> . Jeśli ktoś
naprawdę chce korzystać z GUI, to może sobie doinstalować pakiet <code>wpagui</code> . Jednak cała konfiguracja
może zostać przeprowadzona z poziomu konsoli via <code>wpa_cli</code> , który to potrafi działać w trybie
interaktywnym i posiada opcję autouzupełniania przy pomocy klawisza TAB.</p>
<p>Problem jednak pojawia się w przypadku gdy interesowałaby nas konfiguracja taka, w której
chcielibyśmy się przełączać dynamicznie między interfejsem przewodowym i tym bezprzewodowym, na
takiej zasadzie, że gdy podpinamy przewód, to sygnał leci przez niego, natomiast w przypadku jego
odłączenia, komunikacja odbywa się przez sieć WiFi. Jest to możliwe do zrealizowania ale w takim
przypadku trzeba by skorzystać z <a href="https://www.kernel.org/doc/Documentation/networking/bonding.txt">interfejsów bond</a> ale to jest zagadnienie na zupełnie <a href="https://morfikov.github.io/post/konfiguracja-interfejsow-bond-bonding/">inny
artykuł</a>.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/wifi/">wifi</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/debian/">debian</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/siec/">sieć</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&amp;text=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&amp;title=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&amp;title=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&title=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&amp;title=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fkonfiguracja-polaczenia-wifi-pod-debianem%2f&description=Konfiguracja%20po%c5%82%c4%85czenia%20WiFi%20pod%20debianem" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/wpa2-enterprise-serwer-freeradius/">WPA/WPA2 Enterprise i serwer freeradius</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/interwal-pakietow-beacon-w-sieciach-wifi/">Interwał pakietów Beacon w sieciach WiFi</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/riseup-vpn-na-strazy-prywatnosci/">Riseup VPN na straży prywatności</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/baza-danych-uzytkownikow-serwera-freeradius/">Baza danych użytkowników serwera freeradius</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/aktualizacja-systemu-logowanie-komunikatow/">Aktualizacja systemu i logowanie komunikatów</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/tworzenie-repozytorium-przy-pomocy-reprepro/">Tworzenie repozytorium przy pomocy reprepro</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/retransmisja-i-duplikaty-pakietow-w-tcp/">Retransmisja i duplikaty pakietów w TCP</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script src="https://utteranc.es/client.js"
        repo="morfikov/morfitronik-comments"
        issue-term="og:title"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2023 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
const images = Array.from(document.querySelectorAll(".entry__content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'
  });
});
</script>
</body>
</html>

<!DOCTYPE html>
<html class="no-js" lang="pl-PL">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT | Morfitronik</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT" />
<meta property="og:description" content="Ostatnio pisałem trochę o konfiguracji serwera VPN na
Debianie oraz podłączaniu
do niego różnych linux&#39;owych klientów, w tym też smartfonów wyposażonych w system
Android. O ile
konfiguracja pojedynczego klienta OpenVPN nie jest jakoś szczególnie trudna, to mając w swojej sieci
domowej kilka urządzeń zdolnych łączyć się z internetem zarówno przewodowo jak i bezprzewodowo, to
dostosowanie konfiguracji na każdym z tych sprzętów może być ździebko problematyczne. To co łączy te
wszystkie urządzenia w naszym domu, to router WiFi. Zwykle każdy komputer, nawet ten najmniejszy,
łączy się z takim routerem w celu nawiązania połączenia ze światem. Dlatego też zamiast
konfigurować osobno wszystkie te urządzenia elektroniczne, możemy skonfigurować sobie router w taki
sposób, by cały zebrany ruch z sieci lokalnej przesłał do serwera VPN. Standardowej klasy routery
nie wspierają połączeń VPN i by taki mechanizm zaimplementować potrzebne nam będzie alternatywne
firmware pokroju LEDE/OpenWRT. W tym artykule postaramy się skonfigurować połączenie VPN dla sieci
domowej w oparciu o router Archer
C2600 od TP-LINK, który ma wgrany
najnowszy snapshot LEDE Chaos Calmer (r2392)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://morfikov.github.io/post/jak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-12-08T18:13:41&#43;00:00" />
<meta property="article:modified_time" content="2016-12-08T18:13:41&#43;00:00" />


		<meta itemprop="name" content="Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT">
<meta itemprop="description" content="Ostatnio pisałem trochę o konfiguracji serwera VPN na
Debianie oraz podłączaniu
do niego różnych linux&#39;owych klientów, w tym też smartfonów wyposażonych w system
Android. O ile
konfiguracja pojedynczego klienta OpenVPN nie jest jakoś szczególnie trudna, to mając w swojej sieci
domowej kilka urządzeń zdolnych łączyć się z internetem zarówno przewodowo jak i bezprzewodowo, to
dostosowanie konfiguracji na każdym z tych sprzętów może być ździebko problematyczne. To co łączy te
wszystkie urządzenia w naszym domu, to router WiFi. Zwykle każdy komputer, nawet ten najmniejszy,
łączy się z takim routerem w celu nawiązania połączenia ze światem. Dlatego też zamiast
konfigurować osobno wszystkie te urządzenia elektroniczne, możemy skonfigurować sobie router w taki
sposób, by cały zebrany ruch z sieci lokalnej przesłał do serwera VPN. Standardowej klasy routery
nie wspierają połączeń VPN i by taki mechanizm zaimplementować potrzebne nam będzie alternatywne
firmware pokroju LEDE/OpenWRT. W tym artykule postaramy się skonfigurować połączenie VPN dla sieci
domowej w oparciu o router Archer
C2600 od TP-LINK, który ma wgrany
najnowszy snapshot LEDE Chaos Calmer (r2392)."><meta itemprop="datePublished" content="2016-12-08T18:13:41&#43;00:00" />
<meta itemprop="dateModified" content="2016-12-08T18:13:41&#43;00:00" />
<meta itemprop="wordCount" content="1232">
<meta itemprop="keywords" content="prywatność,vpn,router,tp-link,chaos-calmer," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT"/>
<meta name="twitter:description" content="Ostatnio pisałem trochę o konfiguracji serwera VPN na
Debianie oraz podłączaniu
do niego różnych linux&#39;owych klientów, w tym też smartfonów wyposażonych w system
Android. O ile
konfiguracja pojedynczego klienta OpenVPN nie jest jakoś szczególnie trudna, to mając w swojej sieci
domowej kilka urządzeń zdolnych łączyć się z internetem zarówno przewodowo jak i bezprzewodowo, to
dostosowanie konfiguracji na każdym z tych sprzętów może być ździebko problematyczne. To co łączy te
wszystkie urządzenia w naszym domu, to router WiFi. Zwykle każdy komputer, nawet ten najmniejszy,
łączy się z takim routerem w celu nawiązania połączenia ze światem. Dlatego też zamiast
konfigurować osobno wszystkie te urządzenia elektroniczne, możemy skonfigurować sobie router w taki
sposób, by cały zebrany ruch z sieci lokalnej przesłał do serwera VPN. Standardowej klasy routery
nie wspierają połączeń VPN i by taki mechanizm zaimplementować potrzebne nam będzie alternatywne
firmware pokroju LEDE/OpenWRT. W tym artykule postaramy się skonfigurować połączenie VPN dla sieci
domowej w oparciu o router Archer
C2600 od TP-LINK, który ma wgrany
najnowszy snapshot LEDE Chaos Calmer (r2392)."/>

	<link rel="stylesheet" href="https://morfikov.github.io/css/bundle.css">
	<link rel="stylesheet" href="https://morfikov.github.io/css/custom.css">
	<link rel="icon" href="https://morfikov.github.io/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="https://morfikov.github.io/icons/32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="https://morfikov.github.io/manifest.json">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119125303-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body>
	<header class="header">
	<a class="logo" href="https://morfikov.github.io/">Morfitronik</a>
	
<nav class="main-nav main-nav--right" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/categories/">
					
					<span class="main-nav__text">Kategorie</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/tags/">
					
					<span class="main-nav__text">Tagi</span>
					
				</a>
			</li>
			<li class="main-nav__item">
				<a class="main-nav__link" href="https://morfikov.github.io/page/info-kontakt/">
					
					<span class="main-nav__text">Info/Kontakt</span>
					
				</a>
			</li>
	</ul>
</nav>
</header>
	<div class="primary">
	
	<main class="main">
		
<nav class="breadcrumb block" aria-label="breadcrumb">
	<ol class="breadcrumb__list">
		
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/">Home</a>
		</li>
		<li class="breadcrumb__item">
			<a class="breadcrumbs__link" href="https://morfikov.github.io/post/">Posts</a>
		</li>
		<li class="breadcrumbs__item breadcrumb__item--active" aria-current="page">Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT</li>
	</ol>
</nav>
		<div class="single block">
			<article class="entry">
	<div class="entry__meta meta mb">
	<time class="entry__meta-published meta-published" datetime="2016-12-08T18:13:41Z">Opublikowano: 08/12/2016</time>

<span class="entry__meta-categories meta-categories">
	<span class="meta-categories__list">Kategorie:
		<a class="meta-categories__link" href="https://morfikov.github.io/categories/lede/" rel="category">LEDE</a>
	</span>
</span>
	</div>
				<h1 class="entry__title">Jak skonfigurować klienta VPN na routerze z LEDE/OpenWRT</h1>
<details class="entry__toc toc" >
	<summary class="toc__title">Spis treści</summary>
	<nav id="TableOfContents">
  <ol>
    <li><a href="#niezbędne-oprogramowanie-na-potrzeby-vpn">Niezbędne oprogramowanie na potrzeby VPN</a></li>
    <li><a href="#konfiguracja-klienta-vpn-na-ledeopenwrt">Konfiguracja klienta VPN na LEDE/OpenWRT</a>
      <ol>
        <li><a href="#konfiguracja-openvpn-w-zewnętrznym-pliku">Konfiguracja OpenVPN w zewnętrznym pliku</a></li>
        <li><a href="#konfiguracja-openvpn-przez-uci">Konfiguracja OpenVPN przez UCI</a></li>
      </ol>
    </li>
    <li><a href="#certyfikaty-klienckie">Certyfikaty klienckie</a></li>
    <li><a href="#konfiguracja-firewalla-na-potrzeby-openvpn">Konfiguracja firewall'a na potrzeby OpenVPN</a></li>
    <li><a href="#test-połączenia-z-serwerem-vpn">Test połączenia z serwerem VPN</a></li>
  </ol>
</nav>
</details>
				<div class="entry__content"><p>Ostatnio pisałem trochę o <a href="https://morfikov.github.io/post/jak-skonfigurowac-serwer-vpn-na-debianie-openvpn/">konfiguracji serwera VPN na
Debianie</a> oraz podłączaniu
do niego różnych linux'owych klientów, w tym też <a href="https://morfikov.github.io/post/jak-skonfigurowac-polaczenie-vpn-na-smartfonie-z-androidem/">smartfonów wyposażonych w system
Android</a>. O ile
konfiguracja pojedynczego klienta OpenVPN nie jest jakoś szczególnie trudna, to mając w swojej sieci
domowej kilka urządzeń zdolnych łączyć się z internetem zarówno przewodowo jak i bezprzewodowo, to
dostosowanie konfiguracji na każdym z tych sprzętów może być ździebko problematyczne. To co łączy te
wszystkie urządzenia w naszym domu, to router WiFi. Zwykle każdy komputer, nawet ten najmniejszy,
łączy się z takim routerem w celu nawiązania połączenia ze światem. Dlatego też zamiast
konfigurować osobno wszystkie te urządzenia elektroniczne, możemy skonfigurować sobie router w taki
sposób, by cały zebrany ruch z sieci lokalnej przesłał do serwera VPN. Standardowej klasy routery
nie wspierają połączeń VPN i by taki mechanizm zaimplementować potrzebne nam będzie alternatywne
firmware pokroju LEDE/OpenWRT. W tym artykule postaramy się skonfigurować połączenie VPN dla sieci
domowej w oparciu o <a href="http://www.tp-link.com.pl/products/details/Archer-C2600.html">router Archer
C2600</a> od TP-LINK, który ma wgrany
najnowszy snapshot LEDE Chaos Calmer (r2392).</p>
<h2 id="niezbędne-oprogramowanie-na-potrzeby-vpn">Niezbędne oprogramowanie na potrzeby VPN</h2>
<p>Nie da się ukryć, że oprogramowanie, które umożliwi nam nawiązanie połączenia VPN, trochę waży.
Trzeba także brać pod uwagę fakt szyfrowania całego ruchu, co też obciąży mocno procesor routera. Te
dwie rzeczy nie stanowią aż takiego problemu w przypadku Archer'a C2600, bo on ma flash 32 MiB i dwa
rdzenie taktowane 1,2 GHz:</p>
<p><img loading="lazy" src="https://morfikov.github.io/img/2016/12/001-openvpn-vpn-lede-openwrt-router-tp-link.png" alt=""    class="huge"></p>
<p>Na innych routerach, które mają mniejszy flash i słabszy procesor, OpenVPN może sprawić drobne
problemy, zwłaszcza przy mocniejszych szyfrach. O ile w przypadku wolnego miejsca na flash możemy
coś poradzić, np przeprowadzić extroot, o tyle w przypadku procesora zbytnio nic nie zrobimy i taki
dodatkowy narzut (overhead) odbije się spowolnieniem transmisji danych.</p>
<p>Z tego co zauważyłem w LEDE mamy z grubsza trzy pakiety, które mogą nam posłużyć do skonfigurowania
klienta VPN, są to: <code>openvpn-nossl</code> , <code>openvpn-openssl</code> oraz <code>openvpn-polarssl</code> . Ten pierwszy
pakiet możemy sobie darować, bo nie zapewnia on wsparcia dla szyfrowanego połączenia z VPN. Musimy
zdecydować się na jeden z dwóch pozostałych pakietów. Generalnie rzecz biorąc <a href="https://tls.mbed.org/openssl-alternative">PolarSSL ma niby
zastąpić OpenSSL</a> ale znowu <a href="https://community.openvpn.net/openvpn/wiki/UsingPolarSSL">OpenVPN ma pewne
ograniczenia w przypadku wykorzystywania
PolarSSL</a>. Dlatego też zainstalujemy sobie
<code>openvpn-openssl</code> , z tym, że nasz router musi mieć minimum 1 MiB wolnego miejsca na flash'u.
Logujemy się zatem na router i wydajemy w terminalu poniższe polecenia:</p>
<pre><code># opkg update
# opkg install openvpn-openssl
</code></pre>
<h2 id="konfiguracja-klienta-vpn-na-ledeopenwrt">Konfiguracja klienta VPN na LEDE/OpenWRT</h2>
<p>Z pakietem <code>openvpn-openssl</code> został dostarczony skrypt startowy zlokalizowany w
<code>/etc/init.d/openvpn</code> i jeśli chcemy, aby klient VPN łączył się automatycznie z serwerem po starcie
routera, to naturalnie przydałoby się dodać ten skrypt do autostartu w poniższy sposób:</p>
<pre><code># /etc/init.d/openvpn enable
</code></pre>
<p>Konfiguracja dla demona <code>openvpn</code> jest przechowywana w pliku <code>/etc/config/openvpn</code> i musimy ją sobie
dostosować w oparciu o konfigurację serwera VPN, z którym zamierzamy się połączyć. Ten plik
konfiguracyjny jest dość rozbudowany i ma około 400 linijek. Większość z nich to komentarze.</p>
<p>Plik <code>/etc/config/openvpn</code> jest podzielony na trzy sekcje. Pierwsza z nich dotyczy konfiguracji
klienta VPN za pomocą zewnętrznego pliku. Druga dotyczy konfiguracji serwera VPN na routerze (nas to
zbytnio nie interesuje). Trzecia sekcja zaś umożliwia skonfigurowanie klienta VPN za pomocą
interfejsu UCI.</p>
<h3 id="konfiguracja-openvpn-w-zewnętrznym-pliku">Konfiguracja OpenVPN w zewnętrznym pliku</h3>
<p>W przypadku, gdy skonfigurowaliśmy sobie połączenie z serwerem VPN na komputerze, to powinniśmy
dysponować stosownym plikiem konfiguracyjnym, który możemy wgrać na router. Następnie w pliku
<code>/etc/config/openvpn</code> musimy ustawić jedynie poniższe parametry:</p>
<pre><code>...
config openvpn custom_config
    option enabled 1
    option config /etc/openvpn/morfitronik.conf
...
</code></pre>
<p>W pliku <code>/etc/openvpn/morfitronik.conf</code> umieszczamy konfigurację dla klienta OpenVPN:</p>
<pre><code>client
dev tun
proto udp
remote 11.22.33.44 1194
resolv-retry infinite
nobind
user nobody
group nogroup
persist-key
persist-tun
cipher AES-256-CBC
tls-cipher TLS-DHE-RSA-WITH-AES-256-GCM-SHA384
auth SHA512
keysize 256
tls-version-min 1.2
comp-lzo
verb 3
auth-nocache

remote-cert-tls server
verify-x509-name &quot;morfitronik-server-vpn&quot; name

key-direction 1

&lt;ca&gt;
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----
&lt;/ca&gt;
&lt;cert&gt;
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----
&lt;/cert&gt;
&lt;key&gt;
-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY-----
&lt;/key&gt;
&lt;tls-auth&gt;
-----BEGIN OpenVPN Static key V1-----
....
-----END OpenVPN Static key V1-----
&lt;/tls-auth&gt;
</code></pre>
<p>Po wyjaśnienie użytych tutaj opcji odsyłam do wpisu podlinkowanego we wstępie.</p>
<h3 id="konfiguracja-openvpn-przez-uci">Konfiguracja OpenVPN przez UCI</h3>
<p>Alternatywną metodą konfiguracji klienta OpenVPN na LEDE/OpenWRT jest skorzystanie z interfejsu UCI.
W pliku <code>/etc/config/openvpn</code> na samym dole mamy odpowiednią sekcję. Włączamy ją przestawiając
poniższy parametr:</p>
<pre><code>...
config openvpn sample_client
    option enabled 1
...
</code></pre>
<p>Dalej musimy uwzględnić wszystkie opcje, które zwykle podaje się w pliku konfiguracyjnym OpenVPN, z
tym, że musimy je poprzedzić słówkiem <code>option</code> . Poniżej przykład:</p>
<pre><code>...
option client 1
option dev tun
option proto udp
list remote &quot;11.22.33.44 1194&quot;
option resolv_retry infinite
option nobind 1
option persist_key 1
option persist_tun 1
option user nobody
option ca /etc/openvpn/certs/morfitronik-ca.crt
option cert /etc/openvpn/certs/morfitronik-client-vpn-router-c2600.crt
option key /etc/openvpn/certs/morfitronik-client-vpn-router-c2600.key
option ns_cert_type server
option tls_auth &quot;/etc/openvpn/certs/morfitronik-ta.key 1&quot;
option cipher AES-256-CBC
option tls-cipher TLS-DHE-RSA-WITH-AES-256-GCM-SHA384
option auth SHA512
option keysize 256
option tls-version-min 1.2
option remote-cert-tls
option verify-x509-name &quot;morfitronik-server-vpn name&quot;
option comp_lzo yes
option verb 4
</code></pre>
<p>Problem z UCI jest taki, że klucze/certyfikaty klienta i serwera trzeba niestety umieszczać w
osobnych plikach.</p>
<h2 id="certyfikaty-klienckie">Certyfikaty klienckie</h2>
<p>Ja jestem zwolennikiem uwierzytelniania użytkowników za pomocą certyfikatów klienckich. Dlatego też
mam w taki sposób skonfigurowany swój serwer VPN. Bez przedstawienia takiego certyfikatu, żaden
klient nie będzie w stanie zestawić połączenia. Opis <a href="https://morfikov.github.io/post/generowanie-certyfikatow-przy-pomocy-easy-rsa/">jak wygenerować takie certyfikaty w oparciu o
easy-rsa</a> został opisany
osobno. Tutaj warto nadmienić, że w LEDE/OpenWRT mamy dostępny pakiet <code>openvpn-easy-rsa</code> , którym
możemy się posłużyć przy generowaniu certyfikatów. Niemniej jednak, to rozwiązanie nie jest zbytnio
zalecane ze względu na niewielką moc obliczeniową takiego przeciętnego routera WiFi, przez cały
proces będzie trwał kilka godzin.</p>
<h2 id="konfiguracja-firewalla-na-potrzeby-openvpn">Konfiguracja firewall'a na potrzeby OpenVPN</h2>
<p>W zasadzie bez znaczenia jest sposób, który sobie wybierzemy w celu dostarczenia konfiguracji dla
demona OpenVPN. Jeśli w tej chwili byśmy uruchomili usługę, to router będzie w stanie przesłać
wszystkie swoje dane bezpośrednio do serwera VPN. Problem jednak jest w tym, że klienci w sieci LAN
za routerem nie mają połączenia z internetem. Możemy co prawda połączyć się z routerem ale nie mamy
wyjścia na świat. Problem tkwi w konfiguracji zapory. Musimy zatem skonfigurować sobie forwarding
dla nowych interfejsów i włączyć im również NAT. W tym celu trzeba poddać edycji dwa pliki i dodać
do nich poniższą zawartość.</p>
<p>Plik <code>/etc/config/network</code> :</p>
<pre><code>config interface 'vpn'
    option ifname 'tun0'
    option proto 'none'
</code></pre>
<p>Plik <code>/etc/config/firewall</code> :</p>
<pre><code>config zone
    option name             vpn
    list   network          'vpn'
    option input            DROP
    option output           ACCEPT
    option forward          DROP
    option masq             1
    option mtu_fix          1

config forwarding
    option src              'lan'
    option dest             'vpn'
</code></pre>
<p>Zapisujemy i resetujemy router. I to w zasadzie cała konfiguracja jeśli chodzi o przesyłanie ruchu
ze wszystkich urządzeń w sieci domowej WiFi do serwera VPN. Jeśli zaś chodzi o ewentualne <a href="https://morfikov.github.io/post/przeciek-dns-dns-leak-w-vpn-resolvconf/">przecieki
DNS</a>, to zawsze możemy skonfigurować
sobie <a href="https://morfikov.github.io/post/konfiguracja-dnscrypt-proxy-w-openwrt/">szyfrowany DNS w oparciu o
dnscrypt-proxy</a> również na routerze.</p>
<h2 id="test-połączenia-z-serwerem-vpn">Test połączenia z serwerem VPN</h2>
<p>W zasadzie połączenie powinno działać OOTB po zresetowaniu routera. Jeśli jednak nie mamy pewności
do tego czy cały mechanizm został poprawnie skonfigurowany, to naturalnie możemy zajrzeć w log (
<code>logread</code> ) i poszukać wpisów zaczynających się od <code>openvpn</code> . Jeśli nie znajdziemy żadnych błędów i
będzie w logu figurować <code>Initialization Sequence Completed</code> , to oznacza to, że połączenie z
serwerem VPN zostało pomyślnie ustawione. Jeśli zaś mamy w logu również <code>PUSH_REPLY,redirect-gateway def1</code> , to cały ruch z routera wędruje do serwera VPN w formie szyfrowanej. Dla pewności można także
podejrzeć regułki na zaporze ( <code>iptables -nvL</code> ) i poszukać interfejsu <code>tun0</code> . Jeśli pakiety są
zliczane, to ruch jest zarządzany przez OpenVPN. No i oczywiście możemy podejrzeć tablicę routingu
via <code>ip route show</code> , gdzie obecność tras <code>0.0.0.0/1</code> oraz <code>128.0.0.0/1</code> oznacza, że żaden pakiet
wysyłany do internetu nie leci poza szyfrowanym tunelem.</p></div>
				
				<footer class="entry__footer">
					
<div class="entry__tags">
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/prywatno%C5%9B%C4%87/">prywatność</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/vpn/">vpn</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/router/">router</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/tp-link/">tp-link</a>
			<a class="entry__tag btn" href="https://morfikov.github.io/tags/chaos-calmer/">chaos-calmer</a>
</div>
					
<div class="entry__share share">
	<a class="share__link btn" title="Podziel się na Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Facebook', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&amp;text=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&amp;title=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na Telegram" href="https://t.me/share/url?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&amp;title=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na Telegram', 'width=800,height=600,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&title=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na LinkedIn', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
	</a>
	<a class="share__link btn" title="Podziel się na VK" href="https://vk.com/share.php?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Podziel się na VK', 'width=640,height=480,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="VK" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M274 363c5-1 14-3 14-15 0 0-1-30 13-34s32 29 51 42c14 9 25 8 25 8l51-1s26-2 14-23c-1-2-9-15-39-42-31-30-26-25 11-76 23-31 33-50 30-57-4-7-20-6-20-6h-57c-6 0-9 1-12 6 0 0-9 25-21 45-25 43-35 45-40 42-9-5-7-24-7-37 0-45 7-61-13-65-13-2-59-4-73 3-7 4-11 11-8 12 3 0 12 1 17 7 8 13 9 75-2 81-15 11-53-62-62-86-2-6-5-7-12-9H79c-6 0-15 1-11 13 27 56 83 193 184 192z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pocket" href="https://getpocket.com/edit?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&amp;title=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=480,height=320,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pocket" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M388.8 88.9H123.2A47.4 47.4 0 0 0 76 136.5v131.9c0 2.4.2 4.8.5 7.2a101.8 101.8 0 0 0-.5 10.6c0 75.6 80.6 137 180 137s180-61.4 180-137c0-3.6-.2-7.1-.5-10.6.3-2.4.5-4.8.5-7.2v-132A47.4 47.4 0 0 0 388.8 89zm-22.4 132.6l-93 93c-4.7 4.6-11 7-17.1 7a23.8 23.8 0 0 1-17.7-7l-93-93a24 24 0 0 1 33.8-33.8l76.6 76.5 76.6-76.5a24 24 0 0 1 33.8 33.8z"/></svg>
	</a>
	<a class="share__link btn" title="Zapisz do Pinterest" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmorfikov.github.io%2fpost%2fjak-skonfigurowac-klienta-vpn-na-routerze-z-ledeopenwrt%2f&description=Jak%20skonfigurowa%c4%87%20klienta%20VPN%20na%20routerze%20z%20LEDE%2fOpenWRT" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Zapisz do Pocket', 'width=800,height=720,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Pinterest" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="m265 65c-104 0-157 75-157 138 0 37 14 71 45 83 5 2 10 0 12-5l3-18c2-6 1-7-2-12-9-11-15-24-15-43 0-56 41-106 108-106 60 0 92 37 92 85 0 64-28 116-70 116-23 0-40-18-34-42 6-27 19-57 19-77 0-18-9-34-30-34-24 0-42 25-42 58 0 20 7 34 7 34l-29 120a249 249 0 0 0 2 86l3-1c2-3 31-37 40-72l16-61c7 15 29 28 53 28 71 0 119-64 119-151 0-66-56-126-140-126z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
<div class="authorbox block">
	<div class="author">
		<figure class="author__avatar">
			<img class="author__img" alt="Mikhail Morfikov avatar" src="https://morfikov.github.io/img/avatar.png" height="90" width="90">
		</figure>
		<div class="author__body">
			<div class="author__name">
				Mikhail Morfikov
			</div>
			<div class="author__bio">Po ponad 10 latach spędzonych z różnej maści linux&#39;ami (Debian/Ubuntu, OpenWRT, Android) mogę śmiało powiedzieć, że nie ma rzeczy niemożliwych i problemów, których nie da się rozwiązać. Jedną umiejętność, którą ludzki umysł musi posiąść, by wybrnąć nawet z tej najbardziej nieprzyjemniej sytuacji, to zdolność logicznego rozumowania.</div>
		</div>
	</div>
</div>
	



<div class="related block">
	<h3 class="related__title">Powiązane</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-przy-pomocy-trybu-recovery-odzyskac-router-tp-link/">Jak przy pomocy trybu recovery odzyskać router TP-LINK</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/konsola-szeregowa-adapter-usb-uart-uszkodzony-router-tp-link/">Konsola szeregowa, adapter USB-UART i uszkodzony router TP-LINK</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/instalacja-konfiguracja-firmware-openwrt-chaos-calmer/">Instalacja i konfiguracja firmware OpenWRT (Chaos Calmer)</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-wgrac-firmware-openwrt-na-router-tp-link/">Jak wgrać firmware OpenWRT na router TP-LINK</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-powrocic-z-firmware-openwrt-tp-linka/">Jak powrócić z firmware OpenWRT do TP-LINK&#39;a</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-skonfigurowac-polaczenie-vpn-na-smartfonie-z-androidem/">Jak skonfigurować połączenie VPN na smartfonie z Androidem</a></li>
		
		<li class="related__item"><a class="related__link" href="https://morfikov.github.io/post/jak-skonfigurowac-serwer-vpn-na-debianie-openvpn/">Jak skonfigurować serwer VPN na Debianie (OpenVPN)</a></li>
		
	</ul>
</div>

	<div id="comments">
		<script>
  var id =  462 ;

  if (id)
  {
    let url = "https://github.com/morfikov/morfitronik-comments/issues/".concat(id);
    let api_url = "https://api.github.com/repos/morfikov/morfitronik-comments/issues/".concat(id, "/comments");

    var commentsDiv = document.getElementById("comments");

    let xhr = new XMLHttpRequest();
    xhr.responseType = "json";
    xhr.open("GET", api_url);
    xhr.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
    xhr.send();

    xhr.onload = function()
    {
      if (xhr.status != 200)
      {
        let errorText = document.createElement("p");
        errorText.innerHTML = "<i>Komentarze dla tego postu nie zostały jeszcze otworzone (albo skrypty GitHub'a są wyłączone). Być może też skończył ci się przydział 60/godzinę (limit GitHub'a).</i>";
        commentsDiv.appendChild(errorText);
      }
      else
      {
        let comments = xhr.response;

        let mainHeader = document.createElement("h3");
        mainHeader.innerHTML = "Komentarze: ".concat(comments.length);
        commentsDiv.appendChild(mainHeader);

        let issueLink = document.createElement("p");
        issueLink.innerHTML = "<i>Możesz zostawić komentarz korzystając z <a href='".concat(url, "'>GitHub issue</a>.</i>");
        commentsDiv.appendChild(issueLink);

        comments.forEach(function(comment)
        {
			const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Europe/Warsaw' };
			options.timeZoneName = 'short';
            let commentContent = document.createElement("div");
            commentContent.setAttribute('class', 'gh-comment')
            commentContent.innerHTML = "".concat(
                "<div class='gh-header'>",
                  "<img src='", comment.user.avatar_url, "' />",
                  "<div style='margin:auto 0;'>",
                    "<b><a class='gh-username' href='", comment.user.html_url, "'>", comment.user.login, "</a></b>",
                    " | <em>", (new Date(comment.created_at)).toLocaleTimeString('pl-PL', options), "</em>",
                  "</div>",
                "</div>",
                "<div class='gh-body'>",
                  comment.body_html,
                "</div>"
            );
            commentsDiv.appendChild(commentContent);
        });
      }
    };

    xhr.onerror = function()
    {
      let errorText = document.createElement("p");
      errorText.innerHTML = "<i>Wystąpił jakiś błąd przy ładowaniu komentarzy.</i>";
      commentsDiv.appendChild(errorText);
    };
  }
</script>

	</div>

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="mailto:morfitronik@gmail.com">
			<svg class="social__icon" aria-label="Email" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M299 268l124 106c-4 4-10 7-17 7H106c-7 0-13-3-17-7l124-106 43 38 43-38zm-43 13L89 138c4-4 10-7 17-7h300c7 0 13 3 17 7L256 281zm54-23l121-105v208L310 258zM81 153l121 105L81 361V153z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/mikhailmorfikov">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://t.me/morfikov">
			<svg class="social__icon" aria-label="Telegram" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M199 404c-11 0-10-4-13-14l-32-105 245-144"/><path d="M199 404c7 0 11-4 16-8l45-43-56-34"/><path d="M204 319l135 99c14 9 26 4 30-14l55-258c5-22-9-32-24-25L79 245c-21 8-21 21-4 26l83 26 190-121c9-5 17-3 11 4"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/morfikov">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://gitlab.com/morfikov">
			<svg class="social__icon" aria-label="Gitlab" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M450 282l-22-67-43-133c-2-7-12-7-14 0l-43.3 133H184.3L141 82c-2-7-12-7-14 0L84 215l-22 67c-2 6 0 13 6 16l188 137 188-137c6-3 8-10 6-16z"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/users/3015317">
			<svg class="social__icon" aria-label="Stack Overflow" role="img" width="32" height="32" viewBox="0 0 512 512"><g stroke-width="30"><path fill="none" d="M125 297v105h241V297"/><path d="M170 341h150m-144-68l148 31M199 204l136 64m-95-129l115 97M293 89l90 120"/></g></svg>
		</a>
</div>
	<div class="footer__copyright">© 2021 Mikhail Morfikov.
	<span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span>
	<span class="footer__copyright-cc">
		<div class="license-icons">
			<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution 4.0 International license">
<i class="icon-cc"></i><i class="icon-cc-by"></i><i class="icon-cc-nc"></i><i class="icon-cc-sa"></i>
</a>
		</div>
		Except where otherwise noted, content on this site is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license</a>.
	</span>
	</div>
</footer>

<script src="https://morfikov.github.io/js/menu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>

<script src="https://morfikov.github.io/js/custom.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  textColor: '#c3c3c3'
})</script>
</body>
</html>

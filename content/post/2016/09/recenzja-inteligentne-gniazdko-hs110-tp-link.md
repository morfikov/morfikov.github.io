---
author: Morfik
categories:
- Hardware
date: "2016-09-21T18:23:05Z"
date_gmt: 2016-09-21 16:23:05 +0200
published: true
status: publish
tags:
- recenzja
- tp-link
- gniazdko
GHissueID: 378
title: 'Recenzja: Inteligentne gniazdko HS110 od TP-LINK'
---

Technologia wymaga energii. Ostatnio ktoś wspominał mi o tym, że infrastruktura internetowa zjada
jakieś 10% ogólnoświatowego zapotrzebowania na prąd. Czy tak jest w istocie, to nie wiem ale jedna
kwestia zdaje się być jasna, tj. wzrost ilości urządzeń, które bez elektryczności zwyczajnie nie
działają. Każdy z nas ma w swoim domu takie sprzęty, z tym, że część z nich mogłaby pracować krócej
niż 24 godziny na dobę. Weźmy sobie taki domowy router WiFi, czy też pierwszy z brzega TV. W nocy
zwykle nie ma potrzeby, by te urządzenia działały. Niemniej jednak, rano po przebudzeniu raczej
ostatnią rzeczą, o której myślimy, to włączanie czegoś co naszym zdaniem powinno być już
uruchomione. Poza tym, rozruch sprzętu elektronicznego zawsze zajmuje te parę minut. Tryb
oszczędzania energii implementowany przez producentów ma łagodzić dolegliwości związane z potrzebą
wyłączania sprzętu, gdy ten jest nieużywany. Niemniej jednak, takie urządzenie w dalszym ciągu prąd
pobiera, niewiele ale zawsze, no i zużywa się szybciej. TP-LINK ma w swojej ofercie inteligentne
gniazdka (smart plug), które są w stanie nam pomóc. Urządzenia te możemy programować, tak by
automatycznie odcinały dopływ prądu do tego naszego przykładowego routera WiFi. W tym artykule
rzucimy sobie okiem na takie gniazdko, a konkretnie będzie to [model
HS110](http://www.tp-link.com.pl/products/details/cat-5258_HS110.html).

<!--more-->
## Zawartość pudełka

Zaczniemy oczywiście od tego co wszyscy najbardziej lubią, czyli od unboxing'u. Poniżej są fotki
opakowania tego inteligentnego gniazda HS110 oraz jego zawartości:

![](/img/2016/09/1.hs110-smart-plug-inteligentne-gniazdko-opakowanie-1.jpg#big)

![](/img/2016/09/2.hs110-smart-plug-inteligentne-gniazdko-opakowanie-zawartosc.jpg#big)

Jak widać, dość duże jest to urządzenie. Jego dokładne wymiany to nieco ponad 100 x 66 x 77 mm (dł,
sz, wy). Samo gniazdko waży około 130 gram.

Z wierzchu HS110 w zasadzie nie różni się zbytnio od normalnego gniazdka. Jedyną widoczną różnicą
jest włącznik zasilania:

![](/img/2016/09/3.hs110-smart-plug-inteligentne-gniazdko-wyglad.jpg#big)

Na obudowie mamy także bardzo niewielki przycisk resetu
ustawień:

![](/img/2016/09/4.hs110-smart-plug-inteligentne-gniazdko-przycisk-reset.jpg#big)

Poniżej zaś jest fotka obrazująca nieco duże wymiary HS110:

![](/img/2016/09/5.hs110-smart-plug-inteligentne-gniazdko-wielkosc.jpg#big)

Jak widzimy, w przypadku chęci podłączenia tego typu urządzenia do różnego rodzaju listw
antyprzepięciowych czy innych przedłużaczy, trzeba liczyć się z utratą jednego wolnego gniazda.

Od spodu HS110 prezentuje się też raczej w standardowy sposób:

![](/img/2016/09/6.hs110-smart-plug-inteligentne-gniazdko-spod.jpg#big)

Maksymalne obciążenie przy jakim to inteligentne gniazdko jest w stanie pracować, to około 3700 W.

## Jak sterować inteligentnym gniazdkiem HS110

Jak mogliśmy zobaczyć na powyższych fotkach, gniazdko HS110 nie ma żadnego panelu, przy pomocy
którego moglibyśmy przeprowadzić konfigurację tego urządzenia. Niemniej jednak, jest ona można, z
tym, że będzie nam potrzebny smartfon oraz bezprzewodowy router zapewniający nam sieć WiFi.

Gniazdka niestety nie dodamy manualnie do naszej sieci WiFi i musimy to zrobić za pomocą smartfona.
Z kolei by to uczynić, trzeba posłużyć się specjalną aplikacją, którą dostarcza TP-LINK:
[KASA](https://play.google.com/store/apps/details?id=com.tplink.kasa_android&hl=pl). Sama aplikacja
jest dostępna w Google Play/App Store i możemy ją ręcznie odszukać lub też możemy zeskanować [kod
QR](http://www.qr-online.pl/kody-qr.html).

### Jak pobrać aplikację KASA

Jako, że skanowanie kodu QR jest o wiele wygodniejsze i bezpieczniejsze, to poniżej zostanie opisany
ten sposób pobrania aplikacji KASA. Jeśli na smartfonie nie mamy jeszcze żadnego skanera kodów QR,
to powinniśmy sobie doinstalować, bo inaczej nie zeskanujemy kodu. Ja korzystałem z [QR Droid Code
Scanner](https://play.google.com/store/apps/details?id=la.droid.qr). Kod QR możemy zaś znaleźć w
instrukcji obsługi HS110:

![](/img/2016/09/7.hs110-smart-plug-inteligentne-gniazdko-kod-qr.jpg#medium)

Odpalamy teraz skaner kodów QR i celujemy w widoczny wyżej kod. Po chwili powinien on zostać
zeskanowany, a nam pojawić się link do odpowiedniej aplikacji:

![](/img/2016/09/8.hs110-smart-plug-inteligentne-gniazdko-skan-kodu-qr.png#medium)

Otwieramy sklep Play i powinniśmy od razu zostać przeniesieni do aplikacji KASA:

![](/img/2016/09/9.hs110-smart-plug-inteligentne-gniazdko-aplikacja-kasa.png#medium)

Instalujemy:

![](/img/2016/09/10.hs110-smart-plug-inteligentne-gniazdko-aplikacja-kasa.png#medium)

Jak widzimy wyżej, aplikacja KASA waży około 30 MiB. Po tym jak proces instalacyjny dobiegnie końca,
odpalamy aplikację. Powinniśmy zobaczyć mniej więcej takie okienko:

![](/img/2016/09/11.hs110-smart-plug-inteligentne-gniazdko-aplikacja-kasa.png#medium)

### Konto w TP-LINK Cloud

Gniazdkiem HS110 możemy sterować przez sieć WiFi w obrębie naszego domu. Możemy także zarządzać nim
przez internet. W przypadku tej drugiej opcji potrzebne jest nam konto w serwisie [TP-LINK
Cloud](https://www.tplinkcloud.com/). Jeśli nie zamierzamy zdalnie sterować gniazdkiem, to możemy
pominąć ten krok i przejść bezpośrednio do konfiguracji HS110.

Aplikacja KASA przy instalacji na smartfonie prosi o udostępnienie naszej aktualnej lokalizacji. Te
dane są jej potrzebne do ustawienia odpowiedniej strefy czasowej, skonfigurowania DST (czas
letni/zimowy) oraz określeniu czasu wschodu i zachodu słońca. Jak wiadomo, nawet na tej samej
długości i szerokości geograficznej, ten czas ulega zmianie. Im bliżej do zimy, tym dzień staje
się krótszy i podobnie w stronę lata, gdzie dni stają się dłuższe. Jeśli zależy nam na tym, aby w
oparciu o ten czas nasz Smart Plug włączał i wyłączał się, to powinniśmy zezwolić aplikacji KASA na
dostęp do tych danych. Możemy naturalnie ręcznie ustawić lokalizację o ile znamy swoje położenie
GPS.

### Konfiguracja Smart Plug'a HS110

Wszystkie ustawienia, które mamy zamiar dostosować sobie w procesie konfiguracji Smart Plug'a HS110,
będziemy mogli zmienić w dowolnym czasie. Trzeba tylko pamiętać, że ustawienia sieci WiFi nie
podlegają zmianie i przy przenoszeniu HS110 do nowej sieci bezprzewodowej, będziemy musieli
zainicjować proces konfiguracji lub też zresetować do fabrycznych ustawienia Smart Plug'a. Proces
konfiguracji możemy aktywować trzymając przez około 5 sekund ten mały przycisk na obudowie
urządzenia. Reset ustawień do fabrycznych nastąpi w przypadku, gdy ten przycisk przytrzymamy przez
co najmniej 10 sekund.

W każdym z tych dwóch powyżej opisanych przypadków, dioda WLAN (ta na przycisku power) będzie migać
naprzemiennie na zielono i czerwono. W tej chwili na Smart Plug'u jest odpalony AP z ESSID
`TP-LINK_Smart Plug_XXXX` bez hasła i innych zabezpieczeń. Każdy w zasięgu tego AP może się do niego
podłączyć. Należy zaznaczyć, że HS110 potrafi się komunikować jedynie w paśmie 2,4 GHz oraz, że by
podłączyć to urządzenie do naszej sieci domowej, musimy wyłączyć AP Isolation, czyli izolowanie od
siebie klientów bezprzewodowych w ustawieniach routera WiFi.

Odpalamy aplikację KASA na naszym smartfonie i dodajemy w niej nowe urządzenie:

![](/img/2016/09/12.hs110-smart-plug-inteligentne-gniazdko-kasa-dodaj-urzadzenie.png#medium)

W tym przypadku musimy wskazać Smart Plug, jako że chcemy zarządzać inteligentnym gniazdkiem:

![](/img/2016/09/13.hs110-smart-plug-inteligentne-gniazdko-kasa-dodaj-urzadzenie.png#medium)

Jeśli jeszcze nie podłączyliśmy naszego HS110 do sieci elektrycznej, to zróbmy to teraz. Po chwili,
dioda WLAN na przycisku power powinna się zacząć świecić i migać naprzemiennie na zielono i
pomarańczowo:

![](/img/2016/09/14.hd110-smart-plug-inteligentne-gniazdko-dioda.jpg#big)

W aplikacji KASA na smartfonie przechodzimy dalej zgodnie z wypisanymi nam instrukcjami. W pewnym
momencie zacznie się wyszukiwanie HS110:

![](/img/2016/09/15.hs110-smart-plug-inteligentne-gniazdko-kasa-dodaj-urzadzenie.png#medium)

Urządzenie powinno zostać odnalezione bez problemu. Teraz możemy mu nadać ludzką nazwę:

![](/img/2016/09/16.hs110-smart-plug-inteligentne-gniazdko-kasa-dodaj-urzadzenie.png#medium)

I wybrać ikonkę:

![](/img/2016/09/17.hs110-smart-plug-inteligentne-gniazdko-kasa-dodaj-urzadzenie.png#medium)

W przypadku utworzenia konta w serwisie TP-LINK Cloud, możemy włączyć zdalne zarządzanie gniazdkiem.
Niemniej jednak, ja z tego ficzera nie zamierzam korzystać:

![](/img/2016/09/18.hs110-smart-plug-inteligentne-gniazdko-kasa-zdalne-zarzadzanie.png#medium)

Zapisujemy urządzenie i odszukujemy nazwę naszej sieci WiFi na liście dostępnych. Wybieramy ją i
podajemy hasło do sieci:

![](/img/2016/09/19.hs110-smart-plug-inteligentne-gniazdko-kasa-wifi.png#medium)

Czekamy chwilkę na podłączenie gniazdka do sieci bezprzewodowej. W moim przypadku poszło coś nie
tak. Hasło było prawidłowe ale zobaczyłem jedynie poniższy komunikat:

![](/img/2016/09/20.hs110-smart-plug-inteligentne-gniazdko-problem-wifi.png#medium)

Nie mam pojęcia dlaczego taka sytuacja zaistniała ale widać moje 64 znakowe hasło nie jest
akceptowane przez gniazdko. Zastosowanie krótszego hasła rozwiązało ten problem:

![](/img/2016/09/21.hs110-smart-plug-inteligentne-gniazdko-kasa-sukces.png#medium)

Mając podłączone gniazdko po WiFi do sieci domowej, jego AP zostaje dezaktywowany i nikt nie spoza
naszej sieci nie będzie w stanie się połączyć z tym Smart Plug'iem.

## Użytkowanie HS110

Sprawdźmy zatem co to inteligentne gniazdko potrafi. Po dodaniu urządzenia, w aplikacji KASA
powinniśmy mieć je na liście urządzeń:

![](/img/2016/09/22.hs110-smart-plug-inteligentne-gniazdko-kasa-urzadzenia.png#medium)

Jak widzimy, pod nazwą `Morfik's Plug` mamy informację, że to urządzenie jest zarządzane lokalnie.
Ikonka power po prawej stronie wskazuje nam czy ten Smart Plug jest aktualnie włączony czy
wyłączony. Obecnie status wskazuje na wyłączony. Kliknijmy w tę ikonkę, by gniazdko mogło
dostarczyć zasilanie podpiętemu do niego urządzeniu:

![](/img/2016/09/23.hs110-smart-plug-inteligentne-gniazdko-kasa-urzadzenia.png#medium)

Ikonka ikonka zmieniła kolor, a my powinniśmy usłyszeć charakterystyczny dźwięk wydobywający się z
gniazdka. Trochę przypomina on ten, który zwykle można było usłyszeć w grach z serii Resident Evil,
przynajmniej tych pierwszych. W ten sposób możemy przełączać status gniazdka i odcinać lub podawać
zasilanie wszystkiemu co zostanie pod nie podłączone.

### Licznik energii

Bardzo użyteczną właściwością HS110 jest licznik energii. Przy jego pomocy możemy stale monitorować
aktualne zużycie prądu jakiegoś urządzenia czy urządzeń jeśli do naszego Smart Plug'a została
podłączona listwa. Poniżej przykład mojego laptopa podczas pisania tego artykułu:

![](/img/2016/09/24.hs110-smart-plug-inteligentne-gniazdko-kasa-pobor-energii.png#medium)

Nie jest źle. Jak widzimy wyżej, mamy również licznik kWh, przez co łatwiej będzie można przeliczyć
ile kosztuje nas eksploatacja takiego urządzenia w skali miesiąca, czy co ile nam tam rachunki za
prąd przychodzą. Mamy również uśrednioną dzienną wartość poboru prądu w odniesieniu do ostatnich 7
i 30 dni.

### Harmonogram pracy HS110

Kolejna ciekawa rzecz jaką oferuje nam takie inteligentne gniazdko, to harmonogram pracy. W
przypadku, gdy pewne urządzenia nie mają pracować w nocy, np. od godziny 23-6, to tak możemy
zaprogramować HS110, by automatycznie odciął zasilanie o godzinie 23 i podłączył je o 6 rano,
poniżej przykład:

![](/img/2016/09/25.hs110-smart-plug-inteligentne-gniazdko-kasa-harmonogram.png#medium)

Takich zdarzeń może być maksymalnie 32. Poza godzinami włączenia/wyłączenia gniazdka, mamy także
możliwość określenia czy ta czynność ma być powtarzana, jeśli tak to w jakie dni tygodnia.

### Tryb oddalenia (Away Mode)

Kolejny bardzo użyteczny bajer na wyposażeniu HS110, to tryb oddalenia, czy jak kto woli Away Mode.
By oddać w pełni jego istotę, załóżmy, że wyjeżdżamy gdzieś na dłużej, powiedzmy 2 tygodnie. Nasz
dom zwykle zamiera na ten czas, co jest odczuwalne wieczorami i w nocy. Rośnie zatem ryzyko, że może
on paść łupem złodziei czy innych tego typu nieproszonych gości. Po aktywacji Away Mode, gniazdko
będzie się automatycznie włączać i wyłączać losowo podczas ustawionego przedziału czasu. Możemy
zatem podłączyć jakąś lampkę czy niezbyt głośną maszynę i ustawić godziny 18-22 oraz dni Po, Wt, Cz,
Pi i So:

![](/img/2016/09/26.hs110-smart-plug-inteligentne-gniazdko-kasa-away-mode.png#medium)

Przy losowych zdarzeniach w godzinach, w których złodzieje zwykle spodziewają się lokatorów, raczej
nie musimy się martwić, że coś złego się nam przytrafi.

### Tryb zegara

Ostatnim trybem jest zegar. Różnica w stosunku do harmonogramu jest taka, że ustawiamy czas po
którym ma nastąpić jedno zdarzenie. Z chwilą wybicia zegara, to zdarzenie zostanie zainicjowane. Do
wyboru mamy tylko dwa zdarzenia -- włączyć lub wyłączyć gniazdko.

Załóżmy, że jest wieczór i chcemy sobie obejrzeć w TV jakiś film. Ten materiał trwa około 2 godziny
i 30 minut. Jesteśmy też nieco zmęczeni i wiemy, że nie dotrwamy do końca filmu i pewnie zaśniemy
gdzieś w jego połowie. Nasz Smart Plug wyłączy za nas TV po upłynięciu tego okresu czasu. My tylko
musimy go odpowiednio ustawić:

![](/img/2016/09/27.hs110-smart-plug-inteligentne-gniazdko-kasa-zegar.png#medium)

W przypadku, gdy czas zegara nałoży się na jedno z zaplanowanych w harmonogramie zadań, to takie
zadanie nie zostanie zainicjowane. Podobnie sprawa ma się z Away Mode, z tym, że tutaj ten tryb
zostanie wyłączony po puszczeniu zegara i wznowiony po jego wybiciu.

## Krytyczne problemy ujawnione podczas analizy firmware HS110

Szukając info na temat Smart Plug'a HS110 natrafiłem przypadkiem na [reverse engineering
firmware](https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/) tego urządzenia. Można
tam poczytać o szeregu podatności tego oprogramowania, min. jest tam też wzmianka o połączeniu z
serwerem TP-LINK Cloud, a konkretnie o możliwości przechwycenia komunikacji nawet zaszyfrowanej i w
efekcie przejęcia całkowitej kontroli nad urządzeniem. Jest też coś o łączeniu się HS110 z serwerem
`devs.tplinkcloud.com` nawet, gdy urządzenie jest skonfigurowane do zarządzania lokalnego. Problemem
też jest brak jakiegokolwiek uwierzytelniania podczas zarządzania Smart Plug'iem. Praktycznie każdy
z sieci lokalnej ma pełny dostęp do gniazdka i może nim dowolnie operować. Jeśli nie podobają nam
się te rzeczy i faktycznie mamy coś krytycznego podpiętego do tego inteligentnego gniazdka, to
powinniśmy wyłączyć zdalne zarządzanie via KASA i lokalnie nieco skonfigurować sobie to gniazdko
przy pomocy [skryptów dostępnych na github'ie](https://github.com/softScheck/tplink-smartplug).
